{"version":3,"mappings":"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","names":["_angular_core__WEBPACK_IMPORTED_MODULE_4__","EditShippingComponent","formBuilder","router","commonService","toastService","dialog","titleCasePipe","data","dialogRef","warehouseService","partyService","JSON","parse","localStorage","getItem","today","Date","packageData","packStatus","_a","shippingForm","group","name","value","disabled","_angular_forms__WEBPACK_IMPORTED_MODULE_6__","saleInvoice","trackingDetails","shipmentId","carrier","getPackageData","toastMsg","title","content","controls","close","patchValue","customerName","invoiceNo","subTotal","totalAmount","shippingCharge","_b","event","charCode","which","keyCode","submitted","invalid","userId","currentUser","id","updateData","mobile","address","_c","updatePackage","then","res","success","notifyDataAdded","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__","selectors","decls","vars","consts","template","ctx"],"sources":["webpack:///src/app/pages/warehouse/components/shipping/components/edit-shipping/edit-shipping.component.html","webpack:///src/app/pages/warehouse/components/shipping/components/edit-shipping/edit-shipping.component.ts"],"sourcesContent":["<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Add Shipping Data</h1>\r\n\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" style=\"margin-right: 10px;\" class=\"btn btn-cancel\" (click)=\"cancel()\">Cancel</button>\r\n        <button type=\"button\" class=\"btn btn-save ms-2\" (click)=\"onSave()\">\r\n          {{ (packStatus === 'PACKED' ? 'SHIPPED' : (packStatus === 'SHIPPED' ? 'DELIVERED' : 'SAVE')) }}\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <form [formGroup]=\"shippingForm\">\r\n        <div class=\"row mb-3\">\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\" [ngClass]=\"{ 'disabled': true }\">\r\n              <label class=\"form-label\">Customer Name</label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Name\" maxlength=\"50\" formControlName=\"name\" [disabled]=\"true\">\r\n              </mat-form-field>\r\n              <!-- <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.name.touched) && f.name.errors?.required\">\r\n                Name is required!\r\n              </mat-error> -->\r\n            </div>\r\n\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\" [ngClass]=\"{ 'disabled': true }\">\r\n              <label class=\"form-label\">Sale Invocie</label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Sale Invocie\" maxlength=\"50\" formControlName=\"saleInvoice\" [disabled]=\"true\">\r\n              </mat-form-field>\r\n              <!-- <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.saleInvoice.touched) && f.saleInvoice.errors?.required\">\r\n                Sale Invoice is required!\r\n              </mat-error> -->\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"row mb-3\">\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\" [ngClass]=\"{ 'disabled' : packStatus !== 'PACKED'}\">\r\n              <label class=\"form-label\">Tracking Details</label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Tracking Details\" maxlength=\"50\" formControlName=\"trackingDetails\" required>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.trackingDetails.touched) && f.trackingDetails.errors?.required\">\r\n                Tracking Details is required!\r\n              </mat-error>\r\n            </div>\r\n            \r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\" [ngClass]=\"{ 'disabled' : packStatus !== 'PACKED'}\">\r\n              <label class=\"form-label\">Shipment Id</label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Shipment Id\" maxlength=\"50\" formControlName=\"shipmentId\" required>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.shipmentId.touched) && f.shipmentId.errors?.required\">\r\n                Shipment Id is required!\r\n              </mat-error>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"row mb-3\">\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\" [ngClass]=\"{ 'disabled' : packStatus !== 'PACKED'}\">\r\n              <label class=\"form-label\">Carrier</label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Carrier\" maxlength=\"50\" formControlName=\"carrier\" required>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.carrier.touched) && f.carrier.errors?.required\">\r\n                Carrier is required!\r\n              </mat-error>\r\n            </div>\r\n        </div>  \r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-12 col-md-6 col-lg-6 table-bordered my-custom-scrollbar\">\r\n          </div>\r\n\r\n          <div class=\"col-sm-12 col-md-6 col-lg-6 table-bordered my-custom-scrollbar\">\r\n            <table class=\"table table-bordered p-5 my-custom-scrollbar \">\r\n                <tr>\r\n                    <td class=\"thWidth p-2\" style=\"text-align:left\">Subtotal</td>\r\n                    <td class=\"p-2\" style=\"width: 50px;\" style=\"text-align:right\">\r\n                        AED&nbsp;{{ (subTotal || 0) | number:'1.2-2'}}\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td class=\"thWidth p-2\" style=\"text-align:left\">shippingCharge</td>\r\n                    <td class=\"p-2\" style=\"width: 50px;\" style=\"text-align:right\">\r\n                        AED&nbsp;{{ (shippingCharge || 0) | number:'1.2-2'}}\r\n                    </td>\r\n                </tr>\r\n                <!-- <tr>\r\n                    <td class=\"thWidth p-2\" *ngIf=\"gstStateMatch\" style=\"text-align:left!important\">\r\n                        {{lang.CGST}}\r\n                    </td>\r\n                    <td class=\"p-2\" *ngIf=\"gstStateMatch\" style=\"width: 50px;\"\r\n                        style=\"text-align:right!important\">\r\n                        AED&nbsp;{{ gstRate | number:'1.2-2'}}\r\n                    </td>\r\n                </tr> -->\r\n                <tr>\r\n                    <td class=\"thWidth p-2\" style=\"text-align:left\">Total</td>\r\n                    <td class=\"p-2\" style=\"width: 50px;\" style=\"text-align:right\">\r\n                        AED&nbsp;{{ (shippingCharge || 0) + (subTotal || 0) | number:'1.2-2'}}\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n          </div>\r\n        </div>\r\n    </form>\r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PartyService } from 'src/app/core/services/party.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\nimport { WarehouseService } from 'src/app/core/services/warehouse.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-shipping',\r\n  templateUrl: './edit-shipping.component.html',\r\n  styleUrls: ['./edit-shipping.component.scss']\r\n})\r\nexport class EditShippingComponent implements OnInit {\r\n\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  public shippingForm: any;\r\n  public submitted: boolean = false;\r\n  public today: Date;\r\n  countryList: any[];\r\n  packageData: any;\r\n  packStatus: any;\r\n  shippingCharge: any;\r\n  subTotal: any;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<EditShippingComponent>,\r\n    private warehouseService: WarehouseService,\r\n    private partyService: PartyService\r\n  ) {\r\n    this.today = new Date();\r\n    this.packageData = this.data.packageData\r\n    this.packStatus = this.data.packageData?.packStatus\r\n  }\r\n\r\n  async ngOnInit(): Promise<void> {\r\n    try {\r\n      this.shippingForm = this.formBuilder.group({\r\n          name: [{value: null, disabled: true }, Validators.required],\r\n          saleInvoice: [{value: null, disabled: true}, Validators.required],\r\n          trackingDetails: [null],\r\n          shipmentId: [null],\r\n          carrier: [null],\r\n          packStatus: [null]\r\n      });\r\n      await this.getPackageData()\r\n    } catch (error) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: error\r\n        })\r\n    }\r\n  }  \r\n  \r\n  get f() {\r\n    return this.shippingForm.controls;\r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  async getPackageData(){\r\n    if(this.packageData){\r\n      await this.shippingForm.patchValue({\r\n        name: this.packageData.customerName,\r\n        saleInvoice: this.packageData.invoiceNo,\r\n        trackingDetails: this.packageData.trackingDetails,\r\n        shipmentId: this.packageData.shipmentId,\r\n        carrier: this.packageData.carrier,\r\n        packStatus: this.packageData.packStatus,\r\n      })\r\n      this.subTotal = this.packageData?.totalAmount\r\n      this.shippingCharge = this.packageData?.shippingCharge\r\n    }\r\n  }\r\n\r\n  numberOnly(event): boolean {\r\n    const charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  numberDecimalOnly(event): boolean {\r\n    var charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode != 46 && charCode > 31\r\n      && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSave() {\r\n    this.submitted = true;\r\n    if (this.shippingForm.invalid) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Fill All Required Fields.\",\r\n      });\r\n      return false;\r\n    } else {\r\n      const data = {\r\n        userId: this.currentUser.id,\r\n        updateData: {\r\n          name: \"package\",\r\n          customerName: this.packageData?.customerName,\r\n          mobile: this.packageData?.mobile,\r\n          address: this.packageData?.address,\r\n          trackingDetails: this.shippingForm.value.trackingDetails,\r\n          shipmentId: this.shippingForm.value.shipmentId,\r\n          carrier: this.shippingForm.value.carrier,\r\n          packStatus: (this.packStatus === 'PACKED' ? 'SHIPPED' : (this.packStatus === 'SHIPPED' ? 'DELIVERED' : this.packStatus)),\r\n        }\r\n      }\r\n      this.warehouseService.updatePackage(data, this.packageData.id).then( res => {\r\n        if(res.success) {\r\n          this.dialogRef.close();\r\n          this.commonService.notifyDataAdded()\r\n          this.toastService.toastMsg({\r\n            title: \"Success\",\r\n            content: \"Shipping Data Updated Successfully!!!\",\r\n          });\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n"]}