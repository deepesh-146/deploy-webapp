{"version":3,"file":"src_app_pages_promotions_promotions_module_ts-es2015.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEoE;;;;;;;;;;;;;;ICetD,gFAA4G;IAC1G,qFACF;IAAA,4DAAY;;;IAMR,iFAAsD;IACpD,uDACF;IAAA,4DAAa;;;IAF0B,0EAAc;IACnD,0DACF;IADE,mFACF;;;IAGJ,gFAAgG;IAC9F,qFACF;IAAA,4DAAY;;;IAWV,4EAAoD;IAChD,oGACJ;IAAA,4DAAY;;;IAYhB,0EAAwF;IACpF,kIACJ;IAAA,4DAAM;;;;IAvBV,yEAA2D;IACvD,yEAA4E;IACxE,2EAA0B;IAAA,8EAAmB;IAAA,4DAAQ;IACrD,qFAAgE;IAC5D,4EAAqI;IAAhC,+UAA+B;IAApI,4DAAqI;IACrI,2EAAkC;IAAA,4DAAC;IAAA,4DAAO;IAC9C,4DAAiB;IACjB,qIAEY;IAChB,4DAAM;IAEN,yEAA4E;IACxE,4EAA0B;IAAA,2EAAe;IAAA,4DAAQ;IACjD,sFAAgE;IAC5D,6EAA8H;IAAhC,gVAA+B;IAA7H,4DAA8H;IAC9H,4EAAkC;IAAC,yEAAO;IAAA,4DAAO;IACrD,4DAAiB;IACrB,4DAAM;IAGN,2HAEM;IACV,4DAAM;;;IAjBc,0DAAsC;IAAtC,4JAAsC;IAchD,0DAA4D;IAA5D,sIAA4D;;;IAuBlE,0EAAwF;IACpF,kIACJ;IAAA,4DAAM;;;;IApBV,yEAAsD;IAClD,yEAA4E;IACxE,2EAA0B;IAAA,8EAAmB;IAAA,4DAAQ;IACrD,qFAAgE;IAC5D,2EAAkC;IAAC,wEAAO;IAAA,4DAAO;IACjD,4EAA8H;IAAhC,+UAA+B;IAA7H,4DAA8H;IAClI,4DAAiB;IACrB,4DAAM;IAEN,yEAA4E;IACxE,2EAA0B;IAAA,2EAAe;IAAA,4DAAQ;IACjD,sFAAgE;IAC5D,6EAA8H;IAAhC,gVAA+B;IAA7H,4DAA8H;IAC9H,4EAAkC;IAAC,yEAAO;IAAA,4DAAO;IACrD,4DAAiB;IACrB,4DAAM;IAGN,2HAEM;IACV,4DAAM;;;IAHI,2DAA4D;IAA5D,sIAA4D;;;IAW9D,gFAA8G;IAC1G,sFACJ;IAAA,4DAAY;;;IAUZ,gFAA8G;IAC1G,sFACJ;IAAA,4DAAY;;;;IApBpB,yEAAsD;IAClD,yEAA4E;IACxE,2EAA0B;IAAA,uEAAY;IAAA,2EAA6B;IAAA,4DAAC;IAAA,4DAAO;IAAA,4DAAQ;IACnF,qFAAgE;IAC5D,4EAAuH;IAAhC,+UAA+B;IAAtH,4DAAuH;IAC3H,4DAAiB;IACjB,qIAEY;IAChB,4DAAM;IAEN,yEAA4E;IACxE,4EAA0B;IAAA,wEAAY;IAAA,4EAA6B;IAAA,6DAAC;IAAA,4DAAO;IAAA,4DAAQ;IACnF,sFAAgE;IAC5D,2EAAoC;IAChC,6EAAuH;IAAhC,gVAA+B;IAAtH,4DAAuH;IAC3H,4DAAM;IACV,4DAAiB;IACjB,uIAEY;IAChB,4DAAM;IACV,4DAAM;;;IAhBkC,0DAA4E;IAA5E,2MAA4E;IAY5E,0DAA4E;IAA5E,2MAA4E;;;IAYxG,iFAAwE;IACpE,uDACJ;IAAA,4DAAa;;;IAFsC,iFAAoB;IACnE,0DACJ;IADI,gGACJ;;;;IAPhB,0EAAoD;IAChD,0EAAqD;IACjD,2EAA0B;IAAA,mEAAQ;IAAA,2EAA6B;IAAA,4DAAC;IAAA,4DAAO;IAAA,4DAAQ;IAC/E,qFAAgE;IAC5D,iFAA2G;IAAvD,uWAAgC;IAChF,uIAEa;IACjB,4DAAa;IACjB,4DAAiB;IACrB,4DAAM;IACV,4DAAM;;;IAP0D,0DAAgC;IAAhC,8FAAgC;IAChD,0DAAiB;IAAjB,0FAAiB;;ADnG9D,MAAM,qBAAqB;IAUhC,YAAoB,WAAwB,EACnC,MAAc,EAAU,aAA4B,EACnD,YAAsC,EAAS,MAAiB,EAChE,aAA4B;IACpC,6CAA6C;IACtC,SAA8C,EAC7C,gBAAkC;QANxB,gBAAW,GAAX,WAAW,CAAa;QACnC,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QACnD,iBAAY,GAAZ,YAAY,CAA0B;QAAS,WAAM,GAAN,MAAM,CAAW;QAChE,kBAAa,GAAb,aAAa,CAAe;QAE7B,cAAS,GAAT,SAAS,CAAqC;QAC7C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAdrC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAE7D,cAAS,GAAY,KAAK,CAAC;QAElC,UAAK,GAAa,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAE,8CAA8C;QAElG,uBAAkB,GAAa,EAAE,CAAC;QA+GlC,wBAAmB,GAAgB,CAAC,OAAwB,EAA2B,EAAE;YACvF,MAAM,kBAAkB,GAAG,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,KAAK,CAAC;YACnE,MAAM,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC;YAE3D,0EAA0E;YAC1E,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,UAAU,IAAI,CAAC,CAAC,kBAAkB,IAAI,CAAC,cAAc,CAAC,EAAE;gBACxF,OAAO,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC;aAClC;YAED,OAAO,IAAI,CAAC;QACd,CAAC,CAAC;QA/GA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;IAC1B,CAAC;IAED,QAAQ;QACN,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBACxC,UAAU,EAAE,CAAC,IAAI,CAAC;gBAClB,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,0DAAc,CAAC,CAAC,CAAC,EAAE,0DAAc,CAAC,GAAG,CAAC,CAAC,CAAC;gBACpE,cAAc,EAAE,CAAC,IAAI,CAAC;gBACtB,UAAU,EAAE,CAAC,IAAI,CAAC;gBAClB,IAAI,EAAE,CAAC,UAAU,EAAE,+DAAmB,CAAC,EAAE,2BAA2B;aACvE,EACD;gBACI,UAAU,EAAE;oBACR,IAAI,CAAC,mBAAmB;iBAC3B,EAAE,6BAA6B;aACnC,CACA,CAAC;YACF,IAAI,CAAC,mCAAmC,EAAE;YAC1C,MAAM,yBAAyB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;YAC/E,MAAM,qBAAqB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YAEvE,0DAA0D;YAC1D,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;gBACtD,IAAI;oBACA,IAAI,KAAK,IAAI,CAAC,sBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,QAAQ,GAAE;wBAC3C,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,OAAO,EAAE,CAAC;qBACpC;yBAAM,IAAI,CAAC,KAAK,KAAI,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,QAAQ,GAAE;wBAClD,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,MAAM,EAAE,CAAC;qBACnC;iBACJ;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,kDAAkD,EAAE,KAAK,CAAC,CAAC;iBAC5E;YACL,CAAC,CAAC,CAAC;YAEH,sDAAsD;YACtD,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;gBAClD,IAAI;oBACA,IAAI,KAAK,IAAI,CAAC,0BAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,QAAQ,GAAE;wBAC/C,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,OAAO,EAAE,CAAC;qBACxC;yBAAM,IAAI,CAAC,KAAK,KAAI,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,QAAQ,GAAE;wBACtD,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,MAAM,EAAE,CAAC;qBACvC;iBACJ;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,8CAA8C,EAAE,KAAK,CAAC,CAAC;iBACxE;YACL,CAAC,CAAC,CAAC;YAEH,kGAAkG;YAClG,uDAAuD;YACvD,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAEnD,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,YAAY,CAAC,SAAS,CAAC,CAAC,IAAY,EAAE,EAAE;gBACnD,2DAA2D;gBAC3D,IAAI,IAAI,KAAK,SAAS,EAAE;oBACtB,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,eAAe,EAAE,CAAC;oBAC7C,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,eAAe,EAAE,CAAC;iBAC1C;qBAAM;oBACL,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,aAAa,CAAC,CAAC,0DAAc,CAAC,CAAC,CAAC,EAAE,0DAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACnF,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,aAAa,CAAC,IAAI,CAAC,CAAC;iBAC5C;gBAED,mCAAmC;gBACnC,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,sBAAsB,EAAE,CAAC;gBACpD,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,sBAAsB,EAAE,CAAC;gBAEhD,2CAA2C;gBAC3C,IAAI,CAAC,aAAa,CAAC,sBAAsB,EAAE,CAAC;YAC9C,CAAC,CAAC,CAAC;YAEH,6FAA6F;YAC7F,uDAAuD;YACvD,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5D,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5D,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,YAAY,CAAC,SAAS,CAAC,CAAC,IAAY,EAAE,EAAE;gBACnD,2DAA2D;gBAC3D,IAAI,IAAI,KAAK,MAAM,EAAE;oBACnB,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,eAAe,EAAE,CAAC;oBACjC,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,eAAe,EAAE,CAAC;iBAClC;qBAAM;oBACL,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,aAAa,CAAC,+DAAmB,CAAC,CAAC;oBAClD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,aAAa,CAAC,+DAAmB,CAAC,CAAC;iBACnD;gBAED,mCAAmC;gBACnC,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,sBAAsB,EAAE,CAAC;gBACxC,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,sBAAsB,EAAE,CAAC;gBAExC,2CAA2C;gBAC3C,IAAI,CAAC,aAAa,CAAC,sBAAsB,EAAE,CAAC;YAC9C,CAAC,CAAC,CAAC;SACJ;QAAC,OAAO,KAAK,EAAE;YACZ,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,KAAK;aACf,CAAC;SACL;IACH,CAAC;IAcD,IAAI,CAAC;QACH,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;IACrC,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;IAED,UAAU,CAAC,KAAK;QACd,MAAM,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;QAC7D,IAAI,QAAQ,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,EAAE,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE;YACrD,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,iBAAiB,CAAC,KAAK;QACrB,IAAI,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;QAC3D,IAAI,QAAQ,IAAI,EAAE,IAAI,QAAQ,GAAG,EAAE;eAC9B,CAAC,QAAQ,GAAG,EAAE,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE;YACrC,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,mCAAmC;QACjC,IAAI,CAAC,gBAAgB,CAAC,mCAAmC,CAAC;YACxD,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE;YAC3B,IAAI,EAAE,CAAC;YACP,IAAI,EAAE,IAAI;YACV,WAAW,EAAE,OAAO;SACrB,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACd,IAAG,GAAG,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;aACrC;QACH,CAAC,EAAC,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;gBAC1B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,mBAAmB;iBAC7B,CAAC;aACL;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC;aACH;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,2BAA2B;aACrC,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;aAAM,IAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,EAAE;YAC3F,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,mCAAmC;aAC7C,CAAC;SACH;aAAM;YACL,MAAM,IAAI,GAAG;gBACX,eAAe,EAAE;oBACf,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI;oBACrC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU;oBACjD,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;oBACnH,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;oBACnH,oBAAoB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB,CAAC;oBACpI,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc,CAAC;oBAC1H,UAAU,EAAE,IAAI;oBAChB,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI;oBAC7F,yFAAyF;oBACzF,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI;iBAChG;aACF;YACD,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAE,GAAG,CAAC,EAAE;gBACxE,IAAG,GAAG,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE;oBACpC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,kCAAkC;qBAC5C,CAAC,CAAC;iBACJ;YACH,CAAC,CAAC;SACH;IACH,CAAC;;0FA7NU,qBAAqB;mHAArB,qBAAqB;QChBlC,yEAA+B;QAC3B,wEAA2F;QAAA,wEAAa;QAAA,4DAAK;QAE7G,yEAA+B;QAC3B,4EAA4F;QAAnB,6IAAS,YAAQ,IAAC;QAAC,iEAAM;QAAA,4DAAS;QAC3G,4EAAmE;QAAnB,6IAAS,YAAQ,IAAC;QAAC,+DAAI;QAAA,4DAAS;QACpF,4DAAM;QACV,4DAAM;QAEN,yEAAwB;QACpB,0EAAkC;QAC9B,0EAAsB;QAClB,0EAA2E;QACzE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAgE;QAC9D,wEAA+F;QACjG,4DAAiB;QACjB,gIAEY;QACd,4DAAM;QACN,0EAA2E;QACzE,4EAA0B;QAAA,gEAAI;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAC3E,sFAAgE;QAC9D,kFAA+D;QAC7D,kIAEa;QACf,4DAAa;QACf,4DAAiB;QACjB,gIAEY;QACd,4DAAM;QACV,4DAAM;QAEN,qHAwBM;QAEN,qHAqBM;QAEN,qHAsBM;QAEV,4DAAO;QACP,oHAWM;QACV,4DAAM;;QAhHI,0DAA2B;QAA3B,wFAA2B;QAOS,0DAA0E;QAA1E,4LAA0E;QAQzE,0DAAQ;QAAR,8EAAQ;QAKT,0DAA8D;QAA9D,0KAA8D;QAM7E,0DAAiC;QAAjC,iGAAiC;QA0BjC,0DAA6B;QAA7B,6FAA6B;QAuB7B,0DAA6B;QAA7B,6FAA6B;QAyBtC,0DAAgC;QAAhC,gGAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5G8B;;;;;;;;;;;;;;ICShE,iFAAwE;IACpE,uDACJ;IAAA,4DAAa;;;IAFsC,gFAAoB;IACnE,0DACJ;IADI,+FACJ;;ADCb,MAAM,iCAAiC;IAS5C,YAAmB,MAAc,EAAU,aAA4B,EAC7D,YAAsC,EAAS,MAAiB,EAChE,aAA4B,EACJ,IAAS,EAClC,SAA0D,EACzD,gBAAkC,EAClC,cAA8B;QANrB,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QAC7D,iBAAY,GAAZ,YAAY,CAA0B;QAAS,WAAM,GAAN,MAAM,CAAW;QAChE,kBAAa,GAAb,aAAa,CAAe;QACJ,SAAI,GAAJ,IAAI,CAAK;QAClC,cAAS,GAAT,SAAS,CAAiD;QACzD,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,mBAAc,GAAd,cAAc,CAAgB;QAbjC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAKpE,uBAAkB,GAAa,EAAE,CAAC;QAS9B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;IAC3C,CAAC;IAEH,QAAQ;QACN,IAAI,CAAC,mCAAmC,EAAE;IAC5C,CAAC;IAED,mCAAmC;QACjC,IAAI,CAAC,gBAAgB,CAAC,mCAAmC,CAAC;YACxD,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE;YAC3B,IAAI,EAAE,CAAC;YACP,IAAI,EAAE,IAAI;YACV,WAAW,EAAE,OAAO;SACvB,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,IAAG,GAAG,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;aACrC;QACH,CAAC,EAAC,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;gBAC1B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,mBAAmB;iBAC7B,CAAC;aACL;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC;aACH;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM;QACJ,MAAM,OAAO,GAAG;YACd,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,YAAY,EAAE,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;SACxE,CAAC;QACF,IAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YACrC,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7E,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACZ,IAAG,GAAG,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,4CAA4C;qBACtD,CAAC;oBACF,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;iBACxB;YACH,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;gBACf,IAAG,KAAK,CAAC,MAAM,IAAI,GAAG,EAAE;oBACtB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,4DAA4D;qBACtE,CAAC;iBACH;qBAAM;oBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;qBACjE,CAAC;iBACH;YACH,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,mCAAmC;aAC7C,CAAC;SACH;IACH,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;;kHAxFU,iCAAiC,kvBAYlC,qEAAe;+HAZd,iCAAiC;QCd9C,yEAA+B;QAC3B,wEAA2F;QAAA,0EAAe;QAAA,4DAAK;QAC/G,4EAA8E;QAAnB,yJAAS,YAAQ,IAAC;QAAC,4DAAS;QAC3F,4DAAM;QAEN,yEAAwB;QACpB,yEAAiB;QACb,yEAAqD;QACjD,2EAA0B;QAAA,mEAAQ;QAAA,4DAAQ;QAC1C,oFAAgE;QAC5D,iFAAoH;QAAhE,uNAAgC;QAChF,6IAEa;QACjB,4DAAa;QACjB,4DAAiB;QACrB,4DAAM;QACV,4DAAM;QACV,4DAAM;QAEN,2EAA0B;QACtB,2EAA+B;QAC3B,8EAAmE;QAAnB,0JAAS,YAAQ,IAAC;QAAC,kEAAM;QAAA,4DAAS;QACtF,4DAAM;QACV,4DAAM;;QAd8D,2DAAgC;QAAhC,2FAAgC;QAChD,0DAAiB;QAAjB,uFAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTuB;;;;;;;;;;;;;;;ICGpF,6EAAkF;IAAnB,6TAAkB;IAAC,+DAAI;IAAA,4DAAS;;;;IAC/F,6EAAkG;IAAlC,4UAAiC;IAAC,iEAAM;IAAA,4DAAS;;;IA2DrF,gFAAqF;IAC7E,+GACR;IAAA,4DAAY;;;;IAT5B,4EAAmH;IAC/G,yEAAwB;IACpB,qEAAI;IACA,0EAA2B;IACvB,qFAA8E;IAC1E,uEAA0G;IAC9G,4DAAiB;IACjB,kJAEY;IAChB,4DAAM;IACV,4DAAK;IACL,qEAAI;IACA,qFAA8E;IAC1E,uEAAkF;IACtF,4DAAiB;IACrB,4DAAK;IACL,sEAAI;IACA,sFAA8E;IAC1E,wEAAqF;IACrF,4EAAkC;IAAA,6DAAC;IAAA,4DAAO;IAC9C,4DAAiB;IACrB,4DAAK;IACL,sEAAI;IACA,8EAA0D;IAAlC,8YAAiC;IACrD,4EAAU;IAAA,iEAAK;IAAA,4DAAW;IAC5B,4DAAS;IACf,4DAAK;IACT,4DAAK;IACT,qEAAe;;;;;IA5BP,0DAAmB;IAAnB,+EAAmB;IAI0E,0DAAuB;IAAvB,0FAAuB;IAEhG,0DAAmD;IAAnD,kHAAmD;;ADnD5F,MAAM,yBAAyB;IAWpC,YAAoB,WAAwB,EACnC,MAAc,EAAU,aAA4B,EACnD,YAAsC,EAAS,MAAiB,EAChE,aAA4B;IACpC,6CAA6C;IACtC,SAAkD,EACjD,gBAAkC;QANxB,gBAAW,GAAX,WAAW,CAAa;QACnC,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QACnD,iBAAY,GAAZ,YAAY,CAA0B;QAAS,WAAM,GAAN,MAAM,CAAW;QAChE,kBAAa,GAAb,aAAa,CAAe;QAE7B,cAAS,GAAT,SAAS,CAAyC;QACjD,qBAAgB,GAAhB,gBAAgB,CAAkB;QAfrC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAE7D,cAAS,GAAY,KAAK,CAAC;QAElC,UAAK,GAAa,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAE,8CAA8C;QAElG,uBAAkB,GAAa,EAAE,CAAC;QAClC,WAAM,GAAY,IAAI,CAAC;QAUrB,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;IAC1B,CAAC;IAED,QAAQ;QACN,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBACxC,cAAc,EAAE,IAAI,qDAAS,CAAC,EAAE,CAAC;aAClC,CACF,CAAC;YACF,IAAI,CAAC,qBAAqB,EAAE;SAC7B;QAAC,WAAM;SAEP;IACH,CAAC;IAED,IAAI,CAAC;QACH,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;IACrC,CAAC;IAED,IAAI,uBAAuB;QACzB,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAc,CAAC;IAC/D,CAAC;IAED,qBAAqB;QACnB,IAAI,CAAC,gBAAgB,CAAC,sBAAsB,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YAC/E,IAAG,GAAG,CAAC,OAAO,EAAE;gBACd,IAAG,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;oBACtB,IAAI,CAAC,MAAM,GAAG,KAAK;iBACpB;qBAAM;oBACL,IAAI,CAAC,MAAM,GAAG,IAAI;iBACnB;gBACD,IAAI,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC1B,IAAI,UAAU,CAAC,MAAM,EAAE;oBACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC1C,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAC/B,IAAI,qDAAS,CAAC;4BACZ,OAAO,EAAE,IAAI,uDAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;4BAC/C,OAAO,EAAE,IAAI,uDAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;4BAC/C,OAAO,EAAE,IAAI,uDAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;4BAC/C,EAAE,EAAE,IAAI,uDAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;yBACtC,CAAC,CACH;qBACF;iBACF;aACF;QACH,CAAC,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;IAED,oBAAoB;QAClB,OAAO,IAAI,qDAAS,CAAC;YACnB,OAAO,EAAE,IAAI,uDAAW,CAAC,EAAE,EAAE,CAAC,+DAAmB,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7E,OAAO,EAAE,IAAI,uDAAW,CAAC,EAAE,CAAC;YAC5B,OAAO,EAAE,IAAI,uDAAW,CAAC,EAAE,CAAE;SAC9B,CAAC,CAAC;IACL,CAAC;IAED,iBAAiB;QACf,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAc,CAAC;QACnE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;IACzC,CAAC;IAED,oBAAoB,CAAC,KAAa;QAChC,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAc,CAAC;QACnE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;QAC/B,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,2BAA2B;aACrC,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;aAAM;YACL,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc;YACnD,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;YACtD,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,EAAC,IAAI,EAAG,GAAG,EAAE,CAAC,CAAC,IAAI,CAAE,GAAG,CAAC,EAAE;gBACnE,IAAG,GAAG,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE;oBACpC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,iCAAiC;qBAC3C,CAAC,CAAC;iBACJ;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,qBAAqB;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;QAC/B,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,2BAA2B;aACrC,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;aAAM;YACL,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc;YACnD,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;YACtD,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,EAAC,IAAI,EAAG,GAAG,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAE,GAAG,CAAC,EAAE;gBAC1F,IAAG,GAAG,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE;oBACpC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,kCAAkC;qBAC5C,CAAC,CAAC;iBACJ;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,YAAY,CAAC,KAAa;QACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC;QAEvD,mCAAmC;QACnC,IAAI,KAAK,GAAG,CAAC,EAAE;YACb,MAAM,WAAW,GAAG,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;YAC7D,OAAO,WAAW,CAAC;SACpB;aAAM;YACL,2DAA2D;YAC3D,OAAO,CAAC,CAAC;SACV;IACH,CAAC;IAED,gBAAgB,CAAC,KAAa;QAC5B,OAAO,CAAC,OAAO,EAAE,EAAE;YACjB,MAAM,QAAQ,GAAG,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC;YACvD,MAAM,WAAW,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YACrF,MAAM,cAAc,GAAG,OAAO,CAAC,KAAK,CAAC;YACrC,IAAI,cAAc,IAAI,WAAW,EAAE;gBACjC,OAAO,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;aAC/B;iBAAM;gBACL,OAAO,IAAI,CAAC;aACb;QACH,CAAC,CAAC;IACJ,CAAC;;kGAnKU,yBAAyB;uHAAzB,yBAAyB;QCdtC,yEAA+B;QAC3B,wEAA2F;QAAA,+EAAoB;QAAA,4DAAK;QAEpH,yEAA+B;QAC3B,4EAA4F;QAAnB,iJAAS,YAAQ,IAAC;QAAC,iEAAM;QAAA,4DAAS;QAC3G,2HAA+F;QAC/F,2HAAiH;QACrH,4DAAM;QACV,4DAAM;QAEN,yEAAwB;QACpB,0EAAkC;QAC9B,0EAAsB;QAqClB,4EAAoB;QAChB,4EAAoC;QAChC,sEAAI;QACA,0EAAgB;QAAA,mEAAO;QAAA,4DAAK;QAC5B,0EAAgB;QAAA,mEAAO;QAAA,4DAAK;QAC5B,0EAAgB;QAAA,mEAAO;QAAA,4DAAK;QAChC,4DAAK;QACT,4DAAQ;QACR,6EAAgC;QAC5B,2IA6Be;QACnB,4DAAQ;QACZ,4DAAQ;QAER,2EAAgD;QAC5C,sEAA+C;QAC/C,2EAA0D;QACtD,yEAA6E;QAAtD,6IAAS,uBAAmB,IAAC;QAChD,uEAAyD;QACzD,yEACJ;QAAA,4DAAI;QACR,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAO;QACX,4DAAM;;QAjGW,0DAAY;QAAZ,4EAAY;QACZ,0DAAa;QAAb,6EAAa;QAKpB,0DAA2B;QAA3B,wFAA2B;QA+C8C,2DAAqC;QAArC,yGAAqC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxD5B;;;;;;;;;;;;;;;ICe9E,gFAA8G;IAC5G,qFACF;IAAA,4DAAY;;;IAYZ,gFAA8G;IAC5G,qFACF;IAAA,4DAAY;;;IACZ,gFAAuE;IACrE,2GACF;IAAA,4DAAY;;;IAWV,4EAAoD;IAChD,oGACJ;IAAA,4DAAY;;;IAsCV,gFAGI;IACF,oFACF;IAAA,4DAAY;;;IAiBZ,gFAGI;IACF,qFACF;IAAA,4DAAY;;;;;ADpGvB,MAAM,oBAAoB;IAU/B,YAAoB,WAAwB,EACnC,MAAc,EAAU,aAA4B,EACnD,YAAsC,EAAS,MAAiB,EAChE,aAA4B;IACpC,6CAA6C;IACtC,SAA6C,EAC5C,gBAAkC;QANxB,gBAAW,GAAX,WAAW,CAAa;QACnC,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QACnD,iBAAY,GAAZ,YAAY,CAA0B;QAAS,WAAM,GAAN,MAAM,CAAW;QAChE,kBAAa,GAAb,aAAa,CAAe;QAE7B,cAAS,GAAT,SAAS,CAAoC;QAC5C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAdrC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAE7D,cAAS,GAAY,KAAK,CAAC;QAElC,UAAK,GAAa,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAE,8CAA8C;QAElG,uBAAkB,GAAa,EAAE,CAAC;QAUhC,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;IAC1B,CAAC;IAED,QAAQ;QACN,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBAC1C,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,WAAW,EAAE,CAAC,IAAI,CAAC;gBACnB,SAAS,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACtC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,0DAAc,CAAC,CAAC,CAAC,EAAE,0DAAc,CAAC,GAAG,CAAC,CAAC,CAAC;gBACpE,iBAAiB,EAAE,CAAC,IAAI,CAAC;gBACzB,UAAU,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACvC,WAAW,EAAE,CAAC,IAAI,CAAC;aACpB,CAAC;SACH;QAAC,OAAO,KAAK,EAAE;YACZ,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,KAAK;aACf,CAAC;SACL;IACH,CAAC;IAED,IAAI,CAAC;QACH,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;IACrC,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACzE,IAAI,GAAG,CAAC,OAAO,EAAE;gBACf,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;oBAC5B,WAAW,EAAE,GAAG,CAAC,IAAI;iBACtB,CAAC;aACH;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBACI;gBACH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC;IACJ,CAAC;IAED,UAAU,CAAC,KAAK;QACd,MAAM,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;QAC7D,IAAI,QAAQ,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,EAAE,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE;YACrD,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,iBAAiB,CAAC,KAAK;QACrB,IAAI,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;QAC3D,IAAI,QAAQ,IAAI,EAAE,IAAI,QAAQ,GAAG,EAAE;eAC9B,CAAC,QAAQ,GAAG,EAAE,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE;YACrC,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;QAC/B,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,2BAA2B;aACrC,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;aAAM;YACL,MAAM,IAAI,GAAG;gBACX,YAAY,EAAE;oBACV,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,EAAE;oBACjE,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;oBACnD,qBAAqB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB;oBAClE,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS;oBAChD,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU;oBAC/C,UAAU,EAAE,IAAI;oBAChB,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;oBACnD,qBAAqB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,iBAAiB;oBACjE,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;iBACtD;aACF;YACD,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAE,GAAG,CAAC,EAAE;gBACxE,IAAG,GAAG,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE;oBACpC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,+BAA+B;qBACzC,CAAC,CAAC;iBACJ;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,cAAc,CAAC,QAAQ;QACrB,8DAA8D;QAC9D,IAAG,QAAQ,KAAK,WAAW,EAAE;YAC3B,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;YAC/D,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,EAAE;gBACjC,4CAA4C;gBAC5C,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;aAC1D;SACF;aAAM,IAAG,QAAQ,KAAK,YAAY,EAAE;YACnC,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;YAChE,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,EAAE;gBACjC,4CAA4C;gBAC5C,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;aAC3D;SACF;IACH,CAAC;IAED,gBAAgB;QACd,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;QAC7D,6CAA6C;QAC7C,IAAI,UAAU,EAAE;YACZ,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC;YACrC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,yDAAyD;YACjG,OAAO,OAAO,CAAC;SAClB;QACD,OAAO,IAAI,CAAC,CAAC,6DAA6D;IAC5E,CAAC;;wFAvJU,oBAAoB;kHAApB,oBAAoB;QCdjC,yEAA+B;QAC3B,wEAA2F;QAAA,yEAAc;QAAA,4DAAK;QAE9G,yEAA+B;QAC3B,4EAA4F;QAAnB,4IAAS,YAAQ,IAAC;QAAC,iEAAM;QAAA,4DAAS;QAC3G,4EAAmE;QAAnB,4IAAS,YAAQ,IAAC;QAAC,+DAAI;QAAA,4DAAS;QACpF,4DAAM;QACV,4DAAM;QAEN,yEAAwB;QACpB,0EAAkC;QAC9B,0EAAsB;QAClB,0EAA2E;QACzE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAgE;QAC9D,wEAAgG;QAClG,4DAAiB;QACjB,+HAEY;QACd,4DAAM;QACN,0EAA2E;QACzE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAgE;QAC9D,wEAAgJ;QAChJ,4EAAgB;QACd,yEAAmG;QAAxD,wIAAS,oBAAgB,IAAC;QACnE,oEAA+B;QACjC,4DAAI;QACN,4DAAO;QACT,4DAAiB;QACjB,+HAEY;QACZ,+HAEY;QACd,4DAAM;QACV,4DAAM;QAEN,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,+EAAmB;QAAA,4DAAQ;QACrD,sFAAgE;QAC5D,6EAAqI;QAAhC,wJAAY,sBAAkB,IAAC;QAApI,4DAAqI;QACrI,4EAAkC;QAAA,6DAAC;QAAA,4DAAO;QAC9C,4DAAiB;QACjB,+HAEY;QAChB,4DAAM;QAEN,0EAA4E;QACxE,4EAA0B;QAAA,yEAAa;QAAA,4DAAQ;QAC/C,sFAAgE;QAC5D,6EAAqI;QAAhC,wJAAY,sBAAkB,IAAC;QAApI,4DAAqI;QACrI,4EAAkC;QAAA,wEAAO;QAAA,4DAAO;QACpD,4DAAiB;QACrB,4DAAM;QAEV,4DAAM;QAEN,0EAAsB;QACpB,4EAA0B;QAAA,wEAAY;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QACnF,sFAAgE;QAC9D,gFAAuH;QACvH;QAAA,4DAAW;QACb,4DAAiB;QACnB,4DAAM;QAEN,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,sEAAU;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QACjF,sFAAwF;QACpF,6EAQ6C;QAAxC,4IAAS,mBAAe,WAAW,CAAC,IAAC;QAR1C,4DAQ6C;QAC7C,wEAAM;QACJ,gFAA+B;QAAA,sEAAU;QAAA,4DAAW;QACtD,4DAAO;QACT,4DAAiB;QACjB,+HAKY;QAClB,4DAAM;QAEN,0EAA4E;QACxE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAwF;QACpF,6EAM8C;QAAzC,4IAAS,mBAAe,YAAY,CAAC,IAAC;QAN3C,4DAM8C;QAC9C,wEAAM;QACJ,gFAA+B;QAAA,sEAAU;QAAA,4DAAW;QACtD,4DAAO;QACT,4DAAiB;QACjB,+HAKY;QAClB,4DAAM;QAEV,4DAAM;QAEN,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,uEAAW;QAAA,4DAAQ;QAC7C,sFAAgE;QAC5D,6EAAsH;QAAhC,wJAAY,sBAAkB,IAAC;QAArH,4DAAsH;QAC1H,4DAAiB;QAIrB,4DAAM;QAEV,4DAAM;QAEV,4DAAO;QACX,4DAAM;;QA3HI,0DAA2B;QAA3B,wFAA2B;QAOS,0DAA4E;QAA5E,+LAA4E;QAc5E,2DAA4E;QAA5E,+LAA4E;QAG5E,0DAAqC;QAArC,8IAAqC;QAavD,0DAAsC;QAAtC,sJAAsC;QA4B/B,2DAIX;QAJW,4IAIX;QAQ0B,0DAG9B;QAH8B,yLAG9B;QAQuD,0DAA8B;QAA9B,2FAA8B;QAWvD,0DAG9B;QAH8B,4LAG9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GyB;AAIiC;AACH;AACF;;;;;;;;;;;ICVzE,0EAAgD;IAC5C,0EAAoB;IAChB,0EAA0C;IACtC,2EAA8B;IAAA,qEAAU;IAAA,4DAAO;IACnD,4DAAM;IACV,4DAAM;IACV,4DAAM;;;;IAiCkC,2EAOhB;IAJoC,8UAEtC,CAAC,yGAEA;IAAC,mEACgB;IAAA,4DAAO;;;IAXX,6EAE8B;IAC1B,+HAQO;IACX,4DAAS;;;IATE,0DAA8C;IAA9C,0HAA8C;;;IAJ7D,uEAA+B;IAC3B,0HAYS;IACb,4DAAO;;;IAbM,0DAA8C;IAA9C,wHAA8C;;;;IAkBnD,2EAOhB;IAJqC,8UAEvC,CAAC,yGAEA;IAAC,qEACgB;IAAA,4DAAO;;;IAXX,6EAE8B;IAC1B,+HAQO;IACX,4DAAS;;;IATE,0DAA8C;IAA9C,0HAA8C;;;IAJ7D,uEAAkC;IAC9B,0HAYS;IACb,4DAAO;;;IAbM,0DAA8C;IAA9C,wHAA8C;;;;;;;IA6BnE,yEAE4E;IACxE,yEAAuD;IACnD,4EAIwB;IADa,mcAA+C;IAHpF,4DAIwB;IAC5B,4DAAK;IACL,yEAAqD;IACjD,uDACJ;IAAA,4DAAK;IAAA,yEAAqD;IACtD,uDACJ;IAAA,4DAAK;IACL,yEAAwD;IACpD,uDACJ;;IAAA,4DAAK;IACL,0EAA6E;IACzE,wDACJ;IAAA,4DAAK;IACL,0EAAuD;IACnD,wDACJ;;;IAAA,4DAAK;IACL,0EAAuD;IACnD,wDACJ;;;IAAA,4DAAK;IACL,0EAAuD;IACnD,wDACJ;IAAA,4DAAK;IACL,0EAAsC;IAClC,2EAAc;IACV,8EACsE;IADxC,0bAAuC;IAEjE,sEAAiC;IACrC,4DAAS;IACb,4DAAM;IACV,4DAAK;IACL,0EAA2E;IACvE,uEAAK;IAMD,8EAAoB;IAChB,4EAEyC;IADrC,4aAA+B;IACM,4DAAO;IACpD,4DAAS;IAET,8EAAoF;IAChF,4EAE+E;IADpD,qcAAoD;IACA,wDAChC;IAAA,4DAAO;IAC1D,4DAAS;IACb,4DAAM;IACV,4DAAK;IAGT,4DAAK;;;;;;IA5DD,qNAAoG;IAGhD,0DAG1D;IAH0D,oLAG1D;IAIU,0DACJ;IADI,0HACJ;IACI,0DACJ;IADI,0HACJ;IAEI,0DACJ;IADI,mRACJ;IAEI,0DACJ;IADI,sLACJ;IAEI,0DACJ;IADI,4QACJ;IAEI,0DACJ;IADI,4QACJ;IAEI,0DACJ;IADI,0HACJ;IAIY,0DAAiE;IAAjE,kLAAiE;IAqBrC,0DAAkD;IAAlD,+GAAkD;IAAC,0DAChC;IADgC,6GAChC;;;IAxDnE,wEAA6D;IACzD,4HA6DK;IACT,qEAAe;;;;IA5DN,0DAAqE;IAArE,mJAAqE;;;IA8DlF,wEAAuC;IACnC,yEAAwB;IACpB,yEAAiB;IACb,qEAE+B;IACnC,4DAAK;IACT,4DAAK;IACT,4DAAQ;;;IAwBA,yEAA0C;IACtC,sGACJ;IAAA,4DAAK;;;IACL,yEAA2C;IACvC,+GACJ;IAAA,4DAAK;;;;IAIL,wEAC2C;IAAvC,iUAAsC;IAAC,oEAAS;IAAA,4DAAI;;;;IACxD,wEAC2C;IAAvC,iUAAsC;IAAC,oEAAS;IAAA,4DAAI;;;IAsBxD,yEAA0C;IACtC,oGACJ;IAAA,4DAAK;;;IACL,yEAA2C;IACvC,6GACJ;IAAA,4DAAK;;;;IAIL,wEACyC;IAArC,+TAAoC;IAAC,kEAAO;IAAA,4DAAI;;;;IACpD,wEACyC;IAArC,+TAAoC;IAAC,kEAAO;IAAA,4DAAI;;;IAgBhD,yEACwD;IACpD,+EACJ;IAAA,4DAAK;;;IACL,yEACwD;IACpD,iFACJ;IAAA,4DAAK;;;IAET,yEAAgD;IAC5C,gGACJ;IAAA,4DAAK;;;IACL,yEAA+C;IAC3C,kGACJ;IAAA,4DAAK;;;;IAIL,wEAC4B;IAD8B,6TAAkC;IAChE,mEAC5B;IAAA,4DAAI;;;;IACJ,wEAC4B;IAD8B,6TAAkC;IAChE,qEAC5B;IAAA,4DAAI;;ADpPrB,MAAM,eAAe;IAyC1B,YAAmB,MAAc,EAAS,MAAiB,EAAU,aAA4B,EACxF,KAAqB,EAAU,gBAAkC,EACjE,YAAsC,EACrC,aAA4B;QAHnB,WAAM,GAAN,MAAM,CAAQ;QAAS,WAAM,GAAN,MAAM,CAAW;QAAU,kBAAa,GAAb,aAAa,CAAe;QACxF,UAAK,GAAL,KAAK,CAAgB;QAAU,qBAAgB,GAAhB,gBAAgB,CAAkB;QACjE,iBAAY,GAAZ,YAAY,CAA0B;QACrC,kBAAa,GAAb,aAAa,CAAe;QA1C9B,kBAAa,GAAG,IAAI,yCAAO,EAAU,CAAC;QAEvC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QACpE,eAAU,GAAU,EAAE,CAAC;QAKhB,kBAAa,GAAW,CAAC,CAAC;QAC1B,kBAAa,GAAW,CAAC,CAAC;QAC1B,aAAQ,GAAW,CAAC,CAAC;QACrB,UAAK,GAAW,CAAC,CAAC;QACzB,oBAAe,GAAU,EAAE,CAAC;QAC5B,mBAAc,GAAU,EAAE,CAAC;QAEpB,qBAAgB,GAAY,KAAK,CAAC;QAClC,qBAAgB,GAAQ,EAAE,CAAC;QAC3B,cAAS,GAAY,KAAK,CAAC;QAC3B,iBAAY,GAAG,EAAE,CAAC;QAClB,kBAAa,GAAG,EAAE,CAAC;QACnB,cAAS,GAAY,KAAK,CAAC;QAC3B,gBAAW,GAAY,KAAK,CAAC;QAE7B,sBAAiB,GAAY,KAAK,CAAC;QAEnC,2BAAsB,GAAY,KAAK,CAAC;QACxC,0BAAqB,GAAY,KAAK,CAAC;QAS9C,uBAAkB,GAAkB,IAAI,CAAC;IAOC,CAAC;IAE3C,QAAQ;QACN,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE;YAC1C,kCAAkC;YAClC,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,aAAa;aACzC,IAAI,CAAC,4DAAY,CAAC,GAAG,CAAC,EACrB,oEAAoB,EAAE,EACtB,mDAAG,CAAC,GAAG,EAAE;YACP,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,iDAAiD;QAC1E,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YACxB,mCAAmC;YACnC,IAAI,SAAS,CAAC,MAAM,IAAI,CAAC,EAAE;gBACzB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;aACrC;iBAAM,IAAI,SAAS,KAAK,EAAE,EAAE;gBAC1B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,+DAA+D;gBACxF,IAAI,CAAC,aAAa,EAAE;aACrB;iBAAM;gBACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,+DAA+D;aACxF;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAEH,8CAA8C;IAC9C,wCAAwC;IACxC,4DAA4D;IAC5D,uEAAuE;IACvE,oCAAoC;IACpC,MAAM;IACN,IAAI;IAEJ,aAAa;QACX,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACxE,IAAG,GAAG,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC3B,6CAA6C;gBAC7C,sCAAsC;gBACtC,wCAAwC;aACzC;QACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBACI;gBACH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QAEH,CAAC,CAAC;IACJ,CAAC;IAED,iBAAiB,CAAC,WAAmB,EAAE,SAAkB;QACvD,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;IAED,sBAAsB;QACpB,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,gBAAgB,CAAC,2BAA2B,CAAC,EAAC,IAAI,EAAE,EAAE,mBAAmB,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBACrJ,IAAI,GAAG,CAAC,OAAO,EAAE;oBACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,sCAAsC;qBAChD,CAAC,CAAC;oBAEH,IAAI,CAAC,aAAa,EAAE,CAAC;iBACtB;YACH,CAAC,CAAC;SACH;aACI;YACH,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,EAAC,IAAI,EAAE,EAAE,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBAChJ,IAAI,GAAG,CAAC,OAAO,EAAE;oBACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,oCAAoC;qBAC9C,CAAC,CAAC;oBACH,IAAI,CAAC,aAAa,EAAE,CAAC;iBACtB;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,mBAAmB,CAAC,CAAC,EAAE,OAAO;QAC5B,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE;YACpB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC5C;aAAM;YACL,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBAChB,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACxC;SACF;QAED,8CAA8C;QAC9C,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAE7B,6EAA6E;QAC7E,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACrC,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YAChE,IAAI,KAAK,EAAE;gBACT,IAAI,KAAK,CAAC,SAAS,EAAE;oBACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACrC;qBAAM;oBACL,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACvC;aACF;QACH,CAAC,CAAC;QAEF,iDAAiD;QACjD,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YACvD,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YAChE,OAAO,KAAK,IAAI,KAAK,CAAC,SAAS,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,mDAAmD;QACnD,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YACzD,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YAChE,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,sCAAsC;QACtC,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1E,0CAA0C;YAC1C,KAAK,CAAC,yDAAyD,CAAC,CAAC;YACjE,uDAAuD;YACvD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,6CAA6C;YAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC;YACvE,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC9B,MAAM,YAAY,GAAG,QAA4B,CAAC;gBAClD,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;SAEJ;aAAM,IAAI,WAAW,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACxB,wBAAwB;YACxB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;aAAM,IAAI,aAAa,EAAE;YACxB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC1B,sBAAsB;YACtB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;SAClC;aAAM;YACL,qGAAqG;YACrG,KAAK,CAAC,yDAAyD,CAAC,CAAC;YACjE,uDAAuD;YACvD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YAEjC,6CAA6C;YAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC;YACvE,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC9B,MAAM,YAAY,GAAG,QAA4B,CAAC;gBAClD,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;SACJ;IAEH,CAAC;IAED,kBAAkB,CAAC,WAAW;QAC5B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;IAED,cAAc,CAAC,MAAM;QACnB,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;QACxC,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC7D;aAAM;YACL,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK;SACjC;QACD,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,0CAA0C;QAExE,IAAI,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;QACvC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YAC/C,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE;gBACb,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;oBAC1B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;oBAC9B,OAAO,IAAI,CAAC,EAAE,CAAC;iBAChB;qBACI;oBACH,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;iBACxB;aACF;QACH,CAAC,CAAC;QACF,8CAA8C;QAC9C,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAE7B,6EAA6E;QAC7E,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACrC,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YAChE,IAAI,KAAK,EAAE;gBACT,IAAI,KAAK,CAAC,SAAS,EAAE;oBACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACrC;qBAAM;oBACL,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACvC;aACF;YAED,iDAAiD;YACjD,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;gBACvD,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;gBAChE,OAAO,KAAK,IAAI,KAAK,CAAC,SAAS,CAAC;YAClC,CAAC,CAAC,CAAC;YACH,mDAAmD;YACnD,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;gBACzD,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;gBAChE,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACnC,CAAC,CAAC,CAAC;YAEH,IAAI,WAAW,EAAE;gBACf,wBAAwB;gBACxB,IAAI,CAAC,mBAAmB,GAAG,IAAI;gBAC/B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;aAC/B;iBAAM,IAAI,aAAa,EAAE;gBACxB,sBAAsB;gBACtB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAC7B,IAAI,CAAC,mBAAmB,GAAG,KAAK;aACjC;iBAAM;gBACL,qGAAqG;aACtG;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1E,KAAK,CAAC,wDAAwD,CAAC,CAAC;YAChE,uDAAuD;YACvD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,6CAA6C;YAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC;YACvE,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC9B,MAAM,YAAY,GAAG,QAA4B,CAAC;gBAClD,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;YAEH,+CAA+C;YAC/C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,wDAAwD;aAClE,CAAC;YACF,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;SAC3E;IACH,CAAC;IAED,aAAa,CAAC,WAAW;QACvB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;IAED,wBAAwB;QACtB,IAAI,IAAI,CAAC,aAAa,KAAK,CAAC,EAAE;YAC5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;SACzC;aACI;YACH,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE;gBACxC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;aAC7C;SACF;QACD,MAAM,WAAW,GAAG;YAClB,iBAAiB,EAAE,IAAI,CAAC,eAAe;SACxC,CAAC;QAEF,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,MAAW,EAAE,EAAE;YACtH,IAAI,MAAM,CAAC,OAAO,EAAE;gBAClB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE,oCAAoC;iBAC9C,CAAC,CAAC;gBAEH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK;gBAChC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,CAAC,8CAA8C;gBACzE,IAAI,CAAC,WAAW,GAAG,KAAK,EAAC,yCAAyC;aACnE;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oBAAoB;QAClB,OAAO,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;IAC5C,CAAC;IAED,0BAA0B;QACxB,MAAM,WAAW,GAAG;YAClB,mBAAmB,EAAE,IAAI,CAAC,eAAe;SAC1C,CAAC;QACF,IAAI,CAAC,gBAAgB,CAAC,2BAA2B,CAAC,EAAC,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAW,EAAE,EAAE;YACvH,IAAI,MAAM,CAAC,OAAO,EAAE;gBAClB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE,sCAAsC;iBAChD,CAAC,CAAC;gBACH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK;gBAChC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,CAAC,iDAAiD;gBAC5E,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,yCAAyC;aACpE;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,YAAY,CAAC,SAAiB;QAC5B,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gBAC3B,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aACxB;iBAAM;gBACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBAC9C,OAAO,CACL,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;wBACtF,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC,CACvF,CAAC;gBACJ,CAAC,CAAC,CAAC;gBACH,IAAG,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAC;oBAC9B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,SAAS,GAAG,eAAe;qBACrC,CAAC,CAAC;iBACJ;aACF;YACH,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,kDAAkD;QAC1E,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAGD,mBAAmB,CAAC,SAAiB;QACnC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,2CAA2C;QAC3C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED,iBAAiB,CAAC,CAAC;QACjB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACzC,MAAM,OAAO,GAAG,gBAAgB,CAAC,CAAC,+CAA+C;QACjF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE;YAC5C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,8CAA8C;aACxD,CAAC,CAAC;YACH,OAAO;SACR;QACD,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;YAC9B,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC;YAC1C,sFAAsF;YACtF,iCAAiC;YACjC,wBAAwB;YACxB,8CAA8C;YAC9C,QAAQ;YACR,0BAA0B;YAC1B,gBAAgB;YAChB,4BAA4B;YAC5B,mCAAmC;YACnC,wBAAwB;YACxB,wEAAwE;YACxE,UAAU;YACV,MAAM;YACN,uEAAuE;YACvE,mCAAmC;YACnC,wBAAwB;YACxB,wDAAwD;YACxD,UAAU;YACV,MAAM;YACN,WAAW;YACX,mCAAmC;YACnC,wBAAwB;YACxB,0CAA0C;YAC1C,UAAU;YACV,MAAM;YACN,MAAM;SACP;IACH,CAAC;IAED,WAAW;QACT,IAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,WAAW,EAAE;YACf,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,OAAO,EAAE;gBAClC,IAAI,EAAE,MAAM;gBACZ,OAAO,EAAE,KAAK;gBACd,UAAU,EAAE,IAAI;aACjB,CAAC,CAAC;YACH,WAAW,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,0BAA0B;aACpC,CAAC,CAAC;SACJ;IACH,CAAC;IAEM,UAAU,CAAC,CAAM;QACtB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,SAAS,CAAC;QACjC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;QAE3B,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YAC9B,+BAA+B;YAC/B,qCAAqC;YACrC,4CAA4C;YAC5C,WAAW;YACT,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,aAAa,EAAE,CAAC;YACvB,IAAI;SACL;IACH,CAAC;IAED,YAAY;QACV,MAAM,SAAS,GAAuC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,sFAAoB,EAAE;YAC3F,KAAK,EAAE,OAAO;YACd,MAAM,EAAE,OAAO;YACf,IAAI,EAAE,EAAE;YACR,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE;gBACR,KAAK,EAAE,GAAG;aACX;SACF,CAAC,CAAC;QACH,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qCAAqC;IACrC,6HAA6H;IAC7H,qBAAqB;IACrB,sBAAsB;IACtB,yCAAyC;IACzC,0BAA0B;IAC1B,QAAQ;IACR,oDAAoD;IACpD,+CAA+C;IAC/C,QAAQ;IACR,IAAI;IAEJ,eAAe,CAAC,UAAU;QACxB,MAAM,SAAS,GAAsC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,mFAAmB,EAAE;YACzF,KAAK,EAAE,OAAO;YACd,MAAM,EAAE,OAAO;YACf,IAAI,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE;YAChC,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE;gBACR,KAAK,EAAE,GAAG;aACX;SACF,CAAC,CAAC;QAEH,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,UAAU,EAAE,QAAQ;QAC3B,MAAM,SAAS,GAAG,CAAC,QAAQ,CAAC,CAAC,6BAA6B;QAC1D,MAAM,IAAI,GAAG;YACX,QAAQ,EAAE,UAAU,CAAC,EAAE;YACvB,UAAU,EAAE;gBACR,WAAW,EAAE,UAAU,CAAC,WAAW;gBACnC,WAAW,EAAE,UAAU,CAAC,WAAW;gBACnC,mBAAmB,EAAE,UAAU,CAAC,mBAAmB;gBACnD,UAAU,EAAE,UAAU,CAAC,UAAU;gBACjC,QAAQ,EAAE,UAAU,CAAC,QAAQ;gBAC7B,UAAU,EAAE,SAAS;gBACrB,WAAW,EAAE,UAAU,CAAC,WAAW;gBACnC,mBAAmB,EAAE,UAAU,CAAC,mBAAmB;aACtD;SACF;QACD,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;aAC1D,IAAI,CAAE,GAAG,CAAC,EAAE;YACX,IAAI,GAAG,CAAC,OAAO,EAAE;gBACf,IAAI,SAAS,EAAE;oBACb,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,8BAA8B;qBACxC,CAAC,CAAC;oBACH,IAAI,CAAC,aAAa,EAAE;iBACrB;qBAAM;oBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,gCAAgC;qBAC1C,CAAC,CAAC;oBACH,IAAI,CAAC,aAAa,EAAE;iBACrB;aACF;QACH,CAAC,EAAC,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;gBAC1B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,mBAAmB;iBAC7B,CAAC;aACL;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC;aACH;QACL,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;aACjE,CAAC;QACJ,CAAC,CAAC,CAAC;IACP,CAAC;IAED,0CAA0C;IAC1C,gBAAgB,CAAC,WAA0B;QACzC,IAAG,WAAW,KAAK,KAAK,EAAE;YACxB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;SAChC;aAAM;YACL,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC;SACvC;IACH,CAAC;IAED,YAAY;QACV,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC;IAC/C,CAAC;IAED,aAAa;QACX,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IAC/B,CAAC;;8EAlnBU,eAAe;6GAAf,eAAe;;;;;;QCjB5B,2GAMM;QACN,yEAA0C;QACtC,yEAAwD;QACpD,yEAAiC;QAC7B,2EACyD;QAArD,4IAAS,4CAAwC,IAAC;QADtD,4DACyD;QAC7D,4DAAM;QACN,yEAAuD;QACnD,4EAAkG;QAAzB,uIAAS,kBAAc,IAAC;QAC7F,kEAAiC;QAAA,qFACrC;QAAA,4DAAS;QACb,4DAAM;QACV,4DAAM;QAEN,yEAA8C;QAC1C,0EAAkD;QAC9C,6EAAsC;QAClC,yEAAO;QACH,sEAAI;QACA,0EAIR;QACY,6EAGgB;QAHgC,+IAAU,0BAAsB,IAAC;QAAjF,4DAGgB;QAChB,2EAAuC;QACnC,gHAcO;QACP,gHAcO;QACX,4DAAM;QACV,4DAAK;QACL,0EAAwB;QAAA,uEAAW;QAAA,4DAAK;QACxC,0EAAwB;QAAA,uEAAW;QAAA,4DAAK;QACxC,0EAAwB;QAAA,+EAAmB;QAAA,4DAAK;QAChD,0EAAmD;QAAA,mFAAuB;QAAA,4DAAK;QAC/E,0EAAwB;QAAA,sEAAU;QAAA,4DAAK;QACvC,0EAAwB;QAAA,uEAAW;QAAA,4DAAK;QACxC,0EAAwB;QAAA,sEAAU;QAAA,4DAAK;QACvC,qEAA6B;QAC7B,qEAA6B;QACjC,4DAAK;QACT,4DAAQ;QACR,yEAAO;QACH,gIA+De;QACnB,4DAAQ;QACR,kHAQQ;QACZ,4DAAQ;QAKZ,4DAAM;QAGN,2EAAuG;QACnG,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,0EAC+B;QAC3B,oEAAmD;QAAC,mFAExD;QAAA,4DAAK;QACT,4DAAM;QACN,4GAEK;QACL,4GAEK;QACT,4DAAM;QACN,2EAAiD;QAC7C,yEAA2D;QAAA,iEAAK;QAAA,4DAAI;QACpE,0GACwD;QACxD,0GACwD;QAC5D,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGN,2EAAqG;QACjG,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,0EAC+B;QAC3B,oEAAiD;QAAC,iFAEtD;QAAA,4DAAK;QACT,4DAAM;QACN,4GAEK;QACL,4GAEK;QACT,4DAAM;QACN,2EAAiD;QAC7C,yEAA2D;QAAA,iEAAK;QAAA,4DAAI;QACpE,0GACoD;QACpD,0GACoD;QACxD,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGN,2EAA8F;QAC1F,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,4GAGK;QACL,4GAGK;QACT,4DAAM;QACN,4GAEK;QACL,4GAEK;QACT,4DAAM;QACN,2EAAiD;QAC7C,yEAA2D;QAAA,iEAAK;QAAA,4DAAI;QACpE,0GAEI;QACJ,0GAEI;QACR,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGN,2EAA+F;QAC3F,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,0EACwD;QACpD,2EACJ;QAAA,4DAAK;QACT,4DAAM;QACN,qEACK;QACT,4DAAM;QACN,2EAAiD;QAC7C,yEAA2D;QAAA,kEAAK;QAAA,4DAAI;QACpE,0EAC4B;QAAA,kEAC5B;QAAA,4DAAI;QACR,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;;QAvSA,+EAAe;QA+BW,2DAAY;QAAZ,qEAAY;QAIL,0DAAsB;QAAtB,sFAAsB;QAetB,0DAAyB;QAAzB,yFAAyB;QA6Bb,2DAAe;QAAf,mFAAe;QAiE1C,0DAA6B;QAA7B,6FAA6B;QAgCxB,2DAAe;QAAf,+EAAe;QAGf,0DAAgB;QAAhB,gFAAgB;QAMjB,0DAAe;QAAf,+EAAe;QAEf,0DAAgB;QAAhB,gFAAgB;QAuBf,2DAAe;QAAf,+EAAe;QAGf,0DAAgB;QAAhB,gFAAgB;QAMjB,0DAAe;QAAf,+EAAe;QAEf,0DAAgB;QAAhB,gFAAgB;QAiBX,0DAAqB;QAArB,qFAAqB;QAIrB,0DAAoB;QAApB,oFAAoB;QAKJ,0DAAqB;QAArB,qFAAqB;QAGrB,0DAAoB;QAApB,oFAAoB;QAMV,0DAAqB;QAArB,qFAAqB;QAGpD,0DAAoB;QAApB,oFAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjQS;AAC2B;AAEnD;;;;;;;;;;;;;;;ICYnB,gFAA8G;IAC5G,qFACF;IAAA,4DAAY;;;IAYZ,gFAA8G;IAC5G,qFACF;IAAA,4DAAY;;;IACZ,gFAAuE;IACrE,2GACF;IAAA,4DAAY;;;IAWV,4EAAoD;IAChD,oGACJ;IAAA,4DAAY;;;IAsCV,gFAGI;IACF,oFACF;IAAA,4DAAY;;;IAiBZ,gFAGI;IACF,qFACF;IAAA,4DAAY;;;;;ADnGvB,MAAM,mBAAmB;IAiB9B,YAAmB,MAAc,EAAU,aAA4B,EAC7D,YAAsC,EAAS,MAAiB,EAChE,aAA4B,EAAU,WAAwB,EACtC,IAAS,EAClC,SAA4C,EAC3C,gBAAkC;QALzB,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QAC7D,iBAAY,GAAZ,YAAY,CAA0B;QAAS,WAAM,GAAN,MAAM,CAAW;QAChE,kBAAa,GAAb,aAAa,CAAe;QAAU,gBAAW,GAAX,WAAW,CAAa;QACtC,SAAI,GAAJ,IAAI,CAAK;QAClC,cAAS,GAAT,SAAS,CAAmC;QAC3C,qBAAgB,GAAhB,gBAAgB,CAAkB;QApBrC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAC7D,cAAS,GAAY,KAAK,CAAC;QAQlC,uBAAkB,GAAa,EAAE,CAAC;QAClC,2BAAsB,GAAa,EAAE,CAAC;QACtC,UAAK,GAAa,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAG,6CAA6C;QAClG,mBAAc,GAAU,EAAE,CAAC;QASvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;IACzC,CAAC;IAEH,QAAQ;QACN,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBAC1C,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,WAAW,EAAE,CAAC,IAAI,CAAC;gBACnB,SAAS,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACtC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,0DAAc,CAAC,CAAC,CAAC,EAAE,0DAAc,CAAC,GAAG,CAAC,CAAC,CAAC;gBACpE,iBAAiB,EAAE,CAAC,IAAI,CAAC;gBACzB,UAAU,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACvC,WAAW,EAAE,CAAC,IAAI,CAAC;aACpB,CAAC;YACF,IAAI,CAAC,aAAa,EAAE;SAErB;QAAC,OAAO,KAAK,EAAE;YACZ,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,KAAK;aACf,CAAC;SACL;IACH,CAAC;IAED,IAAI,CAAC;QACH,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;IACrC,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACzE,IAAI,GAAG,CAAC,OAAO,EAAE;gBACf,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;oBAC5B,WAAW,EAAE,GAAG,CAAC,IAAI;iBACtB,CAAC;aACH;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBACI;gBACH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC;IACJ,CAAC;IAED,aAAa;;QACX,6DAA6D;QAC7D,sBAAsB;QACtB,qCAAqC;QACjC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;YAC5B,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW;YACxC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW;YACxC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW;YACxC,kBAAkB,EAAE,UAAI,CAAC,UAAU,0CAAE,mBAAmB;YACxD,iBAAiB,EAAE,UAAI,CAAC,UAAU,0CAAE,mBAAmB;YACvD,WAAW,EAAE,UAAI,CAAC,UAAU,0CAAE,WAAW;YACzC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,mCAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,mCAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC9I,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,mCAAM,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,mCAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;SAClJ,CAAC;QACN,4FAA4F;QAC5F,+CAA+C;QAC/C,mDAAmD;QAEnD,2EAA2E;QAC3E,mDAAmD;QACnD,iDAAiD;QACjD,QAAQ;QAER,MAAM;QACN,iBAAiB;QACjB,sCAAsC;QACtC,uCAAuC;QACvC,4BAA4B;QAC5B,yCAAyC;QACzC,aAAa;QACb,eAAe;QACf,qCAAqC;QACrC,0BAA0B;QAC1B,yEAAyE;QACzE,WAAW;QACX,QAAQ;QACR,QAAQ;IACV,CAAC;IAGD,UAAU,CAAC,KAAK;QACd,MAAM,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;QAC7D,IAAI,QAAQ,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,EAAE,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE;YACrD,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;QAC/B,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,2BAA2B;aACrC,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;aAAM;YACL,MAAM,IAAI,GAAG;gBACX,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,EAAE;gBAC5B,UAAU,EAAE;oBACR,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,EAAE;oBAC/D,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;oBACjD,mBAAmB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB;oBAChE,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS;oBAC9C,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU;oBAC7C,oBAAoB;oBACpB,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;oBACjD,mBAAmB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,iBAAiB;oBAC/D,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;iBACpD;aACF;YACD,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC1D,IAAI,CAAE,GAAG,CAAC,EAAE;gBACX,IAAG,GAAG,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBACvB,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE;oBACpC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,gCAAgC;qBAC1C,CAAC,CAAC;iBACJ;YACH,CAAC,EAAC,CAAC,GAAG,EAAE,EAAE;gBACN,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;oBAC1B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,mBAAmB;qBAC7B,CAAC;iBACL;qBAAM;oBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;qBAC/D,CAAC;iBACH;YACL,CAAC,CAAC,CAAC;SACN;IACH,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;IAED,cAAc,CAAC,QAAQ;QACrB,8DAA8D;QAC9D,IAAG,QAAQ,KAAK,WAAW,EAAE;YAC3B,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;YAC/D,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,EAAE;gBACjC,4CAA4C;gBAC5C,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;aAC1D;SACF;aAAM,IAAG,QAAQ,KAAK,YAAY,EAAE;YACnC,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;YAChE,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,EAAE;gBACjC,4CAA4C;gBAC5C,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;aAC3D;SACF;IACH,CAAC;IAED,gBAAgB;QACd,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;QAC7D,6CAA6C;QAC7C,IAAI,UAAU,EAAE;YACZ,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC;YACrC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,yDAAyD;YACjG,OAAO,OAAO,CAAC;SAClB;QACD,OAAO,IAAI,CAAC,CAAC,6DAA6D;IAC5E,CAAC;;sFA3MU,mBAAmB,42BAoBpB,qEAAe;iHApBd,mBAAmB;QCfhC,yEAA+B;QAC3B,wEAA2F;QAAA,yEAAc;QAAA,4DAAK;QAE9G,yEAA+B;QAC3B,4EAA4F;QAAnB,2IAAS,YAAQ,IAAC;QAAC,iEAAM;QAAA,4DAAS;QAC3G,4EAAmE;QAAnB,2IAAS,YAAQ,IAAC;QAAC,+DAAI;QAAA,4DAAS;QACpF,4DAAM;QACV,4DAAM;QAEN,yEAAwB;QACpB,0EAAkC;QAC9B,0EAAsB;QAClB,0EAA2E;QACzE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAgE;QAC9D,wEAAgG;QAClG,4DAAiB;QACjB,8HAEY;QACd,4DAAM;QACN,0EAA2E;QACzE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAgE;QAC9D,wEAA+I;QAC/I,4EAAgB;QACd,yEAAmG;QAAxD,uIAAS,oBAAgB,IAAC;QACnE,oEAA+B;QACjC,4DAAI;QACN,4DAAO;QACT,4DAAiB;QACjB,8HAEY;QACZ,8HAEY;QACd,4DAAM;QACV,4DAAM;QAEN,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,+EAAmB;QAAA,4DAAQ;QACrD,sFAAgE;QAC5D,6EAAqI;QAAhC,uJAAY,sBAAkB,IAAC;QAApI,4DAAqI;QACrI,4EAAkC;QAAA,6DAAC;QAAA,4DAAO;QAC9C,4DAAiB;QACjB,8HAEY;QAChB,4DAAM;QAEN,0EAA4E;QACxE,4EAA0B;QAAA,yEAAa;QAAA,4DAAQ;QAC/C,sFAAgE;QAC5D,6EAAqI;QAAhC,uJAAY,sBAAkB,IAAC;QAApI,4DAAqI;QACrI,4EAAkC;QAAA,wEAAO;QAAA,4DAAO;QACpD,4DAAiB;QACrB,4DAAM;QAEV,4DAAM;QAEN,0EAAsB;QACpB,4EAA0B;QAAA,wEAAY;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QACnF,sFAAgE;QAC9D,gFAAuH;QACvH;QAAA,4DAAW;QACb,4DAAiB;QACnB,4DAAM;QAEN,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,sEAAU;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QACjF,sFAAwF;QACpF,6EAQ6C;QAAxC,2IAAS,mBAAe,WAAW,CAAC,IAAC;QAR1C,4DAQ6C;QAC7C,wEAAM;QACJ,gFAA+B;QAAA,sEAAU;QAAA,4DAAW;QACtD,4DAAO;QACT,4DAAiB;QACjB,8HAKY;QAClB,4DAAM;QAEN,0EAA4E;QACxE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAwF;QACpF,6EAM8C;QAAzC,2IAAS,mBAAe,YAAY,CAAC,IAAC;QAN3C,4DAM8C;QAC9C,wEAAM;QACJ,gFAA+B;QAAA,sEAAU;QAAA,4DAAW;QACtD,4DAAO;QACT,4DAAiB;QACjB,8HAKY;QAClB,4DAAM;QAEV,4DAAM;QAEN,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,uEAAW;QAAA,4DAAQ;QAC7C,sFAAgE;QAC5D,6EAAsH;QAAhC,uJAAY,sBAAkB,IAAC;QAArH,4DAAsH;QAC1H,4DAAiB;QAIrB,4DAAM;QAEV,4DAAM;QAEV,4DAAO;QACX,4DAAM;;QA3HI,0DAA2B;QAA3B,wFAA2B;QAOS,0DAA4E;QAA5E,+LAA4E;QAc5E,2DAA4E;QAA5E,+LAA4E;QAG5E,0DAAqC;QAArC,8IAAqC;QAavD,0DAAsC;QAAtC,sJAAsC;QA4B/B,2DAIX;QAJW,4IAIX;QAQ0B,0DAG9B;QAH8B,yLAG9B;QAQuD,0DAA8B;QAA9B,2FAA8B;QAWvD,0DAG9B;QAH8B,4LAG9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9GwH;AACxD;;;;;;;;;;;;;;ICcpE,gFAA4G;IACxG,qFACJ;IAAA,4DAAY;;;IAOR,iFAAsD;IACpD,uDACF;IAAA,4DAAa;;;IAF0B,0EAAc;IACnD,0DACF;IADE,mFACF;;;IAGJ,gFAAgG;IAC9F,qFACF;IAAA,4DAAY;;;IAWZ,4EAAoD;IAChD,oGACJ;IAAA,4DAAY;;;IAYhB,0EAAwF;IACpF,kIACJ;IAAA,4DAAM;;;;IAvBV,yEAA2D;IACvD,yEAA4E;IACxE,2EAA0B;IAAA,8EAAmB;IAAA,4DAAQ;IACrD,qFAAgE;IAC5D,4EAAqI;IAAhC,gVAA+B;IAApI,4DAAqI;IACrI,2EAAkC;IAAA,4DAAC;IAAA,4DAAO;IAC9C,4DAAiB;IACjB,sIAEY;IAChB,4DAAM;IAEN,yEAA4E;IACxE,4EAA0B;IAAA,2EAAe;IAAA,4DAAQ;IACjD,sFAAgE;IAC5D,6EAA8H;IAAhC,iVAA+B;IAA7H,4DAA8H;IAC9H,4EAAkC;IAAA,wEAAO;IAAA,4DAAO;IACpD,4DAAiB;IACrB,4DAAM;IAGN,4HAEM;IACV,4DAAM;;;IAjBc,0DAAsC;IAAtC,4JAAsC;IAchD,0DAA4D;IAA5D,sIAA4D;;;IAuBlE,0EAAwF;IACpF,0GACJ;IAAA,4DAAM;;;;IApBV,yEAAsD;IAClD,yEAA4E;IACxE,2EAA0B;IAAA,8EAAmB;IAAA,2EAA6B;IAAA,4DAAC;IAAA,4DAAO;IAAA,4DAAQ;IAC1F,qFAAgE;IAC5D,2EAAkC;IAAA,uEAAO;IAAA,4DAAO;IAChD,4EAA8H;IAAhC,gVAA+B;IAA7H,4DAA8H;IAClI,4DAAiB;IACrB,4DAAM;IAEN,0EAA4E;IACxE,4EAA0B;IAAA,2EAAe;IAAA,4EAA6B;IAAA,6DAAC;IAAA,4DAAO;IAAA,4DAAQ;IACtF,sFAAgE;IAC5D,6EAA8H;IAAhC,iVAA+B;IAA7H,4DAA8H;IAC9H,4EAAkC;IAAA,wEAAO;IAAA,4DAAO;IACpD,4DAAiB;IACrB,4DAAM;IAGN,4HAEM;IACV,4DAAM;;;IAHI,2DAA4D;IAA5D,sIAA4D;;;IAW9D,gFAA8G;IAC1G,sFACJ;IAAA,4DAAY;;;IAUZ,gFAA8G;IAC1G,sFACJ;IAAA,4DAAY;;;;IApBpB,yEAAsD;IAClD,yEAA4E;IACxE,2EAA0B;IAAA,uEAAY;IAAA,2EAA6B;IAAA,4DAAC;IAAA,4DAAO;IAAA,4DAAQ;IACnF,qFAAgE;IAC5D,4EAAuH;IAAhC,gVAA+B;IAAtH,4DAAuH;IAC3H,4DAAiB;IACjB,sIAEY;IAChB,4DAAM;IAEN,yEAA4E;IACxE,4EAA0B;IAAA,wEAAY;IAAA,4EAA6B;IAAA,6DAAC;IAAA,4DAAO;IAAA,4DAAQ;IACnF,sFAAgE;IAC5D,2EAAoC;IAChC,6EAAuH;IAAhC,iVAA+B;IAAtH,4DAAuH;IAC3H,4DAAM;IACV,4DAAiB;IACjB,wIAEY;IAChB,4DAAM;IACV,4DAAM;;;IAhBkC,0DAA4E;IAA5E,2MAA4E;IAY5E,0DAA4E;IAA5E,2MAA4E;;;IAYxG,iFAAwE;IACxE,uDACA;IAAA,4DAAa;;;IAFsC,iFAAoB;IACvE,0DACA;IADA,gGACA;;;;IANZ,0EAAmF;IAC/E,2EAA0B;IAAA,mEAAQ;IAAA,2EAA6B;IAAA,4DAAC;IAAA,4DAAO;IAAA,4DAAQ;IAC/E,qFAAgE;IAC5D,iFAAsD;IAA1C,wWAAgC;IACxC,wIAEa;IACjB,4DAAa;IACjB,4DAAiB;IACrB,4DAAM;;;IANc,0DAAgC;IAAhC,8FAAgC;IACR,0DAAiB;IAAjB,0FAAiB;;;IAO7D,0EAAkF;IAC9E,2EAA0B;IAAA,wEAAa;IAAA,2EAA6B;IAAA,4DAAC;IAAA,4DAAO;IAAA,4DAAQ;IACpF,yEAAiB;IAAA,uDAA8B;IAAA,4DAAK;IACxD,4DAAM;;;IADe,0DAA8B;IAA9B,gGAA8B;;AD/GpD,MAAM,sBAAsB;IAgBjC,YAAmB,MAAc,EAAU,aAA4B,EAC7D,YAAsC,EAAS,MAAiB,EAChE,aAA4B,EAAU,WAAwB,EACtC,IAAS,EAClC,SAA+C,EAC9C,gBAAkC;QALzB,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QAC7D,iBAAY,GAAZ,YAAY,CAA0B;QAAS,WAAM,GAAN,MAAM,CAAW;QAChE,kBAAa,GAAb,aAAa,CAAe;QAAU,gBAAW,GAAX,WAAW,CAAa;QACtC,SAAI,GAAJ,IAAI,CAAK;QAClC,cAAS,GAAT,SAAS,CAAsC;QAC9C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAnBrC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAC7D,cAAS,GAAY,KAAK,CAAC;QAOlC,uBAAkB,GAAa,EAAE,CAAC;QAClC,2BAAsB,GAAa,EAAE,CAAC;QACtC,UAAK,GAAa,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAG,6CAA6C;QAClG,mBAAc,GAAU,EAAE,CAAC;QAoH3B,wBAAmB,GAAgB,CAAC,OAAwB,EAA2B,EAAE;YACvF,MAAM,kBAAkB,GAAG,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,KAAK,CAAC;YACnE,MAAM,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC;YAE3D,0EAA0E;YAC1E,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,UAAU,IAAI,CAAC,CAAC,kBAAkB,IAAI,CAAC,cAAc,CAAC,EAAE;gBACxF,OAAO,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC;aAClC;YAED,OAAO,IAAI,CAAC;QACd,CAAC,CAAC;QArHE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;IAC3C,CAAC;IAEH,QAAQ;QACN,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBACxC,UAAU,EAAE,CAAC,IAAI,CAAC;gBAClB,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,WAAW,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;gBACxC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,0DAAc,CAAC,CAAC,CAAC,EAAE,0DAAc,CAAC,GAAG,CAAC,CAAC,CAAC;gBACpE,cAAc,EAAE,CAAC,IAAI,CAAC;gBACtB,UAAU,EAAE,CAAC,IAAI,CAAC;gBAClB,IAAI,EAAE,CAAC,UAAU,EAAE,+DAAmB,CAAC;gBACvC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,EAAI,yCAAyC;aACpF,EACD;gBACE,UAAU,EAAE;oBACR,IAAI,CAAC,mBAAmB;iBAC3B,EAAE,6BAA6B;aACjC,CAAC,CAAC;YACH,IAAI,CAAC,gBAAgB,EAAE;YAEvB,MAAM,yBAAyB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;YAC/E,MAAM,qBAAqB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YAEvE,0DAA0D;YAC1D,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;gBACtD,IAAI;oBACA,IAAI,KAAK,IAAI,CAAC,sBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,QAAQ,GAAE;wBAC3C,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,OAAO,EAAE,CAAC;qBACpC;yBAAM,IAAI,CAAC,KAAK,KAAI,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,QAAQ,GAAE;wBAClD,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,MAAM,EAAE,CAAC;qBACnC;iBACJ;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,kDAAkD,EAAE,KAAK,CAAC,CAAC;iBAC5E;YACL,CAAC,CAAC,CAAC;YAEH,sDAAsD;YACtD,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;gBAClD,IAAI;oBACA,IAAI,KAAK,IAAI,CAAC,0BAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,QAAQ,GAAE;wBAC/C,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,OAAO,EAAE,CAAC;qBACxC;yBAAM,IAAI,CAAC,KAAK,KAAI,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,QAAQ,GAAE;wBACtD,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,MAAM,EAAE,CAAC;qBACvC;iBACJ;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,8CAA8C,EAAE,KAAK,CAAC,CAAC;iBACxE;YACL,CAAC,CAAC,CAAC;YAEH,kGAAkG;YAClG,uDAAuD;YACvD,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAEnD,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,YAAY,CAAC,SAAS,CAAC,CAAC,IAAY,EAAE,EAAE;gBACnD,2DAA2D;gBAC3D,IAAI,IAAI,KAAK,SAAS,EAAE;oBACtB,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,eAAe,EAAE,CAAC;oBAC7C,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,eAAe,EAAE,CAAC;iBAC1C;qBAAM;oBACL,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,aAAa,CAAC,CAAC,0DAAc,CAAC,CAAC,CAAC,EAAE,0DAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACnF,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,aAAa,CAAC,IAAI,CAAC,CAAC;iBAC5C;gBAED,mCAAmC;gBACnC,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,sBAAsB,EAAE,CAAC;gBACpD,qBAAqB,aAArB,qBAAqB,uBAArB,qBAAqB,CAAE,sBAAsB,EAAE,CAAC;gBAEhD,2CAA2C;gBAC3C,IAAI,CAAC,aAAa,CAAC,sBAAsB,EAAE,CAAC;YAC9C,CAAC,CAAC,CAAC;YAEH,6FAA6F;YAC7F,uDAAuD;YACvD,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5D,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5D,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,YAAY,CAAC,SAAS,CAAC,CAAC,IAAY,EAAE,EAAE;gBACnD,2DAA2D;gBAC3D,IAAI,IAAI,KAAK,MAAM,EAAE;oBACnB,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,eAAe,EAAE,CAAC;oBACjC,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,eAAe,EAAE,CAAC;iBAClC;qBAAM;oBACL,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,aAAa,CAAC,+DAAmB,CAAC,CAAC;oBAClD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,aAAa,CAAC,+DAAmB,CAAC,CAAC;iBACnD;gBAED,mCAAmC;gBACnC,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,sBAAsB,EAAE,CAAC;gBACxC,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,sBAAsB,EAAE,CAAC;gBAExC,2CAA2C;gBAC3C,IAAI,CAAC,aAAa,CAAC,sBAAsB,EAAE,CAAC;YAC9C,CAAC,CAAC,CAAC;SAEJ;QAAC,OAAO,KAAK,EAAE;YACZ,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,KAAK;aACf,CAAC;SACL;IACH,CAAC;IAED,IAAI,CAAC;QACH,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;IACrC,CAAC;IAcD,gBAAgB;QACd,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;;YACxE,IAAG,GAAG,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC9B,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;oBAC5B,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,UAAU;oBAC/B,WAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW;oBACjC,WAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW;oBACjC,kBAAkB,EAAE,SAAG,CAAC,IAAI,0CAAE,kBAAkB;oBAChD,cAAc,EAAE,SAAG,CAAC,IAAI,0CAAE,cAAc;oBACxC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI;oBACnB,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW;iBACjC,CAAC;gBACF,qFAAqF;gBACrF,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACxC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;gBAE5C,oEAAoE;gBACpE,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,cAAc,EAAE;oBACzC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;iBACzC;aAEF;QACD,CAAC,EAAC,CAAC,GAAG,EAAE,EAAE;YACR,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;gBAC1B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,mBAAmB;iBAC7B,CAAC;aACL;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC;aACH;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,UAAU,CAAC,KAAK;QACd,MAAM,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;QAC7D,IAAI,QAAQ,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,EAAE,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE;YACrD,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,MAAM,OAAO,GAAG;YACd,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,aAAa,EAAE;gBACb,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI;gBAC1E,kBAAkB;gBAClB,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI;gBAC5F,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;gBACjH,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;gBACjH,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI;gBACpH,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI;gBACxG,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI;aAC9F;YACD,YAAY,EAAE,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC,CAAC;SACrF,CAAC;QACF,OAAO,CAAC,GAAG,CAAC,eAAe,EAAC,OAAO,EAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC;QAClE,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,EAAE;YAC/C,0DAA0D;YAC1D,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC;iBAClF,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACZ,IAAI,GAAG,CAAC,OAAO,EAAE;oBACf,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC;oBACrC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,mCAAmC;qBAC7C,CAAC,CAAC;oBACH,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;iBACxB;YACH,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;gBACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;iBACjE,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;SACN;aAAM,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7C,+EAA+E;YAC/E,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC;iBAClF,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACZ,IAAI,GAAG,CAAC,OAAO,EAAE;oBACf,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC;oBACrC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,mCAAmC;qBAC7C,CAAC,CAAC;oBACH,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;iBACxB;YACH,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;gBACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;iBACjE,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;SACN;aAAM;YACL,qDAAqD;YACrD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,oCAAoC;aAC9C,CAAC,CAAC;SACJ;IAEH,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;;4FA9PU,sBAAsB,42BAmBvB,qEAAe;oHAnBd,sBAAsB;QCdnC,yEAA+B;QAC3B,wEAA2F;QAAA,yEAAc;QAAA,4DAAK;QAE9G,yEAA+B;QAC3B,4EAAwF;QAAnB,8IAAS,YAAQ,IAAC;QAAC,iEAAM;QAAA,4DAAS;QACvG,4EAA+D;QAAnB,8IAAS,YAAQ,IAAC;QAAC,+DAAI;QAAA,4DAAS;QAChF,4DAAM;QACV,4DAAM;QAEN,yEAAwB;QACpB,0EAAkC;QAC9B,0EAAsB;QAClB,0EAA4E;QACxE,4EAA0B;QAAA,uEAAW;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAClF,sFAAgE;QAC5D,wEAA+F;QACnG,4DAAiB;QACjB,iIAEY;QAChB,4DAAM;QAEN,0EAA2E;QACvE,4EAA0B;QAAA,gEAAI;QAAA,4EAA6B;QAAA,6DAAC;QAAA,4DAAO;QAAA,4DAAQ;QAC3E,sFAAgE;QAC9D,kFAA0H;QACxH,mIAEa;QACf,4DAAa;QACf,4DAAiB;QACjB,iIAEY;QAChB,4DAAM;QACV,4DAAM;QAEN,sHAwBM;QAEN,sHAqBM;QAEN,sHAsBM;QACV,4DAAO;QAEP,2EAAsB;QAClB,qHASM;QAEN,qHAGM;QACV,4DAAM;QACV,4DAAM;;QAtHI,0DAA2B;QAA3B,wFAA2B;QAOW,0DAA0E;QAA1E,4LAA0E;QAQzC,0DAA0D;QAA1D,uHAA0D;QAC1F,0DAAQ;QAAR,8EAAQ;QAKT,0DAA8D;QAA9D,0KAA8D;QAM/E,0DAAiC;QAAjC,iGAAiC;QA0BjC,0DAA6B;QAA7B,6FAA6B;QAuB7B,0DAA6B;QAA7B,6FAA6B;QA0BE,0DAA2B;QAA3B,2FAA2B;QAWtB,0DAAqB;QAArB,qFAAqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvH3C;AAC4B;AAIsB;AACsD;AAClD;AACJ;;;;;;;;;;;ICZ/F,0EAAgD;IAC5C,0EAAoB;IAChB,0EAA0C;IACtC,2EAA8B;IAAA,qEAAU;IAAA,4DAAO;IACnD,4DAAM;IACV,4DAAM;IACV,4DAAM;;;;IAyCkC,2EAOhB;IAJoC,qVAEtC,CAAC,yGAEA;IAAC,mEACgB;IAAA,4DAAO;;;IAXX,6EAE8B;IAC1B,sIAQO;IACX,4DAAS;;;IATE,0DAA8C;IAA9C,0HAA8C;;;IAJ7D,uEAA+B;IAC3B,iIAYS;IACb,4DAAO;;;IAbM,0DAA8C;IAA9C,wHAA8C;;;;IAkBnD,2EAOhB;IAJqC,qVAEvC,CAAC,yGAEA;IAAC,qEACgB;IAAA,4DAAO;;;IAXX,6EAE8B;IAC1B,sIAQO;IACX,4DAAS;;;IATE,0DAA8C;IAA9C,0HAA8C;;;IAJ7D,uEAAkC;IAC9B,iIAYS;IACb,4DAAO;;;IAbM,0DAA8C;IAA9C,wHAA8C;;;;;;;IAiDnE,yEAE4E;IACxE,yEAAuD;IACnD,4EAIwB;IADa,0cAA+C;IAHpF,4DAIwB;IAC5B,4DAAK;IACL,yEAAqD;IACjD,uDACJ;IAAA,4DAAK;IAAA,yEAAqD;IACtD,uDACJ;IAAA,4DAAK;IACL,yEAAuD;IACnD,uDACJ;IAAA,4DAAK;IACL,yEAAuD;IACnD,wDACJ;IAAA,4DAAK;IACL,0EAAuD;IACnD,wDACJ;;IAAA,4DAAK;IACL,0EAAuD;IACnD,wDACJ;IAAA,4DAAK;IACL,0EAAsC;IAClC,2EAAc;IACV,8EACkG;IADpE,ocAA0C;IAEpE,sEAAiC;IACrC,4DAAS;IACb,4DAAM;IACV,4DAAK;IACL,0EAA2E;IACvE,uEAAK;IAMD,8EAAoB;IAChB,2EAAuH;IAAzG,mbAAgC;IAC1C,sEAAyG;IAC7G,4DAAM;IACV,4DAAS;IAET,8EAAoB;IAChB,4EAEyC;IADrC,ybAAqC;IACA,4DAAO;IACpD,4DAAS;IAET,8EAAoF;IAChF,4EAE+E;IADpD,4cAAoD;IACA,wDAChC;IAAA,4DAAO;IAC1D,4DAAS;IACb,4DAAM;IACV,4DAAK;IAGT,4DAAK;;;;;;IA/DD,qNAAoG;IAGhD,0DAG1D;IAH0D,oLAG1D;IAIU,0DACJ;IADI,yHACJ;IACI,0DACJ;IADI,mHACJ;IAEI,0DACJ;IADI,0HACJ;IAEI,0DACJ;IADI,0HACJ;IAEI,0DACJ;IADI,8ZACJ;IAEI,0DACJ;IADI,0HACJ;IAIY,0DAAiE;IAAjE,kLAAiE;IA2BrC,2DAAkD;IAAlD,+GAAkD;IAAC,0DAChC;IADgC,6GAChC;;;IA3DnE,wEAAgE;IAC5D,mIAgEK;IACT,qEAAe;;;;IA/DN,0DAAqE;IAArE,mJAAqE;;;IAiElF,wEAA0C;IACtC,yEAAwB;IACpB,yEAAiB;IACb,qEAE+B;IACnC,4DAAK;IACT,4DAAK;IACT,4DAAQ;;;IAwBA,yEAA0C;IACtC,sGACJ;IAAA,4DAAK;;;IACL,yEAA2C;IACvC,+GACJ;IAAA,4DAAK;;;;IAIL,wEAC2C;IAAvC,wUAAsC;IAAC,oEAAS;IAAA,4DAAI;;;;IACxD,wEAC2C;IAAvC,wUAAsC;IAAC,oEAAS;IAAA,4DAAI;;;IAsBxD,yEAA0C;IACtC,oGACJ;IAAA,4DAAK;;;IACL,yEAA2C;IACvC,6GACJ;IAAA,4DAAK;;;;IAIL,wEACyC;IAArC,sUAAoC;IAAC,kEAAO;IAAA,4DAAI;;;;IACpD,wEACyC;IAArC,sUAAoC;IAAC,kEAAO;IAAA,4DAAI;;;IAgBhD,yEACwD;IACpD,+EACJ;IAAA,4DAAK;;;IACL,yEACwD;IACpD,iFACJ;IAAA,4DAAK;;;IAET,yEAAgD;IAC5C,gGACJ;IAAA,4DAAK;;;IACL,yEAA+C;IAC3C,kGACJ;IAAA,4DAAK;;;;IAIL,wEAC4B;IAD8B,qUAAkC;IAChE,mEAC5B;IAAA,4DAAI;;;;IACJ,wEAC4B;IAD8B,qUAAkC;IAChE,qEAC5B;IAAA,4DAAI;;;ADhRrB,MAAM,sBAAsB;IAyCjC,YAAmB,MAAc,EAAS,MAAiB,EAAU,aAA4B,EACxF,KAAqB,EAAU,gBAAkC,EACjE,YAAsC,EACrC,aAA4B;QAHnB,WAAM,GAAN,MAAM,CAAQ;QAAS,WAAM,GAAN,MAAM,CAAW;QAAU,kBAAa,GAAb,aAAa,CAAe;QACxF,UAAK,GAAL,KAAK,CAAgB;QAAU,qBAAgB,GAAhB,gBAAgB,CAAkB;QACjE,iBAAY,GAAZ,YAAY,CAA0B;QACrC,kBAAa,GAAb,aAAa,CAAe;QA1C9B,kBAAa,GAAG,IAAI,yCAAO,EAAU,CAAC;QAEvC,gBAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QACpE,kBAAa,GAAU,EAAE,CAAC;QAKnB,kBAAa,GAAW,CAAC,CAAC;QAC1B,kBAAa,GAAW,CAAC,CAAC;QAC1B,aAAQ,GAAW,CAAC,CAAC;QACrB,UAAK,GAAW,CAAC,CAAC;QACzB,oBAAe,GAAU,EAAE,CAAC;QAC5B,mBAAc,GAAU,EAAE,CAAC;QAEpB,qBAAgB,GAAY,KAAK,CAAC;QAClC,qBAAgB,GAAQ,EAAE,CAAC;QAC3B,cAAS,GAAY,KAAK,CAAC;QAC3B,iBAAY,GAAG,EAAE,CAAC;QAClB,kBAAa,GAAG,EAAE,CAAC;QACnB,cAAS,GAAY,KAAK,CAAC;QAC3B,gBAAW,GAAY,KAAK,CAAC;QAE7B,sBAAiB,GAAY,KAAK,CAAC;QAEnC,2BAAsB,GAAY,KAAK,CAAC;QACxC,0BAAqB,GAAY,KAAK,CAAC;QAS9C,uBAAkB,GAAkB,IAAI,CAAC;IAOC,CAAC;IAE3C,QAAQ;QACN,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE;YAC1C,kCAAkC;YAClC,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,aAAa;aACzC,IAAI,CAAC,4DAAY,CAAC,GAAG,CAAC,EACrB,qEAAoB,EAAE,EACtB,oDAAG,CAAC,GAAG,EAAE;YACP,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,iDAAiD;QAC1E,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YACxB,mCAAmC;YACnC,IAAI,SAAS,CAAC,MAAM,IAAI,CAAC,EAAE;gBACzB,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;aACxC;iBAAM,IAAI,SAAS,KAAK,EAAE,EAAE;gBAC1B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,+DAA+D;gBACxF,oCAAoC;gBACpC,IAAI,CAAC,eAAe,EAAE;aACvB;iBAAM;gBACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,+DAA+D;aACxF;QACH,CAAC,CAAC,CAAC;IACT,CAAC;IAGD,eAAe,CAAC,KAAY;QAC1B,uDAAuD;QACvD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAc,CAAC,EAAE;YAC/D,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;SAC9B;IACH,CAAC;IAED,eAAe;QACb,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YAC1E,IAAG,GAAG,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC9B,6CAA6C;gBAC7C,sCAAsC;gBACtC,wCAAwC;aACzC;QACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBACI;gBACH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QAEH,CAAC,CAAC;IACJ,CAAC;IAED,iBAAiB,CAAC,WAAmB,EAAE,SAAkB;QACvD,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;IAED,sBAAsB;QACpB,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,gBAAgB,CAAC,2BAA2B,CAAC,EAAC,IAAI,EAAE,EAAE,mBAAmB,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBACrJ,IAAI,GAAG,CAAC,OAAO,EAAE;oBACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,sCAAsC;qBAChD,CAAC,CAAC;oBAEH,IAAI,CAAC,eAAe,EAAE,CAAC;iBACxB;YACH,CAAC,CAAC;SACH;aACI;YACH,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,EAAC,IAAI,EAAE,EAAE,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBAChJ,IAAI,GAAG,CAAC,OAAO,EAAE;oBACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,oCAAoC;qBAC9C,CAAC,CAAC;oBACH,IAAI,CAAC,eAAe,EAAE,CAAC;iBACxB;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,mBAAmB,CAAC,CAAC,EAAE,OAAO;QAC5B,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE;YACpB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC5C;aAAM;YACL,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBAChB,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACxC;SACF;QAED,8CAA8C;QAC9C,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAE7B,6EAA6E;QAC7E,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACrC,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YACnE,IAAI,KAAK,EAAE;gBACT,IAAI,KAAK,CAAC,SAAS,EAAE;oBACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACrC;qBAAM;oBACL,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACvC;aACF;QACH,CAAC,CAAC;QAEF,iDAAiD;QACjD,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YACvD,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YACnE,OAAO,KAAK,IAAI,KAAK,CAAC,SAAS,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,mDAAmD;QACnD,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YACzD,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YACnE,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,sCAAsC;QACtC,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1E,0CAA0C;YAC1C,KAAK,CAAC,yDAAyD,CAAC,CAAC;YACjE,uDAAuD;YACvD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,6CAA6C;YAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC;YACvE,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC9B,MAAM,YAAY,GAAG,QAA4B,CAAC;gBAClD,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;SAEJ;aAAM,IAAI,WAAW,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACxB,wBAAwB;YACxB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;aAAM,IAAI,aAAa,EAAE;YACxB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC1B,sBAAsB;YACtB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;SAClC;aAAM;YACL,qGAAqG;YACrG,KAAK,CAAC,yDAAyD,CAAC,CAAC;YACjE,uDAAuD;YACvD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YAEjC,6CAA6C;YAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC;YACvE,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC9B,MAAM,YAAY,GAAG,QAA4B,CAAC;gBAClD,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;SACJ;IAEH,CAAC;IAED,kBAAkB,CAAC,WAAW;QAC5B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;IAED,cAAc,CAAC,MAAM;QACnB,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;QACxC,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAChE;aAAM;YACL,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK;SACjC;QACD,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,0CAA0C;QAExE,IAAI,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;QACvC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YAClD,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE;gBACb,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;oBAC1B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;oBAC9B,OAAO,IAAI,CAAC,EAAE,CAAC;iBAChB;qBACI;oBACH,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;iBACxB;aACF;QACH,CAAC,CAAC;QACF,8CAA8C;QAC9C,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAE7B,6EAA6E;QAC7E,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACrC,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YACnE,IAAI,KAAK,EAAE;gBACT,IAAI,KAAK,CAAC,SAAS,EAAE;oBACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACrC;qBAAM;oBACL,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACvC;aACF;YAED,iDAAiD;YACjD,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;gBACvD,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;gBACnE,OAAO,KAAK,IAAI,KAAK,CAAC,SAAS,CAAC;YAClC,CAAC,CAAC,CAAC;YACH,mDAAmD;YACnD,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;gBACzD,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;gBACnE,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACnC,CAAC,CAAC,CAAC;YAEH,IAAI,WAAW,EAAE;gBACf,wBAAwB;gBACxB,IAAI,CAAC,mBAAmB,GAAG,IAAI;gBAC/B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;aAC/B;iBAAM,IAAI,aAAa,EAAE;gBACxB,sBAAsB;gBACtB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAC7B,IAAI,CAAC,mBAAmB,GAAG,KAAK;aACjC;iBAAM;gBACL,qGAAqG;aACtG;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1E,KAAK,CAAC,wDAAwD,CAAC,CAAC;YAChE,uDAAuD;YACvD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,6CAA6C;YAC7C,MAAM,UAAU,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC;YACvE,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC9B,MAAM,YAAY,GAAG,QAA4B,CAAC;gBAClD,YAAY,CAAC,OAAO,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;YAEH,+CAA+C;YAC/C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,wDAAwD;aAClE,CAAC;YACF,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;SAC3E;IACH,CAAC;IAED,aAAa,CAAC,WAAW;QACvB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;IAED,wBAAwB;QACtB,IAAI,IAAI,CAAC,aAAa,KAAK,CAAC,EAAE;YAC5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;SACzC;aACI;YACH,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE;gBACxC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;aAC7C;SACF;QACD,MAAM,WAAW,GAAG;YAClB,iBAAiB,EAAE,IAAI,CAAC,eAAe;SACxC,CAAC;QAEF,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,MAAW,EAAE,EAAE;YACtH,IAAI,MAAM,CAAC,OAAO,EAAE;gBAClB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE,oCAAoC;iBAC9C,CAAC,CAAC;gBAEH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK;gBAChC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,CAAC,8CAA8C;gBACzE,IAAI,CAAC,WAAW,GAAG,KAAK,EAAC,yCAAyC;aACnE;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oBAAoB;QAClB,OAAO,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;IAC5C,CAAC;IAED,0BAA0B;QACxB,MAAM,WAAW,GAAG;YAClB,mBAAmB,EAAE,IAAI,CAAC,eAAe;SAC1C,CAAC;QACF,IAAI,CAAC,gBAAgB,CAAC,2BAA2B,CAAC,EAAC,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAW,EAAE,EAAE;YACvH,IAAI,MAAM,CAAC,OAAO,EAAE;gBAClB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE,sCAAsC;iBAChD,CAAC,CAAC;gBACH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK;gBAChC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,CAAC,iDAAiD;gBAC5E,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,yCAAyC;aACpE;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC;iBAC/D,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBACzB,KAAK,EAAE,OAAO;oBACd,OAAO,EAAE,uBAAuB;iBACjC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,eAAe,CAAC,SAAiB;QAC/B,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gBAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aACxB;iBAAM;gBACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBACpD,OAAO,CACL,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC,CACrF,CAAC;gBACJ,CAAC,CAAC,CAAC;gBACH,IAAG,IAAI,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAAC;oBACjC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,SAAS,GAAG,eAAe;qBACrC,CAAC,CAAC;iBACJ;aACF;YACH,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,kDAAkD;QAC1E,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAGD,mBAAmB,CAAC,SAAiB;QACnC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,2CAA2C;QAC3C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED,iBAAiB,CAAC,CAAC;QACjB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACzC,MAAM,OAAO,GAAG,gBAAgB,CAAC,CAAC,+CAA+C;QACjF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE;YAC5C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,8CAA8C;aACxD,CAAC,CAAC;YACH,OAAO;SACR;QACD,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;YAC9B,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC;YAC1C,sFAAsF;YACtF,iCAAiC;YACjC,wBAAwB;YACxB,8CAA8C;YAC9C,QAAQ;YACR,4BAA4B;YAC5B,gBAAgB;YAChB,4BAA4B;YAC5B,mCAAmC;YACnC,wBAAwB;YACxB,wEAAwE;YACxE,UAAU;YACV,MAAM;YACN,uEAAuE;YACvE,mCAAmC;YACnC,wBAAwB;YACxB,wDAAwD;YACxD,UAAU;YACV,MAAM;YACN,WAAW;YACX,mCAAmC;YACnC,wBAAwB;YACxB,0CAA0C;YAC1C,UAAU;YACV,MAAM;YACN,MAAM;SACP;IACH,CAAC;IAED,WAAW;QACT,IAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,WAAW,EAAE;YACf,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,OAAO,EAAE;gBAClC,IAAI,EAAE,MAAM;gBACZ,OAAO,EAAE,KAAK;gBACd,UAAU,EAAE,IAAI;aACjB,CAAC,CAAC;YACH,WAAW,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,0BAA0B;aACpC,CAAC,CAAC;SACJ;IACH,CAAC;IAEM,UAAU,CAAC,CAAM;QACtB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,SAAS,CAAC;QACjC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;QAE3B,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,+BAA+B;YAC/B,qCAAqC;YACrC,4CAA4C;YAC5C,WAAW;YACT,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,IAAI;SACL;IACH,CAAC;IAED,iBAAiB;QACf,MAAM,SAAS,GAAwC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,uGAAqB,EAAE;YAC7F,KAAK,EAAE,OAAO;YACd,MAAM,EAAE,OAAO;YACf,IAAI,EAAE,EAAE;YACR,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE;gBACR,KAAK,EAAE,GAAG;aACX;SACF,CAAC,CAAC;QACH,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oBAAoB;QAClB,MAAM,SAAS,GAA4C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,uGAAyB,EAAE;YACrG,KAAK,EAAE,OAAO;YACd,MAAM,EAAE,OAAO;YACf,IAAI,EAAE,EAAE;YACR,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE;gBACR,KAAK,EAAE,GAAG;aACX;SACF,CAAC,CAAC;QACH,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yBAAyB;IACzB,mGAAmG;IACnG,qBAAqB;IACrB,sBAAsB;IACtB,gBAAgB;IAChB,0BAA0B;IAC1B,qBAAqB;IACrB,uBAAuB;IACvB,YAAY;IACZ,QAAQ;IACR,oDAAoD;IACpD,+CAA+C;IAC/C,QAAQ;IACR,IAAI;IAEJ,aAAa,CAAC,WAAW;QACvB,MAAM,SAAS,GAAoD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,6JAAiC,EAAE;YACrH,KAAK,EAAE,MAAM;YACb,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,EAAE,WAAW,EAAE,WAAW,EAAC;YACjC,YAAY,EAAE,IAAI;SACnB,CAAC,CAAC;QACH,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,kBAAkB,CAAC,WAAW;QAC5B,MAAM,SAAS,GAAyC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,2GAAsB,EAAE;YAC/F,KAAK,EAAE,OAAO;YACd,MAAM,EAAE,OAAO;YACf,IAAI,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE;YAClC,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE;gBACR,KAAK,EAAE,GAAG;aACX;SACF,CAAC,CAAC;QAEH,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,OAAO,CAAC,GAAG,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,WAAW,EAAE,QAAQ;QAC5B,MAAM,SAAS,GAAG,CAAC,QAAQ,CAAC,CAAC,6BAA6B;QAC1D,MAAM,OAAO,GAAG;YACd,WAAW,EAAE,WAAW;SACzB,CAAC;QACF,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC;aAClF,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,IAAI,GAAG,CAAC,OAAO,EAAE;gBACX,IAAI,SAAS,EAAE;oBACb,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,8BAA8B;qBACxC,CAAC,CAAC;oBACH,IAAI,CAAC,eAAe,EAAE;iBACvB;qBAAM;oBACL,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;wBACzB,KAAK,EAAE,SAAS;wBAChB,OAAO,EAAE,gCAAgC;qBAC1C,CAAC,CAAC;oBACH,IAAI,CAAC,eAAe,EAAE;iBACvB;aACF;QACP,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACf,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBACzB,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;aACjE,CAAC;QACJ,CAAC,CAAC,CAAC;IACP,CAAC;IAED,0CAA0C;IAC1C,gBAAgB,CAAC,WAA0B;QACzC,IAAG,WAAW,KAAK,KAAK,EAAE;YACxB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;SAChC;aAAM;YACL,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC;SACvC;IACH,CAAC;IAED,YAAY;QACV,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC;IAC/C,CAAC;IAED,aAAa;QACX,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IAC/B,CAAC;;4FA1nBU,sBAAsB;oHAAtB,sBAAsB;;;;;;oJAAtB,2BAAuB;;QCpBpC,kHAMM;QACN,yEAA0C;QACtC,yEAAwD;QACpD,yEAAiC;QAC7B,2EACyD;QAArD,mJAAS,4CAAwC,IAAC;QADtD,4DACyD;QAC7D,4DAAM;QACN,yEAAuD;QACnD,4EAAuG;QAA9B,8IAAS,uBAAmB,IAAC;QAClG,kEAAiC;QAAA,2FACrC;QAAA,4DAAS;QACT,4EAA0G;QAAjC,8IAAS,0BAAsB,IAAC;QACrG,mEAAiC;QAAA,+FACrC;QAAA,4DAAS;QAMb,4DAAM;QACV,4DAAM;QAEN,0EAA8C;QAC1C,0EAAkD;QAC9C,6EAAsC;QAClC,yEAAO;QACH,sEAAI;QACA,0EAIR;QACY,6EAGgB;QAHgC,sJAAU,0BAAsB,IAAC;QAAjF,4DAGgB;QAChB,2EAAuC;QACnC,uHAcO;QACP,uHAcO;QACX,4DAAM;QACV,4DAAK;QACL,0EAAwB;QAAA,uEAAW;QAAA,4DAAK;QACxC,0EAAwB;QAAA,wEACpB;QAAA,+EAAgC;QAChC,2EACyE;QAAzB,4IAAS,kBAAc,IAAC;QADxE,4DACyE;QACzE,2EAA6D;QACzD,2EAA2B;QAC3B,yEAAO;QACH,6EAA6E;QAA3C,gJAAU,qBAAiB,KAAK,CAAC,IAAC;QAApE,4DAA6E;QAAC,iEAClF;QAAA,4DAAQ;QACR,yEAAO;QACH,6EAA0E;QAAxC,gJAAU,qBAAiB,UAAU,CAAC,IAAC;QAAzE,4DAA0E;QAAC,sEAC/E;QAAA,4DAAQ;QACR,yEAAO;QACH,6EAAyE;QAAvC,gJAAU,qBAAiB,SAAS,CAAC,IAAC;QAAxE,4DAAyE;QAAC,qEAC9E;QAAA,4DAAQ;QACR,yEAAO;QACH,6EAAsE;QAApC,gJAAU,qBAAiB,MAAM,CAAC,IAAC;QAArE,4DAAsE;QAAC,kEAC3E;QAAA,4DAAQ;QACR,4DAAM;QACV,4DAAM;QACN,4DAAM;QACV,4DAAK;QACL,0EAAwB;QAAA,mEAAO;QAAA,4DAAK;QACpC,0EAAwB;QAAA,mEAAO;QAAA,4DAAK;QACpC,0EAAwB;QAAA,oEAAQ;QAAA,4DAAK;QACrC,0EAAwB;QAAA,uEAAW;QAAA,4DAAK;QACxC,qEAA6B;QAC7B,qEAA6B;QACjC,4DAAK;QACT,4DAAQ;QACR,yEAAO;QACH,uIAkEe;QACnB,4DAAQ;QACR,yHAQQ;QACZ,4DAAQ;QAKZ,4DAAM;QAGN,2EAAuG;QACnG,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,0EAC+B;QAC3B,oEAAmD;QAAC,mFAExD;QAAA,4DAAK;QACT,4DAAM;QACN,mHAEK;QACL,mHAEK;QACT,4DAAM;QACN,2EAAiD;QAC7C,yEAA2D;QAAA,iEAAK;QAAA,4DAAI;QACpE,iHACwD;QACxD,iHACwD;QAC5D,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGN,2EAAqG;QACjG,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,0EAC+B;QAC3B,oEAAiD;QAAC,iFAEtD;QAAA,4DAAK;QACT,4DAAM;QACN,mHAEK;QACL,mHAEK;QACT,4DAAM;QACN,2EAAiD;QAC7C,yEAA2D;QAAA,iEAAK;QAAA,4DAAI;QACpE,iHACoD;QACpD,iHACoD;QACxD,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGN,2EAA8F;QAC1F,2EAAyF;QACrF,2EAA6C;QACzC,2EAA+D;QAC3D,oEACmD;QACvD,4DAAM;QACN,2EAA4B;QACxB,2EAAoD;QAChD,mHAGK;QACL,mHAGK;QACT,4DAAM;QACN,mHAEK;QACL,qHAEK;QACT,4DAAM;QACN,4EAAiD;QAC7C,0EAA2D;QAAA,kEAAK;QAAA,4DAAI;QACpE,mHAEI;QACJ,mHAEI;QACR,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGN,4EAA+F;QAC3F,4EAAyF;QACrF,4EAA6C;QACzC,4EAA+D;QAC3D,qEACmD;QACvD,4DAAM;QACN,4EAA4B;QACxB,4EAAoD;QAChD,2EACwD;QACpD,4EACJ;QAAA,4DAAK;QACT,4DAAM;QACN,sEACK;QACT,4DAAM;QACN,4EAAiD;QAC7C,0EAA2D;QAAA,kEAAK;QAAA,4DAAI;QACpE,0EAC4B;QAAA,kEAC5B;QAAA,4DAAI;QACR,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;;QAtUA,+EAAe;QAuCW,2DAAY;QAAZ,qEAAY;QAIL,0DAAsB;QAAtB,sFAAsB;QAetB,0DAAyB;QAAzB,yFAAyB;QAsBb,0DAAqC;QAArC,gKAAqC;QA2BrC,2DAAkB;QAAlB,sFAAkB;QAoE7C,0DAAgC;QAAhC,gGAAgC;QAgC3B,2DAAe;QAAf,+EAAe;QAGf,0DAAgB;QAAhB,gFAAgB;QAMjB,0DAAe;QAAf,+EAAe;QAEf,0DAAgB;QAAhB,gFAAgB;QAuBf,2DAAe;QAAf,+EAAe;QAGf,0DAAgB;QAAhB,gFAAgB;QAMjB,0DAAe;QAAf,+EAAe;QAEf,0DAAgB;QAAhB,gFAAgB;QAiBX,0DAAqB;QAArB,qFAAqB;QAIrB,0DAAoB;QAApB,oFAAoB;QAKJ,0DAAqB;QAArB,qFAAqB;QAGrB,0DAAoB;QAApB,oFAAoB;QAMV,0DAAqB;QAArB,qFAAqB;QAGpD,0DAAoB;QAApB,oFAAoB;;;;;;;;;;;;;;;;;;;;;ACjSO;AACM;AACiC;AAEvB;;;AAEvE,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAC,EAAE;QACP,SAAS,EAAE,sEAAmB;QAC9B,QAAQ,EAAE;YACR;gBACE,IAAI,EAAC,EAAE;gBACP,UAAU,EAAE,eAAe;gBAC3B,SAAS,EAAE,MAAM;aAClB;YACD;gBACE,IAAI,EAAC,eAAe;gBACpB,SAAS,EAAE,uGAAsB;aAClC;YACD;gBACE,IAAI,EAAC,aAAa;gBAClB,SAAS,EAAE,gFAAe;aAC3B;SACF;QACD,SAAS,EAAE,QAAQ;QACnB,IAAI,EAAE;YACJ,uBAAuB,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;SAC5D;KACF;CACF,CAAC;AAMK,MAAM,uBAAuB;;8FAAvB,uBAAuB;oHAAvB,uBAAuB;wHAHzB,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC,EAC9B,yDAAY;mIAEX,uBAAuB,oFAFxB,yDAAY;;;;;;;;;;;;;;;;;;;AC5BjB,MAAM,mBAAmB;IAE9B,gBAAgB,CAAC;IAEjB,QAAQ;IACR,CAAC;;sFALU,mBAAmB;iHAAnB,mBAAmB;QCPhC,yEAA8D;QAC1D,yEAA+B;QAC7B,yEAAyE;QACvE,yEAAoC;QAClC,yEAAiE;QAC/D,uEAA6F;QAAA,qEAAU;QAAA,4DAAI;QAC7G,4DAAM;QAAA,yEAAiE;QACrE,uEAA2F;QAAA,kEAAO;QAAA,4DAAI;QACxG,4DAAM;QACN,qEAA6B;QAC/B,4DAAM;QACR,4DAAM;QACR,4DAAM;QACN,oEAAiB;QACjB,uEAAK;QACH,4EAA+B;QACjC,4DAAM;QACR,4DAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBuC;AACuB;AACvB;AACiB;AACP;AACE;AACJ;AACM;AACK;AACC;AACI;AACL;AACJ;AACD;AACiC;AACW;AACI;AACkD;AACtD;AACjB;AACjB;AACc;;;AA8B9E,MAAM,gBAAgB;;gFAAhB,gBAAgB;8GAAhB,gBAAgB;kHAjBlB;YACP,0DAAY;YACZ,+EAAuB;YACvB,0DAAY;YACZ,0EAAqB;YACrB,oEAAc;YACd,sEAAe;YACf,kEAAa;YACb,wEAAmB;YACnB,6EAAkB;YAClB,8EAAmB;YACnB,kFAAmB;YACnB,wDAAW;YACX,gEAAmB;YACnB,iFAA0B,EAAE;SAC7B;oIAEU,gBAAgB,mBA3BzB,sEAAmB;QACnB,uGAAsB;QACtB,kHAAqB;QACrB,sHAAsB;QACtB,wKAAiC;QACjC,kHAAyB;QACzB,iGAAoB;QACpB,gFAAe;QACf,+FAAmB,aAGnB,0DAAY;QACZ,+EAAuB;QACvB,0DAAY;QACZ,0EAAqB;QACrB,oEAAc;QACd,sEAAe;QACf,kEAAa;QACb,wEAAmB;QACnB,6EAAkB;QAClB,8EAAmB;QACnB,kFAAmB;QACnB,wDAAW;QACX,gEAAmB","sources":["./src/app/pages/promotions/components/add-promotion/add-promotion/add-promotion.component.ts","./src/app/pages/promotions/components/add-promotion/add-promotion/add-promotion.component.html","./src/app/pages/promotions/components/assign-product-to-promotion/assign-product-to-promotion/assign-product-to-promotion.component.ts","./src/app/pages/promotions/components/assign-product-to-promotion/assign-product-to-promotion/assign-product-to-promotion.component.html","./src/app/pages/promotions/components/counter-disc-modal/counter-disc-modal.component.ts","./src/app/pages/promotions/components/counter-disc-modal/counter-disc-modal.component.html","./src/app/pages/promotions/components/coupon-modal/coupon-modal.component.ts","./src/app/pages/promotions/components/coupon-modal/coupon-modal.component.html","./src/app/pages/promotions/components/coupon/coupon.component.ts","./src/app/pages/promotions/components/coupon/coupon.component.html","./src/app/pages/promotions/components/edit-coupon/edit-coupon.component.ts","./src/app/pages/promotions/components/edit-coupon/edit-coupon.component.html","./src/app/pages/promotions/components/edit-promotion/edit-promotion/edit-promotion.component.ts","./src/app/pages/promotions/components/edit-promotion/edit-promotion/edit-promotion.component.html","./src/app/pages/promotions/components/promotion-list/promotion-list.component.ts","./src/app/pages/promotions/components/promotion-list/promotion-list.component.html","./src/app/pages/promotions/promotions-routing.module.ts","./src/app/pages/promotions/promotions.component.ts","./src/app/pages/promotions/promotions.component.html","./src/app/pages/promotions/promotions.module.ts"],"sourcesContent":["import { TitleCasePipe } from '@angular/common';\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { Subject } from 'rxjs';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { AbstractControl, ValidationErrors, ValidatorFn } from '@angular/forms';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\n\r\n@Component({\r\n  selector: 'app-add-promotion',\r\n  templateUrl: './add-promotion.component.html',\r\n  styleUrls: ['./add-promotion.component.scss']\r\n})\r\nexport class AddPromotionComponent implements OnInit {\r\n\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  public promotionForm: any;\r\n  public submitted: boolean = false;\r\n  public today: Date;\r\n  types: string[] = ['DISCOUNT', 'PRODUCT', 'FLAT'];  // ['DISCOUNT', 'PRODUCT', 'FLAT', 'COUPONS'];\r\n  productsIdList: any;\r\n  selectedProductIds: string[] = [];\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe,\r\n    // @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<AddPromotionComponent>,\r\n    private promotionService: PromotionService\r\n  ) {\r\n    this.today = new Date();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    try {\r\n      this.promotionForm = this.formBuilder.group({\r\n          schemaName: [null],\r\n          buyQuantity: [null, Validators.required],\r\n          getQuantity: [null, Validators.required],\r\n          discountPercentage: [null, [Validators.min(0), Validators.max(100)]],\r\n          discountAmount: [null],\r\n          minBillAmt: [null],\r\n          type: ['DISCOUNT', Validators.required], // Default value 'DISCOUNT'\r\n      },\r\n      {\r\n          validators: [\r\n              this.atLeastOneValidator\r\n          ], // Apply the custom validator\r\n      }\r\n      );\r\n      this.getAllProductsAvailableForPromotion()\r\n      const discountPercentageControl = this.promotionForm.get('discountPercentage');\r\n      const discountAmountControl = this.promotionForm.get('discountAmount');\r\n\r\n      // Subscribe to valueChanges of discountPercentage control\r\n      discountPercentageControl?.valueChanges.subscribe(value => {\r\n          try {\r\n              if (value && !discountAmountControl?.disabled) {\r\n                  discountAmountControl?.disable();\r\n              } else if (!value && discountAmountControl?.disabled) {\r\n                  discountAmountControl?.enable();\r\n              }\r\n          } catch (error) {\r\n              console.error('Error in discountPercentageControl subscription:', error);\r\n          }\r\n      });\r\n\r\n      // Subscribe to valueChanges of discountAmount control\r\n      discountAmountControl?.valueChanges.subscribe(value => {\r\n          try {\r\n              if (value && !discountPercentageControl?.disabled) {\r\n                  discountPercentageControl?.disable();\r\n              } else if (!value && discountPercentageControl?.disabled) {\r\n                  discountPercentageControl?.enable();\r\n              }\r\n          } catch (error) {\r\n              console.error('Error in discountAmountControl subscription:', error);\r\n          }\r\n      });\r\n\r\n      // If type is PRODUCT then discounted fields are get hidden... so below is code for that condition\r\n      // When the type changes, adjust validators accordingly\r\n      const typeControl = this.promotionForm.get('type');\r\n\r\n      typeControl?.valueChanges.subscribe((type: string) => {\r\n        // Dynamically adjust validators based on the selected type\r\n        if (type === 'PRODUCT') {\r\n          discountPercentageControl?.clearValidators();\r\n          discountAmountControl?.clearValidators();\r\n        } else {\r\n          discountPercentageControl?.setValidators([Validators.min(0), Validators.max(100)]);\r\n          discountAmountControl?.setValidators(null);\r\n        }\r\n\r\n        // Update and validate the controls\r\n        discountPercentageControl?.updateValueAndValidity();\r\n        discountAmountControl?.updateValueAndValidity();\r\n\r\n        // Update the form level validators as well\r\n        this.promotionForm.updateValueAndValidity();\r\n      });\r\n\r\n      // If type is FLAT then buy and get qty are get hidden... so below is code for that condition\r\n      // When the type changes, adjust validators accordingly\r\n      const buyQtyControl = this.promotionForm.get('buyQuantity');\r\n      const getQtyControl = this.promotionForm.get('getQuantity');\r\n      typeControl?.valueChanges.subscribe((type: string) => {\r\n        // Dynamically adjust validators based on the selected type\r\n        if (type === 'FLAT') {\r\n          buyQtyControl?.clearValidators();\r\n          getQtyControl?.clearValidators();\r\n        } else {\r\n          getQtyControl?.setValidators(Validators.required);\r\n          buyQtyControl?.setValidators(Validators.required);\r\n        }\r\n\r\n        // Update and validate the controls\r\n        getQtyControl?.updateValueAndValidity();\r\n        buyQtyControl?.updateValueAndValidity();\r\n\r\n        // Update the form level validators as well\r\n        this.promotionForm.updateValueAndValidity();\r\n      });\r\n    } catch (error) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: error\r\n        })\r\n    }\r\n  }\r\n\r\n  atLeastOneValidator: ValidatorFn = (control: AbstractControl): ValidationErrors | null => {\r\n    const discountPercentage = control.get('discountPercentage').value;\r\n    const discountAmount = control.get('discountAmount').value;\r\n  \r\n    // Check if the type is \"DISCOUNT\" and at least one of the fields is empty\r\n    if (control.get('type').value === 'DISCOUNT' && (!discountPercentage && !discountAmount)) {\r\n      return { atLeastOneError: true };\r\n    }\r\n  \r\n    return null;\r\n  };   \r\n  \r\n  get f() {\r\n    return this.promotionForm.controls;\r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  numberOnly(event): boolean {\r\n    const charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  numberDecimalOnly(event): boolean {\r\n    var charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode != 46 && charCode > 31\r\n      && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  getAllProductsAvailableForPromotion() {\r\n    this.promotionService.getAllProductsAvailableForPromotion({\r\n      data: {}, \r\n      userId: this.currentUser.id, \r\n      page: 1, \r\n      size: 1000, \r\n      productType: 'GOODS'\r\n    }).then((res) => {\r\n      if(res.success) {\r\n        this.productsIdList = res.data.rows;\r\n      }\r\n    },(err) => {\r\n        if (err.error.status === 404) {\r\n            this.toastService.toastMsg({\r\n              title: 'Error',\r\n              content: 'Data Not Found!!!'\r\n            })\r\n        } else {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: this.titleCasePipe.transform(err.error.error_message)\r\n          })\r\n        }\r\n      });\r\n  }\r\n\r\n  onSave() {\r\n    this.submitted = true;\r\n    if (this.promotionForm.invalid) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Fill All Required Fields.\",\r\n      });\r\n      return false;\r\n    } else if(this.selectedProductIds.length < 1 && this.promotionForm.value.type === 'PRODUCT') {\r\n      this.toastService.toastMsg({\r\n        title: 'Error',\r\n        content: 'please select atleast one product'\r\n      })\r\n    } else {\r\n      const data = {\r\n        \"promotionData\": {\r\n          \"type\": this.promotionForm.value.type,\r\n          \"schemaName\": this.promotionForm.value.schemaName,\r\n          \"buyQuantity\": this.promotionForm.value.type !== 'FLAT' ? parseInt(this.promotionForm.value.buyQuantity, 10) : null,\r\n          \"getQuantity\": this.promotionForm.value.type !== 'FLAT' ? parseInt(this.promotionForm.value.getQuantity, 10) : null,\r\n          \"discountPercentage\": this.promotionForm.value.type === 'PRODUCT' ? 100.00 : parseFloat(this.promotionForm.value.discountPercentage),\r\n          \"discountAmount\": this.promotionForm.value.type === 'PRODUCT' ? null : parseFloat(this.promotionForm.value.discountAmount),\r\n          \"isActive\": true,\r\n          \"freeProductId\": this.promotionForm.value.type === 'PRODUCT' ? this.selectedProductIds : null,\r\n          // If DiscountAmount is there user cannot sent the discountPercentage value or vise versa\r\n          \"minumumBill\": this.promotionForm.value.minBillAmt ? this.promotionForm.value.minBillAmt : null,\r\n        }\r\n      }\r\n      this.promotionService.addPromotion(data, this.currentUser.id).then( res => {\r\n        if(res.success) {\r\n          this.dialogRef.close();\r\n          this.commonService.notifyDataAdded()\r\n          this.toastService.toastMsg({\r\n            title: \"Success\",\r\n            content: \"Promotion Addedd Successfully!!!\",\r\n          });\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Add Promotion</h1>\r\n\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" style=\"margin-right: 10px;\" class=\"btn btn-cancel\" (click)=\"cancel()\">Cancel</button>\r\n        <button type=\"button\" class=\"btn btn-save ms-2\" (click)=\"onSave()\">Save</button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <form [formGroup]=\"promotionForm\">\r\n        <div class=\"row mb-3\">\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n              <label class=\"form-label\">Schema Name<span class=\"error-asterisk\">*</span></label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Schema Name\" maxlength=\"50\" formControlName=\"schemaName\" required>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.schemaName.touched) && f.schemaName.errors?.required\">\r\n                Schema Name is required!\r\n              </mat-error>\r\n            </div>\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n              <label class=\"form-label\">Type<span class=\"error-asterisk\">*</span></label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <mat-select formControlName=\"type\" placeholder=\"Type\" required>\r\n                  <mat-option *ngFor=\"let item of types\" [value]=\"item\">\r\n                    {{ item }}\r\n                  </mat-option>\r\n                </mat-select>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.type.touched) && f.type.errors?.required\">\r\n                Schema Type is required!\r\n              </mat-error>\r\n            </div>\r\n        </div>         \r\n\r\n        <div class=\"row mb-3\" *ngIf=\"f.type.value === 'DISCOUNT' \">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Percentage</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Percentage\" maxlength=\"3\" formControlName=\"discountPercentage\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>%</span>\r\n                </mat-form-field>\r\n                <mat-error *ngIf=\"f.discountPercentage.errors?.max\">\r\n                    Discount Percentage cannot exceed 100%.\r\n                </mat-error>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Amount</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Amount\" maxlength=\"10\" formControlName=\"discountAmount\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix> ₹&nbsp;</span>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n            <!-- Display error for both fields having errors and at least one being touched or submitted -->\r\n            <div *ngIf=\"promotionForm.hasError('atLeastOneError') && submitted\" class=\"text-danger\">\r\n                Please fill at least one of Discounted Amount or Discount Percentage.\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"row mb-3\" *ngIf=\"f.type.value === 'FLAT'\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Minimum Bill Amount</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <span class=\"matSuffix\" matSuffix> ₹&nbsp;</span>\r\n                    <input matInput placeholder=\"Discount Percentage\" maxlength=\"10\" formControlName=\"minBillAmt\" (keypress)=\"numberOnly($event)\">\r\n                </mat-form-field>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Amount</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Amount\" maxlength=\"10\" formControlName=\"discountAmount\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix> ₹&nbsp;</span>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n            <!-- Display error for both fields having errors and at least one being touched or submitted -->\r\n            <div *ngIf=\"promotionForm.hasError('atLeastOneError') && submitted\" class=\"text-danger\">\r\n                Please fill at least one of Discounted Amount or Discount Percentage.\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row mb-3\" *ngIf=\"f.type.value !== 'FLAT'\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Buy Quantity<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Buy Quantity\" maxlength=\"5\" formControlName=\"buyQuantity\" (keypress)=\"numberOnly($event)\">\r\n                </mat-form-field>\r\n                <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.buyQuantity.touched) && f.buyQuantity.errors?.required\">\r\n                    Buy quantity is required!\r\n                </mat-error>\r\n            </div>\r\n\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Get Quantity<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <div style=\"display: inline-block;\">\r\n                        <input matInput placeholder=\"Get Quantity\" maxlength=\"5\" formControlName=\"getQuantity\" (keypress)=\"numberOnly($event)\">\r\n                    </div>\r\n                </mat-form-field>\r\n                <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.getQuantity.touched) && f.getQuantity.errors?.required\">\r\n                    Get quantity is required!\r\n                </mat-error>\r\n            </div>\r\n        </div>\r\n\r\n    </form>\r\n    <div class=\"row\" *ngIf=\"f.type.value === 'PRODUCT'\">\r\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n            <label class=\"form-label\">Products<span class=\"error-asterisk\">*</span></label>\r\n            <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <mat-select matNativeControl disableOptionCentering [(ngModel)]=\"selectedProductIds\" placeholder=\"Product\">\r\n                    <mat-option *ngFor=\"let product of productsIdList\" [value]=\"product.id\">\r\n                        {{ product.itemName }}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>          \r\n    </div>\r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { ProductService } from 'src/app/core/services/product.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\n\r\n@Component({\r\n  selector: 'app-assign-product-to-promotion',\r\n  templateUrl: './assign-product-to-promotion.component.html',\r\n  styleUrls: ['./assign-product-to-promotion.component.scss']\r\n})\r\nexport class AssignProductToPromotionComponent implements OnInit {\r\n\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  formBuilder: any;\r\n  promotionForm: any;\r\n  promotionId: any;\r\n  productsIdList: any;\r\n  selectedProductIds: string[] = [];\r\n\r\n  constructor(public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<AssignProductToPromotionComponent>,\r\n    private promotionService: PromotionService,\r\n    private productService: ProductService,) { \r\n      this.promotionId = this.data.promotionId;\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    this.getAllProductsAvailableForPromotion()\r\n  }\r\n\r\n  getAllProductsAvailableForPromotion() {\r\n    this.promotionService.getAllProductsAvailableForPromotion({\r\n      data: {}, \r\n      userId: this.currentUser.id, \r\n      page: 1, \r\n      size: 1000, \r\n      productType: 'GOODS'\r\n  }).then((res) => {\r\n      if(res.success) {\r\n        this.productsIdList = res.data.rows;\r\n      }\r\n    },(err) => {\r\n        if (err.error.status === 404) {\r\n            this.toastService.toastMsg({\r\n              title: 'Error',\r\n              content: 'Data Not Found!!!'\r\n            })\r\n        } else {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: this.titleCasePipe.transform(err.error.error_message)\r\n          })\r\n        }\r\n      });\r\n  }\r\n\r\n  onSave() {\r\n    const payload = {\r\n      promotionId: this.promotionId,\r\n      productArray: this.selectedProductIds.map(productId => ({ productId }))\r\n    };\r\n    if(this.selectedProductIds.length > 0) {\r\n      this.promotionService.assignProductsToPromotions(payload, this.currentUser.id)\r\n      .then((res) => {\r\n        if(res.success) {\r\n          this.toastService.toastMsg({\r\n            title: 'Success',\r\n            content: \"Selected products assigned Successfully!!!\"\r\n          })\r\n          this.dialogRef.close();\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if(error.status == 409) {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: \"The product shall be already assigned to another promotion\"\r\n          })\r\n        } else {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: this.titleCasePipe.transform(error.error.error_message)\r\n          })\r\n        }\r\n      });\r\n    } else {\r\n      this.toastService.toastMsg({\r\n        title: 'Error',\r\n        content: 'please select atleast one product'\r\n      })\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Assign Products</h1>\r\n    <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" (click)=\"cancel()\"></button>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <div class=\"row\">\r\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n            <label class=\"form-label\">Products</label>\r\n            <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <mat-select matNativeControl disableOptionCentering [(ngModel)]=\"selectedProductIds\" multiple placeholder=\"Product\">\r\n                    <mat-option *ngFor=\"let product of productsIdList\" [value]=\"product.id\">\r\n                        {{ product.itemName }}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>          \r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-footer\">\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" class=\"btn btn-save ms-2\" (click)=\"onSave()\">Assign</button>\r\n    </div>\r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\n\r\n@Component({\r\n  selector: 'app-counter-disc-modal',\r\n  templateUrl: './counter-disc-modal.component.html',\r\n  styleUrls: ['./counter-disc-modal.component.scss']\r\n})\r\nexport class CounterDiscModalComponent implements OnInit {\r\n  \r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  public promotionForm: any;\r\n  public submitted: boolean = false;\r\n  public today: Date;\r\n  types: string[] = ['DISCOUNT', 'PRODUCT', 'FLAT'];  // ['DISCOUNT', 'PRODUCT', 'FLAT', 'COUPONS'];\r\n  productsIdList: any;\r\n  selectedProductIds: string[] = [];\r\n  saveOn: boolean = true;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe,\r\n    // @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<CounterDiscModalComponent>,\r\n    private promotionService: PromotionService\r\n  ) {\r\n    this.today = new Date();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    try {\r\n      this.promotionForm = this.formBuilder.group({\r\n          counterDetails: new FormArray([]),\r\n        },\r\n      );\r\n      this.getCounterDiscountAmt()\r\n    } catch {\r\n\r\n    }\r\n  }\r\n\r\n  get f() {\r\n    return this.promotionForm.controls;\r\n  }\r\n\r\n  get counterDiscountControls() {\r\n    return this.promotionForm.get('counterDetails') as FormArray;\r\n  }\r\n  \r\n  getCounterDiscountAmt(){\r\n    this.promotionService.getCounterDiscountForm({}, this.currentUser.id).then(res => {\r\n      if(res.success) {\r\n        if(res.data.length > 0) {\r\n          this.saveOn = false\r\n        } else {\r\n          this.saveOn = true\r\n        }\r\n        let counterArr = res.data;\r\n        if (counterArr.length) {\r\n          for (let i = 0; i < counterArr.length; i++) {\r\n            this.counterDiscountControls.push(\r\n              new FormGroup({\r\n                minimum: new FormControl(counterArr[i].minimum),\r\n                maximum: new FormControl(counterArr[i].maximum),\r\n                percent: new FormControl(counterArr[i].percent),\r\n                id: new FormControl(counterArr[i].id),\r\n              })\r\n            )\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  createCounterDetails(): FormGroup {\r\n    return new FormGroup({\r\n      minimum: new FormControl(\"\", [Validators.required, this.minimumValidator(0)]),\r\n      maximum: new FormControl(\"\"),\r\n      percent: new FormControl(\"\",),\r\n    });\r\n  }\r\n  \r\n  addCounterDetails(): void {\r\n    const data = this.promotionForm.get('counterDetails') as FormArray;\r\n    data.push(this.createCounterDetails());\r\n  }\r\n  \r\n  deleteCounterDetails(index: number): void {\r\n    const data = this.promotionForm.get('counterDetails') as FormArray;\r\n    data.removeAt(index)\r\n  }\r\n\r\n  onSave() {\r\n    this.submitted = true;\r\n    console.log(this.promotionForm)\r\n    if (this.promotionForm.invalid) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Fill All Required Fields.\",\r\n      });\r\n      return false;\r\n    } else {\r\n      const arr = this.promotionForm.value.counterDetails\r\n      arr.forEach(item => item.userId = this.currentUser.id)\r\n      this.promotionService.counterDiscountForm({data : arr }).then( res => {\r\n        if(res.success) {\r\n          this.dialogRef.close();\r\n          this.commonService.notifyDataAdded()\r\n          this.toastService.toastMsg({\r\n            title: \"Success\",\r\n            content: \"Discount Addedd Successfully!!!\",\r\n          });\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  updateCounterDiscount(){\r\n    this.submitted = true;\r\n    console.log(this.promotionForm)\r\n    if (this.promotionForm.invalid) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Fill All Required Fields.\",\r\n      });\r\n      return false;\r\n    } else {\r\n      const arr = this.promotionForm.value.counterDetails\r\n      arr.forEach(item => item.userId = this.currentUser.id)\r\n      this.promotionService.updateCounterDiscount({data : arr }, this.currentUser.id).then( res => {\r\n        if(res.success) {\r\n          this.dialogRef.close();\r\n          this.commonService.notifyDataAdded()\r\n          this.toastService.toastMsg({\r\n            title: \"Success\",\r\n            content: \"Promotion Addedd Successfully!!!\",\r\n          });\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  setMinLength(index: number): number {\r\n    const controls = this.counterDiscountControls.controls;\r\n  \r\n    // Check if there is a previous row\r\n    if (index > 0) {\r\n      const prevMaximum = controls[index - 1].get('maximum').value;\r\n      return prevMaximum;\r\n    } else {\r\n      // If it's the first row, return an initial value (e.g., 0)\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  minimumValidator(index: number) {\r\n    return (control) => {\r\n      const controls = this.counterDiscountControls.controls;\r\n      const prevMaximum = index > 0 ? controls[index - 1].get('maximum').value : -Infinity;\r\n      const currentMinimum = control.value;\r\n      if (currentMinimum <= prevMaximum) {\r\n        return { minimumError: true };\r\n      } else {\r\n        return null;\r\n      }\r\n    };\r\n  }\r\n  \r\n}\r\n","<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Add Counter Discount</h1>\r\n\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" style=\"margin-right: 10px;\" class=\"btn btn-cancel\" (click)=\"cancel()\">Cancel</button>\r\n        <button *ngIf=\"saveOn\" type=\"button\" class=\"btn btn-save ms-2\" (click)=\"onSave()\">Save</button>\r\n        <button *ngIf=\"!saveOn\" type=\"button\" class=\"btn btn-save ms-2\" (click)=\"updateCounterDiscount()\">Update</button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <form [formGroup]=\"promotionForm\">\r\n        <div class=\"row mb-3\">\r\n              <!-- <div class=\"row\">\r\n                <div class=\"card-body p-0 m-2 col-12\">\r\n                    <div id=\"tableExample\">\r\n                        <div class=\"table-responsive\">\r\n                            <table class=\"table table-bordered table-striped fs--1 mb-0\">\r\n                                <thead class=\"text-900 text-center inner-model-table-heading\">\r\n                                    <tr>\r\n                                        <th class=\"p-2\">minimum</th>\r\n                                        <th class=\"p-2\">maximum</th>\r\n                                        <th class=\"p-2\">percent</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody class=\"list text-center\" id=\"table-customers-body\">\r\n                                    <ng-container formArrayName=\"counterDetails\" *ngFor=\"let group of counterDiscountControls.controls; let i = index\">\r\n                                        <tr [formGroupName]=\"i\">\r\n\r\n                                            <td>\r\n                                                <input matInput type=\"text\" formControlName=\"minimum\" />\r\n                                            </td>\r\n                                            <td>\r\n                                                <input matInput type=\"text\"\r\n                                                    ngxOnlyNumbers formControlName=\"maximum\" />\r\n                                            </td>\r\n                                            <td>\r\n                                                <input matInput type=\"text\" class=\"\" formControlName=\"percent\"\r\n                                                    (keyup.enter)=\"addCounterDetails()\" />\r\n                                            </td> \r\n                                        </tr>\r\n                                    </ng-container>\r\n                                </tbody>\r\n\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>  -->\r\n            <table class=\"mb-0\">\r\n                <thead class=\"text-900 text-center\">\r\n                    <tr>\r\n                        <th class=\"p-2\">Minimum</th>\r\n                        <th class=\"p-2\">Maximum</th>\r\n                        <th class=\"p-2\">Percent</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody class=\"list text-center\">\r\n                    <ng-container formArrayName=\"counterDetails\" *ngFor=\"let group of counterDiscountControls.controls; let i = index\">\r\n                        <tr [formGroupName]=\"i\">\r\n                            <td>\r\n                                <div class=\"row-container\">\r\n                                    <mat-form-field class=\"example-full-width input-padding\" appearance=\"outline\">\r\n                                        <input matInput matNativeControl formControlName=\"minimum\" placeholder=\"Minimum\" [min]=\"setMinLength(i)\"/>\r\n                                    </mat-form-field>\r\n                                    <mat-error *ngIf=\"group.get('minimum').hasError('minimumError')\" class=\"text-danger\">\r\n                                            Minimum must be greater than the previous Maximum.\r\n                                    </mat-error>\r\n                                </div>\r\n                            </td>\r\n                            <td>\r\n                                <mat-form-field class=\"example-full-width input-padding\" appearance=\"outline\">\r\n                                    <input matInput matNativeControl formControlName=\"maximum\" placeholder=\"Maximum\"/>\r\n                                </mat-form-field>\r\n                            </td>\r\n                            <td>\r\n                                <mat-form-field class=\"example-full-width input-padding\" appearance=\"outline\">\r\n                                    <input matInput matNativeControl formControlName=\"percent\" placeholder=\"Percentage\"/>\r\n                                    <span class=\"matSuffix\" matSuffix>%</span>\r\n                                </mat-form-field>\r\n                            </td>\r\n                            <td>\r\n                                <button mat-icon-button (click)=\"deleteCounterDetails(i)\">\r\n                                    <mat-icon>close</mat-icon>\r\n                                  </button>\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </tbody>\r\n            </table>\r\n\r\n            <div class=\"row d-flex justify-content-between\">\r\n                <div class=\"col-sm-12 col-md-9 col-lg-9\"></div>\r\n                <div class=\"col-sm-12 col-md-3 col-lg-3 text-nowrap mb-3\">\r\n                    <p class=\"text-nowrap\" (click)=\"addCounterDetails()\" style=\"color: #FC7643;\">\r\n                        <span id=\"boot-icon\" class=\"bi bi-plus-lg newrow\"></span>\r\n                        Add New Row\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\n\r\n@Component({\r\n  selector: 'app-coupon-modal',\r\n  templateUrl: './coupon-modal.component.html',\r\n  styleUrls: ['./coupon-modal.component.scss']\r\n})\r\nexport class CouponModalComponent implements OnInit {\r\n\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  public promotionForm: any;\r\n  public submitted: boolean = false;\r\n  public today: Date;\r\n  types: string[] = ['DISCOUNT', 'PRODUCT', 'FLAT'];  // ['DISCOUNT', 'PRODUCT', 'FLAT', 'COUPONS'];\r\n  productsIdList: any;\r\n  selectedProductIds: string[] = [];\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe,\r\n    // @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<CouponModalComponent>,\r\n    private promotionService: PromotionService\r\n  ) {\r\n    this.today = new Date();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    try {\r\n      this.promotionForm = this.formBuilder.group({\r\n        coupon_name: [null, Validators.required],\r\n        coupon_code: [null, Validators.required],\r\n        usage_limit: [null],\r\n        startDate: [null, Validators.required],\r\n        discountPercentage: [null, [Validators.min(0), Validators.max(100)]],\r\n        maxDiscountAmount: [null],\r\n        expiryDate: [null, Validators.required],\r\n        description: [null],\r\n      })\r\n    } catch (error) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: error\r\n        })\r\n    }\r\n  }\r\n  \r\n  get f() {\r\n    return this.promotionForm.controls;\r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  generateCoupon() {\r\n    this.promotionService.generateCoupon({}, this.currentUser.id).then((res) => {\r\n      if (res.success) {\r\n        this.promotionForm.patchValue({\r\n          coupon_code: res.data\r\n        })\r\n      }\r\n    }, (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: this.titleCasePipe.transform(err.error.error_message),\r\n        });\r\n      }\r\n      else {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: \"Something Went Wrong.\",\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  numberOnly(event): boolean {\r\n    const charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  numberDecimalOnly(event): boolean {\r\n    var charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode != 46 && charCode > 31\r\n      && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSave() {\r\n    this.submitted = true;\r\n    console.log(this.promotionForm)\r\n    if (this.promotionForm.invalid) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Fill All Required Fields.\",\r\n      });\r\n      return false;\r\n    } else {\r\n      const data = {\r\n        \"couponData\": {\r\n            \"coupon_code\": this.promotionForm.value.coupon_code.toUpperCase(),\r\n            \"coupon_name\": this.promotionForm.value.coupon_name,\r\n            \"discount_percentage\": this.promotionForm.value.discountPercentage,\r\n            \"start_date\": this.promotionForm.value.startDate,\r\n            \"end_date\": this.promotionForm.value.expiryDate,\r\n            \"is_valid\": true,\r\n            \"usage_limit\": this.promotionForm.value.usage_limit,\r\n            \"max_discount_amount\": this.promotionForm.value.maxDiscountAmount,\r\n            \"description\": this.promotionForm.value.description\r\n        }\r\n      }\r\n      this.promotionService.createCoupon(data, this.currentUser.id).then( res => {\r\n        if(res.success) {\r\n          this.dialogRef.close();\r\n          this.commonService.notifyDataAdded()\r\n          this.toastService.toastMsg({\r\n            title: \"Success\",\r\n            content: \"Coupon Addedd Successfully!!!\",\r\n          });\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  openDatepicker(dateType){\r\n    // Check if the current value of taskdate is an \"Invalid Date\"\r\n    if(dateType === 'startDate') {\r\n      const selectedDate = this.promotionForm.get('startDate').value;\r\n      if (isNaN(selectedDate.getTime())) {\r\n        // Set a default date or any valid date here\r\n        this.promotionForm.get('startDate').setValue(new Date());\r\n      }\r\n    } else if(dateType === 'expiryDate') {\r\n      const selectedDate = this.promotionForm.get('expiryDate').value;\r\n      if (isNaN(selectedDate.getTime())) {\r\n        // Set a default date or any valid date here\r\n        this.promotionForm.get('expiryDate').setValue(new Date());\r\n      }\r\n    }\r\n  }\r\n\r\n  calculateMinDate() {\r\n    const expiryDate = this.promotionForm.get('startDate').value;\r\n    // Assuming expiryDate is a valid Date object\r\n    if (expiryDate) {\r\n        const minDate = new Date(expiryDate);\r\n        minDate.setDate(minDate.getDate() + 1); // Setting the minimum date as one day after joining date\r\n        return minDate;\r\n    }\r\n    return null; // or you can set a default minDate if joiningDate is not set\r\n  }\r\n}\r\n","<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Create Coupons</h1>\r\n\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" style=\"margin-right: 10px;\" class=\"btn btn-cancel\" (click)=\"cancel()\">Cancel</button>\r\n        <button type=\"button\" class=\"btn btn-save ms-2\" (click)=\"onSave()\">Save</button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <form [formGroup]=\"promotionForm\">\r\n        <div class=\"row mb-3\">\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n              <label class=\"form-label\">Coupon Name<span class=\"error-asterisk\">*</span></label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Coupon Name\" maxlength=\"50\" formControlName=\"coupon_name\" required>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.coupon_name.touched) && f.coupon_name.errors?.required\">\r\n                Coupon name is required!\r\n              </mat-error>\r\n            </div>\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n              <label class=\"form-label\">Coupon Code<span class=\"error-asterisk\">*</span></label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput style=\"text-transform : uppercase\" placeholder=\"Coupon Code\" maxlength=\"8\" minlength=\"3\" formControlName=\"coupon_code\" required>\r\n                <span matSuffix>\r\n                  <a style=\"cursor: pointer; color: 110152;\" (click)=\"generateCoupon()\" matTooltip=\"Generate Coupon\">\r\n                    <i class=\"fas fa-sync-alt\"></i>\r\n                  </a>\r\n                </span>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.coupon_code.touched) && f.coupon_code.errors?.required\">\r\n                Coupon Code is required!\r\n              </mat-error>\r\n              <mat-error class=\"text-danger\" *ngIf=\"f.coupon_code.errors?.minlength\">\r\n                Coupon Code must be greater than 3 characters!\r\n              </mat-error>\r\n            </div>\r\n        </div>         \r\n\r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Percentage</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Percentage\" maxlength=\"3\" formControlName=\"discountPercentage\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>%</span>\r\n                </mat-form-field>\r\n                <mat-error *ngIf=\"f.discountPercentage.errors?.max\">\r\n                    Discount Percentage cannot exceed 100%.\r\n                </mat-error>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Upto</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Max Discount Amount\" maxlength=\"10\" formControlName=\"maxDiscountAmount\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>₹&nbsp;</span>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n        </div>\r\n        \r\n        <div class=\"row mb-3\">\r\n          <label class=\"form-label\">Description <span class=\"error-asterisk\">*</span></label>\r\n          <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n            <textarea matInput autocomplete=\"off\" formControlName=\"description\" rows=\"3\" maxlength=\"150\" placeholder=\"Description\">\r\n            </textarea>\r\n          </mat-form-field>\r\n        </div>\r\n        \r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Start date<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field style=\"font-size: 12px\" class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput bsDatepicker required placeholder=\"Start Date\" class=\"text-uppercase\" formControlName=\"startDate\"\r\n                      bsDatepicker [bsConfig]=\"{\r\n                        containerClass: 'theme-dark-blue',\r\n                        dateInputFormat: 'DD MMM YYYY',\r\n                        showWeekNumbers: false\r\n                      }\" [ngClass]=\"{\r\n                        'is-invalid':\r\n                          f.startDate.invalid && f.startDate.touched && submitted\r\n                      }\" (click)=\"openDatepicker('startDate')\" />\r\n                    <span>\r\n                      <mat-icon class=\"iconcalender\">date_range</mat-icon>\r\n                    </span>\r\n                  </mat-form-field>\r\n                  <mat-error class=\"text-danger\" *ngIf=\"\r\n                      (submitted || f.startDate.touched) &&\r\n                      f.startDate.errors?.required\r\n                    \">\r\n                    Start Date is Required!\r\n                  </mat-error>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Expiry Date<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field style=\"font-size: 12px\" class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput bsDatepicker placeholder=\"Expiry Date\" [minDate]=\"calculateMinDate()\"\r\n                      class=\"text-uppercase\" formControlName=\"expiryDate\" bsDatepicker required [bsConfig]=\"{\r\n                        containerClass: 'theme-dark-blue',\r\n                        dateInputFormat: 'DD MMM YYYY',\r\n                        showWeekNumbers: false,\r\n                        showOnFocus: true\r\n                      }\" (click)=\"openDatepicker('expiryDate')\" />\r\n                    <span>\r\n                      <mat-icon class=\"iconcalender\">date_range</mat-icon>\r\n                    </span>\r\n                  </mat-form-field>\r\n                  <mat-error class=\"text-danger\" *ngIf=\"\r\n                      (submitted || f.expiryDate.touched) &&\r\n                      f.expiryDate.errors?.required\r\n                    \">\r\n                    Expiry Date is Required!\r\n                  </mat-error>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Usage Limit</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Usage Limit\" maxlength=\"8\" formControlName=\"usage_limit\" (keypress)=\"numberOnly($event)\">\r\n                </mat-form-field>\r\n                <!-- <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.usage_limit.touched) && f.usage_limit.errors?.required\">\r\n                    Usage Limit is required!\r\n                </mat-error> -->\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </form>    \r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\nimport { CouponModalComponent } from '../coupon-modal/coupon-modal.component';\r\nimport { EditCouponComponent } from '../edit-coupon/edit-coupon.component';\r\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-coupon',\r\n  templateUrl: './coupon.component.html',\r\n  styleUrls: ['./coupon.component.scss']\r\n})\r\nexport class CouponComponent implements OnInit {\r\n\r\n  private searchSubject = new Subject<string>();\r\n  private searchSubscription: Subscription;\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  couponList: any[] = [];\r\n  excelFileUpload: any;\r\n  public currentpage: any;\r\n  public totalrow: any;\r\n  public toatlPages: any;\r\n  public currentPageNo: number = 0;\r\n  public partyPageSize: number = 5;\r\n  public pagesize: number = 1;\r\n  public count: number = 0;\r\n  promotionIdList: any[] = [];\r\n  selectedIdList: any[] = [];\r\n\r\n  public archiveIconfalse: boolean = false;\r\n  public checkSingleArray: any = [];\r\n  public isChecked: boolean = false;\r\n  public upiCheckedId = [];\r\n  public upiCheckedId1 = [];\r\n  public allSelect: boolean = false;\r\n  public checkSelect: boolean = false;\r\n\r\n  public checkSelectsingle: boolean = false;\r\n\r\n  public checkSelectsinglefalse: boolean = false;\r\n  public checkSelectsingletrue: boolean = false;\r\n  promotionId: any;\r\n  pageNumberDisplay: any[];\r\n  isLoading: boolean;\r\n  archivedPartyIds: any[];\r\n  unarchivedPartyIds: any[];\r\n  showUnarchiveButton: boolean;\r\n  showDeleteButton: boolean;\r\n  isdeletedParty: boolean;\r\n  selectedTypeFilter: string | null = null;\r\n  isFilterVisible: any;\r\n  @ViewChild('dropdown') dropdown: ElementRef;\r\n\r\n  constructor(public router: Router, public dialog: MatDialog, private commonService: CommonService,\r\n    public route: ActivatedRoute, private promotionService: PromotionService,\r\n    public toastService: ToastNotificationService,\r\n    private titleCasePipe: TitleCasePipe) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAllCoupons();\r\n    this.commonService.rowAdded$.subscribe(() => {\r\n      // Fetch the updated list of users\r\n      this.getAllCoupons();\r\n    });\r\n\r\n    this.searchSubscription = this.searchSubject\r\n      .pipe(debounceTime(800),\r\n        distinctUntilChanged(),\r\n        tap(() => {\r\n          this.isLoading = true; // Show the loader when the API call is initiated\r\n        })).subscribe(searchKey => {\r\n          // Call the API with the search key\r\n          if (searchKey.length >= 3) {\r\n            this.searchCoupon(searchKey.trim());\r\n          } else if (searchKey === '') {\r\n             this.isLoading = false; // Hide the loader if the search key is less than the threshold\r\n            this.getAllCoupons()\r\n          } else {\r\n            this.isLoading = false; // Hide the loader if the search key is less than the threshold\r\n          }\r\n        });\r\n    }\r\n\r\n  // @HostListener('document:click', ['$event'])\r\n  // onDocumentClick(event: Event): void {\r\n  //   // Check if the clicked element is outside the dropdown\r\n  //   if (!this.dropdown.nativeElement.contains(event.target as Node)) {\r\n  //     this.isFilterVisible = false;\r\n  //   }\r\n  // }\r\n\r\n  getAllCoupons() {\r\n    this.promotionService.getAllCoupons({}, this.currentUser.id).then((res) => {\r\n      if(res.success) {\r\n        this.couponList = res.data;\r\n        // this.currentPageNo = res.data.currentPage;\r\n        // this.totalrow = res.data.totalrows;\r\n        // this.toatlPages = res.data.totalPages\r\n      }\r\n    },\r\n    (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: this.titleCasePipe.transform(err.error.error_message),\r\n        });\r\n      }\r\n      else {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: \"Something Went Wrong.\",\r\n        });\r\n      }\r\n\r\n    }) \r\n  }\r\n\r\n  archhivePromotion(promotionId: string, isdeleted: boolean) {\r\n    this.promotionId = promotionId;\r\n    this.isdeletedParty = isdeleted;\r\n    this.selectedIdList.push(promotionId);\r\n  }\r\n\r\n  archiveSignlePromotion() {\r\n    if (this.isdeletedParty) {\r\n      this.promotionService.unArchiveMultiplePromotions({data: { unArchivePromotions: this.selectedIdList }, userId: this.currentUser.id}).then((res: any) => {\r\n        if (res.success) {\r\n          this.toastService.toastMsg({\r\n            title: 'Success',\r\n            content: \"Promotion Unarchived Successfully!!!\"\r\n          });\r\n\r\n          this.getAllCoupons();\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      this.promotionService.deleteMultiplePromotions({data: { archivePromotions: this.selectedIdList }, userId: this.currentUser.id}).then((res: any) => {\r\n        if (res.success) {\r\n          this.toastService.toastMsg({\r\n            title: 'Success',\r\n            content: \"Promotion Archived Successfully!!!\"\r\n          });\r\n          this.getAllCoupons();\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  onChekedsingleCheck(e, partyId) {\r\n    if (e.target.checked) {\r\n      this.promotionIdList.push(partyId);\r\n      this.checkSingleArray.push(e.target.value);\r\n    } else {\r\n      const index = this.promotionIdList.indexOf(partyId);\r\n      if (index !== -1) {\r\n        this.promotionIdList.splice(index, 1);\r\n        this.checkSingleArray.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    // Clear the archived and unarchived party IDs\r\n    this.archivedPartyIds = [];\r\n    this.unarchivedPartyIds = [];\r\n\r\n    // Update the archived and unarchived party IDs based on the selected parties\r\n    this.promotionIdList.forEach(partyId => {\r\n      const party = this.couponList.find(item => item.id === partyId);\r\n      if (party) {\r\n        if (party.isDeleted) {\r\n          this.archivedPartyIds.push(partyId);\r\n        } else {\r\n          this.unarchivedPartyIds.push(partyId);\r\n        }\r\n      }\r\n    })\r\n\r\n    // Check if all the selected parties are archived\r\n    const allArchived = this.promotionIdList.every(partyId => {\r\n      const party = this.couponList.find(item => item.id === partyId);\r\n      return party && party.isDeleted;\r\n    });\r\n\r\n    // Check if all the selected parties are unarchived\r\n    const allUnarchived = this.promotionIdList.every(partyId => {\r\n      const party = this.couponList.find(item => item.id === partyId);\r\n      return party && !party.isDeleted;\r\n    });\r\n\r\n    // if (allArchived && allUnarchived) {\r\n    if (this.archivedPartyIds.length > 0 && this.unarchivedPartyIds.length > 0) {\r\n      // Show an alert error message to the user\r\n      alert(\"Please select either archived or unarchived Promotions.\");\r\n      // Uncheck all the selected parties and header checkbox\r\n      this.promotionIdList = [];\r\n      this.checkSingleArray = [];\r\n      this.checkSelectsingle = false;\r\n      this.upiCheckedId = [];\r\n      this.isChecked = false;\r\n      this.allSelect = false;\r\n      this.checkSelect = false;\r\n      this.checkSelectsingle = false;\r\n\r\n      // Uncheck all the checkboxes in the template\r\n      const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\r\n      checkboxes.forEach((checkbox) => {\r\n        const inputElement = checkbox as HTMLInputElement;\r\n        inputElement.checked = false;\r\n      });\r\n\r\n    } else if (allArchived) {\r\n      console.log('Archived');\r\n      // Show unarchive button\r\n      this.showUnarchiveButton = true;\r\n      this.showDeleteButton = false;\r\n    } else if (allUnarchived) {\r\n      console.log('Unarchived');\r\n      // Show archive button\r\n      this.showDeleteButton = true;\r\n      this.showUnarchiveButton = false;\r\n    } else {\r\n      // Show error message or handle the case when there are both archived and unarchived parties selected\r\n      alert(\"Please select either archived or unarchived Promotions.\");\r\n      // Uncheck all the selected parties and header checkbox\r\n      this.promotionIdList = [];\r\n      this.checkSingleArray = [];\r\n      this.checkSelectsingle = false;\r\n      this.upiCheckedId = [];\r\n      this.isChecked = false;\r\n      this.allSelect = false;\r\n      this.checkSelect = false;\r\n      this.checkSelectsingle = false;\r\n      this.showDeleteButton = false;\r\n      this.showUnarchiveButton = false;\r\n\r\n      // Uncheck all the checkboxes in the template\r\n      const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\r\n      checkboxes.forEach((checkbox) => {\r\n        const inputElement = checkbox as HTMLInputElement;\r\n        inputElement.checked = false;\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  getSingleCheckedId(promotionId) {\r\n    this.promotionId = promotionId;\r\n  }\r\n\r\n  onChekMultiple($event) {\r\n    const isChecked = $event.target.checked;\r\n    if (isChecked) {\r\n      this.promotionIdList = this.couponList.map(item => item.id);\r\n    } else {\r\n      this.promotionIdList = [];\r\n      this.showDeleteButton = false;\r\n      this.showUnarchiveButton = false\r\n    }\r\n    this.checkSelect = isChecked; // Update the checkbox state in the header\r\n\r\n    let id = $event.target.value;\r\n    this.isChecked = $event.target.checked;\r\n    this.upiCheckedId = this.couponList.map((item) => {\r\n      if (id === -1) {\r\n        if (this.isChecked == true) {\r\n          this.checkSelectsingle = true;\r\n          return item.id;\r\n        }\r\n        else {\r\n          this.checkSelectsingle = false;\r\n          this.upiCheckedId = [];\r\n        }\r\n      }\r\n    })\r\n    // Clear the archived and unarchived party IDs\r\n    this.archivedPartyIds = [];\r\n    this.unarchivedPartyIds = [];\r\n\r\n    // Update the archived and unarchived party IDs based on the selected parties\r\n    this.promotionIdList.forEach(partyId => {\r\n      const party = this.couponList.find(item => item.id === partyId);\r\n      if (party) {\r\n        if (party.isDeleted) {\r\n          this.archivedPartyIds.push(partyId);\r\n        } else {\r\n          this.unarchivedPartyIds.push(partyId);\r\n        }\r\n      }\r\n\r\n      // Check if all the selected parties are archived\r\n      const allArchived = this.promotionIdList.every(partyId => {\r\n        const party = this.couponList.find(item => item.id === partyId);\r\n        return party && party.isDeleted;\r\n      });\r\n      // Check if all the selected parties are unarchived\r\n      const allUnarchived = this.promotionIdList.every(partyId => {\r\n        const party = this.couponList.find(item => item.id === partyId);\r\n        return party && !party.isDeleted;\r\n      });\r\n\r\n      if (allArchived) {\r\n        // Show unarchive button\r\n        this.showUnarchiveButton = true\r\n        this.showDeleteButton = false;\r\n      } else if (allUnarchived) {\r\n        // Show archive button\r\n        this.showDeleteButton = true;\r\n        this.showUnarchiveButton = false\r\n      } else {\r\n        // Show error message or handle the case when there are both archived and unarchived parties selected\r\n      }\r\n    });\r\n\r\n    if (this.archivedPartyIds.length > 0 && this.unarchivedPartyIds.length > 0) {\r\n      alert(\"Please select either archived or unarchived Promotions\");\r\n      // Uncheck all the selected parties and header checkbox\r\n      this.promotionIdList = [];\r\n      this.checkSingleArray = [];\r\n      this.checkSelectsingle = false;\r\n      this.upiCheckedId = [];\r\n      this.isChecked = false;\r\n      this.allSelect = false;\r\n      this.checkSelect = false;\r\n      this.checkSelectsingle = false;\r\n\r\n      // Uncheck all the checkboxes in the template\r\n      const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\r\n      checkboxes.forEach((checkbox) => {\r\n        const inputElement = checkbox as HTMLInputElement;\r\n        inputElement.checked = false;\r\n      });\r\n\r\n      // Throw an error to prevent further processing\r\n      this.toastService.toastMsg({\r\n        title: 'Warning',\r\n        content: 'Please select either archived or unarchived Promotions'\r\n      })\r\n      throw new Error(\"Please select either archived or unarchived Promotions\");\r\n    }\r\n  }\r\n\r\n  getUPIcheckId(promotionId) {\r\n    this.promotionId = promotionId;\r\n  }\r\n\r\n  archiveMultiplePromotion() {\r\n    if (this.currentPageNo === 1) {\r\n      this.currentPageNo = this.currentPageNo;\r\n    }\r\n    else {\r\n      if (this.toatlPages > this.currentPageNo) {\r\n        this.currentPageNo = this.currentPageNo - 1;\r\n      }\r\n    }\r\n    const requestBody = {\r\n      archivePromotions: this.promotionIdList\r\n    };\r\n\r\n    this.promotionService.deleteMultiplePromotions({ data: requestBody, userId: this.currentUser.id }).then((result: any) => {\r\n      if (result.success) {\r\n        this.getAllCoupons();\r\n        this.toastService.toastMsg({\r\n          title: 'Success',\r\n          content: \"Promotion Archived Successfully!!!\"\r\n        });\r\n\r\n        this.showDeleteButton = false;\r\n        this.showUnarchiveButton = false\r\n        this.promotionIdList = []; // Clear the selected party IDs after deletion\r\n        this.checkSelect = false // Reset the checkbox state in the header\r\n      }\r\n    }, (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: this.titleCasePipe.transform(err.error.error_message)\r\n        });\r\n      } else {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: \"Something Went Wrong.\"\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  showDeleteButtonFunc(): boolean {\r\n    return this.unarchivedPartyIds.length > 0;\r\n  }\r\n\r\n  unArchiveMultiplePromotion() {\r\n    const requestBody = {\r\n      unArchivePromotions: this.promotionIdList\r\n    };\r\n    this.promotionService.unArchiveMultiplePromotions({data: requestBody, userId: this.currentUser.id}).then((result: any) => {\r\n      if (result.success) {\r\n        this.getAllCoupons();\r\n        this.toastService.toastMsg({\r\n          title: 'Success',\r\n          content: \"Promotion Unarchived Successfully!!!\"\r\n        });\r\n        this.showDeleteButton = false;\r\n        this.showUnarchiveButton = false\r\n        this.promotionIdList = []; // Clear the selected party IDs after unarchiving\r\n        this.checkSelect = false; // Reset the checkbox state in the header\r\n      }\r\n    }, (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: this.titleCasePipe.transform(err.error.error_message)\r\n        });\r\n      } else {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: \"Something Went Wrong.\"\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  searchCoupon(searchKey: string) {\r\n    setTimeout(() => {\r\n      if (searchKey.trim() === '') {\r\n        this.getAllCoupons();\r\n        this.isLoading = false; \r\n      } else {\r\n        this.isLoading = false; \r\n        this.couponList = this.couponList.filter(item => {\r\n          return (\r\n            (item.coupon_name && item.coupon_name.toLowerCase().includes(searchKey.toLowerCase())) ||\r\n            (item.coupon_code && item.coupon_code.toLowerCase().includes(searchKey.toLowerCase()))\r\n          );\r\n        });\r\n        if(this.couponList.length === 0){\r\n          this.isLoading = false; \r\n          this.toastService.toastMsg({\r\n            title: \"Error\",\r\n            content: searchKey + \" Is Not Found\",\r\n          });\r\n        }\r\n      }\r\n    this.isLoading = false; // Hide the loader after the API call is completed\r\n    }, 500);\r\n  }\r\n\r\n\r\n  onSearchInputChange(searchKey: string) {\r\n    console.log(searchKey);\r\n    // Emit the search key to the searchSubject\r\n    this.searchSubject.next(searchKey.trim());\r\n  }\r\n\r\n  handleInputChange(e) {\r\n    this.excelFileUpload = e.target.files[0];\r\n    const pattern = /\\.(xlsx|xls)$/i; // Pattern to match \".xlsx\" or \".xls\" extension\r\n    if (!pattern.test(this.excelFileUpload.name)) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Invalid Format. Please Select An Excel File.\",\r\n      });\r\n      return;\r\n    }\r\n    if (this.excelFileUpload) {\r\n      let formdata = new FormData();\r\n      formdata.set(\"file\", this.excelFileUpload)\r\n      // this.truckOwnerService.postBulkowner(formdata, this.currentUser.id).then((res) => {\r\n      //   this.toastService.toastMsg({\r\n      //     title: \"Success\",\r\n      //     content: \"Excel Uploaded Successfully\",\r\n      //   });\r\n      //   this.getAllCoupons();\r\n      // }, (err) => {\r\n      //   if (err.error.expose) {\r\n      //     this.toastService.toastMsg({\r\n      //       title: \"Error\",\r\n      //       content: this.titleCasePipe.transform(err.error.error_message),\r\n      //     });\r\n      //   }\r\n      //   else if (err.error.status == \"409\" && err.error.expose == false) {\r\n      //     this.toastService.toastMsg({\r\n      //       title: \"Error\",\r\n      //       content: \"List Of Consignments Already Exists\",\r\n      //     });\r\n      //   }\r\n      //   else {\r\n      //     this.toastService.toastMsg({\r\n      //       title: \"Error\",\r\n      //       content: \"Something Went Wrong.\",\r\n      //     });\r\n      //   }\r\n      // });\r\n    }\r\n  }\r\n\r\n  startUpload() {\r\n    var uploadInput = document.getElementById('uploadFile');\r\n    if (uploadInput) {\r\n      var event = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: false,\r\n        cancelable: true\r\n      });\r\n      uploadInput.dispatchEvent(event);\r\n    } else {\r\n      this.toastService.toastMsg({\r\n        title: 'Error',\r\n        content: \"Upload element not found\"\r\n      });\r\n    }\r\n  }\r\n\r\n  public handlePage(e: any) {\r\n    this.currentPageNo = e.pageIndex;\r\n    this.pagesize = e.pageSize;\r\n\r\n    if (this.couponList.length > 0) {\r\n      // if (this.searchKey !== '') {\r\n      //   this.partyPageSize = e.pageSize;\r\n      //   this.searchConsignment(this.searchKey);\r\n      // } else {\r\n        this.partyPageSize = e.pageSize;\r\n        this.getAllCoupons();\r\n      // }\r\n    }\r\n  }\r\n    \r\n  couponsModal(): void {\r\n    const dialogRef: MatDialogRef<CouponModalComponent> = this.dialog.open(CouponModalComponent, {\r\n      width: '650px',\r\n      height: \"100vh\",\r\n      data: {},\r\n      disableClose: true,\r\n      position: {\r\n        right: '0',\r\n      },\r\n    });\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      console.log(`Dialog result: ${result}`);\r\n    });\r\n  }\r\n\r\n  // assignProduct(promotionId): void {\r\n  //   const dialogRef: MatDialogRef<AssignProductToPromotionComponent> = this.dialog.open(AssignProductToPromotionComponent, {\r\n  //     width: 'auto',\r\n  //     height: \"auto\",\r\n  //     data: { promotionId: promotionId},\r\n  //     disableClose: true,\r\n  //   });\r\n  //   dialogRef.afterClosed().subscribe((result) => {\r\n  //     console.log(`Dialog result: ${result}`);\r\n  //   });\r\n  // }\r\n\r\n  editCouponModal(couponData) {\r\n    const dialogRef: MatDialogRef<EditCouponComponent> = this.dialog.open(EditCouponComponent, {\r\n      width: '700px',\r\n      height: '100vh',\r\n      data: { couponData: couponData },\r\n      disableClose: true,\r\n      position: {\r\n        right: '0',\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      console.log(`Dialog result: ${result}`);\r\n    });\r\n  }\r\n\r\n  isActive(couponData, isActive) {\r\n    const newStatus = !isActive; // Toggle between '1' and '0'\r\n    const data = {\r\n      couponId: couponData.id,\r\n      couponData: {\r\n          coupon_code: couponData.coupon_code,\r\n          coupon_name: couponData.coupon_name,\r\n          discount_percentage: couponData.discount_percentage,\r\n          start_date: couponData.start_date,\r\n          end_date: couponData.end_date,\r\n          \"is_valid\": newStatus,\r\n          usage_limit: couponData.usage_limit,\r\n          max_discount_amount: couponData.max_discount_amount\r\n      }\r\n    }\r\n    this.promotionService.updateCoupon(data, this.currentUser.id)\r\n      .then( res => {\r\n        if (res.success) {\r\n          if (newStatus) {\r\n            this.toastService.toastMsg({\r\n              title: \"Success\",\r\n              content: \"Status Has Changed To Active\",\r\n            });\r\n            this.getAllCoupons()\r\n          } else {\r\n            this.toastService.toastMsg({\r\n              title: \"Success\",\r\n              content: \"Status Has Changed To Inactive\",\r\n            });\r\n            this.getAllCoupons()\r\n          }\r\n        }\r\n      },(err) => {\r\n          if (err.error.status === 404) {\r\n              this.toastService.toastMsg({\r\n                title: 'Error',\r\n                content: \"Data Not Found!!!\"\r\n              })\r\n          } else {\r\n            this.toastService.toastMsg({\r\n              title: 'Error',\r\n              content: this.titleCasePipe.transform(err.error.error_message)\r\n            })\r\n          }\r\n      })\r\n      .catch((error) => {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: this.titleCasePipe.transform(error.error.error_message)\r\n        })\r\n      });\r\n  }\r\n\r\n  // Add a method to update the filter value\r\n  updateTypeFilter(filterValue: string | null) {\r\n    if(filterValue === 'ALL') {\r\n      this.selectedTypeFilter = null;\r\n    } else {\r\n      this.selectedTypeFilter = filterValue;\r\n    }\r\n  }\r\n\r\n  toggleFilter() {\r\n    this.isFilterVisible = !this.isFilterVisible;\r\n  }\r\n\r\n  closeDropdown() {\r\n    this.isFilterVisible = false;\r\n  }\r\n\r\n}\r\n","<div *ngIf=\"isLoading\" class=\"loader-container\">\r\n    <div class=\"loader\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"container-fluid bg-white p-0\">\r\n    <div class=\"row headerButtons mb-3\" id=\"showoptionHide\">\r\n        <div class=\"flex-item searchBar\">\r\n            <input type=\"search\" id=\"searchInput\" class=\"search-form-control pe-5 my-2\" placeholder=\"Search...\"\r\n                (input)=\"onSearchInputChange($event.target.value)\" />\r\n        </div>\r\n        <div class=\"navOption-btns flex-item formButtons mx-0\">\r\n            <button id=\"saleButtonPrint1\" class=\"btn text-nowrap my-2\" type=\"button\" (click)=\"couponsModal()\">\r\n                <i class=\"fas fa-plus me-2\"> </i>Coupons&nbsp;&nbsp;&nbsp;\r\n            </button>                        \r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"table-container overflow-visible\">\r\n        <div class=\"table-div\" style=\"overflow-x: scroll\">\r\n            <table class=\"table table-responsive\">\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-nowrap\" style=\"\r\n                display: flex;\r\n                justify-content: flex-start;\r\n                align-items: center;\r\n              \">\r\n                            <input type=\"checkbox\" class=\"form-check-input\" (change)=\"onChekMultiple($event)\"\r\n                                [value]=\"-1\" [checked]=\"\r\n                  promotionIdList.length === couponList.length\r\n                \" [(ngModel)]=\"allSelect\" />\r\n                            <div class=\"d-flex align-items-center\">\r\n                                <span *ngIf=\"showDeleteButton\">\r\n                                    <button *ngIf=\"checkSingleArray.length > 0 || isChecked\" class=\"btn\"\r\n                                        data-bs-toggle=\"modal\" data-bs-target=\"#errorArchiveSelect-modal\"\r\n                                        style=\"padding-top: 15px\">\r\n                                        <span *ngIf=\"checkSingleArray.length > 0 || isChecked\"\r\n                                            class=\"material-icons icon-color iconFontSize\" data-bs-toggle=\"tooltip\"\r\n                                            style=\"color: #fc7643\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\"\r\n                                            title=\"Archive\" (click)=\"\r\n                        upiCheckedId.length > 0\r\n                          ? getUPIcheckId(upiCheckedId)\r\n                          : getSingleCheckedId(checkSingleArray)\r\n                      \">archive\r\n                                        </span>\r\n                                    </button>\r\n                                </span>\r\n                                <span *ngIf=\"showUnarchiveButton\">\r\n                                    <button *ngIf=\"checkSingleArray.length > 0 || isChecked\" class=\"btn\"\r\n                                        data-bs-toggle=\"modal\" data-bs-target=\"#errorUnarchiveSelect-modal\"\r\n                                        style=\"padding-top: 15px\">\r\n                                        <span *ngIf=\"checkSingleArray.length > 0 || isChecked\"\r\n                                            class=\"material-icons icon-color iconFontSize\" data-bs-toggle=\"tooltip\"\r\n                                            style=\"color: #fc7643\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\"\r\n                                            title=\"Unrchive\" (click)=\"\r\n                        upiCheckedId.length > 0\r\n                          ? getUPIcheckId(upiCheckedId)\r\n                          : getSingleCheckedId(checkSingleArray)\r\n                      \">unarchive\r\n                                        </span>\r\n                                    </button>\r\n                                </span>\r\n                            </div>\r\n                        </th>\r\n                        <th class=\"text-nowrap\">Coupon Name</th>\r\n                        <th class=\"text-nowrap\">Coupon Code</th>\r\n                        <th class=\"text-nowrap\">Discount Percentage</th>\r\n                        <th class=\"text-nowrap\" style=\"text-align: right;\">Maximum Discount Amount</th>\r\n                        <th class=\"text-nowrap\">Start Date</th>\r\n                        <th class=\"text-nowrap\">Expiry Date</th>\r\n                        <th class=\"text-nowrap\">Upto Users</th>\r\n                        <th class=\"text-nowrap\"></th>\r\n                        <th class=\"text-nowrap\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <ng-container *ngFor=\"let item of couponList; let i = index\">\r\n                        <tr style=\"color: #676398 !important\"\r\n                            [ngStyle]=\"{ 'background-color': item.isDeleted ? '#c7c2de' : i % 2 === 0 ? '#ffffff' : '#f2f2f2' }\"\r\n                            *ngIf=\"selectedTypeFilter === null || item.type === selectedTypeFilter\">\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                <input class=\"form-check-input\" type=\"checkbox\" [ngClass]=\"{\r\n                    'custom-checkbox': !item.isDeleted,\r\n                    'custom-checkbox deleted': item.isDeleted\r\n                    }\" [checked]=\"promotionIdList.includes(item.id)\" (change)=\"onChekedsingleCheck($event, item.id)\"\r\n                                    [value]=\"item.id\" />\r\n                            </td>\r\n                            <td class=\"long-name\" style=\"vertical-align: middle\">\r\n                                {{ item?.coupon_name }}\r\n                            </td><td class=\"long-name\" style=\"vertical-align: middle\">\r\n                                {{ item?.coupon_code }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle;\">\r\n                                {{ item?.discount_percentage ? (item?.discount_percentage | number:'1.2-2') + ' %' : 0 }}\r\n                            </td>\r\n                            <td class=\"text-nowrap \" style=\"vertical-align: middle ;text-align : right;\">\r\n                                ₹&nbsp;  {{ item?.max_discount_amount ? item.max_discount_amount : '0' }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.end_date | date:\"dd MMM YYYY\" | uppercase }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.end_date | date:\"dd MMM YYYY\" | uppercase }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.usage_limit }}\r\n                            </td>\r\n                            <td class=\"text-nowrap varticalAlign\">\r\n                                <div class=\"\">\r\n                                    <button class=\"toggle-button\" (click)=\"isActive(item, item.is_valid)\"\r\n                                        [ngClass]=\"{'active': item.is_valid, 'inactive': !item.is_valid}\">\r\n                                        <div class=\"toggle-slider\"></div>\r\n                                    </button>\r\n                                </div>\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"text-align: center; vertical-align: middle\">\r\n                                <div>\r\n                                    <!-- <button class=\"btn\">\r\n                                        <span class=\"bi bi-eye icon-color iconFontSize ps-2\" (click)=\"viewConsignmentModal(item.id)\" data-bs-toggle=\"tooltip\"\r\n                                        data-bs-placement=\"top\" title=\"View\"></span>\r\n                                    </button> -->\r\n\r\n                                    <button class=\"btn\">\r\n                                        <span class=\"bi-pencil-square icon-color iconFontSize ps-2\"\r\n                                            (click)=\"editCouponModal(item)\" data-bs-toggle=\"tooltip\"\r\n                                            data-bs-placement=\"top\" title=\"Edit\"></span>\r\n                                    </button>\r\n\r\n                                    <button class=\"btn mt-2\" data-bs-toggle=\"modal\" data-bs-target=\"#errorDelete-modal\">\r\n                                        <span class=\"material-icons icon-color iconFontSize\" data-bs-toggle=\"tooltip\"\r\n                                            style=\"color: #fc7643\" (click)=\"archhivePromotion(item.id, item.isDeleted)\"\r\n                                            data-bs-placement=\"top\" [title]=\"item.isDeleted ? 'Unarchive' : 'Archive'\">{{\r\n                                            item.isDeleted ? \"unarchive\" : \"archive\" }}</span>\r\n                                    </button>\r\n                                </div>\r\n                            </td>\r\n                            <!-- <td class=\"text-nowrap\" style=\"text-align: center; vertical-align: middle\"></td> -->\r\n\r\n                        </tr>\r\n                    </ng-container>\r\n                </tbody>\r\n                <tbody *ngIf=\"couponList.length === 0\">\r\n                    <tr class=\"text-center\">\r\n                        <td colspan=\"10\">\r\n                            <img class=\"image-responsive\"\r\n                                src=\"../../../assets/img/icons/spot-illustrations/notfound1.png\" alt=\"notfound1\"\r\n                                width=\"200\" height=\"150\" />\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- <mat-paginator sticky class=\"float-right mt-2\" *ngIf=\"couponList.length > 0\"\r\n                [pageSize]=\"partyPageSize\" [pageSizeOptions]=\"[5, 10, 20, 30]\" [length]=\"totalrow\"\r\n                [pageIndex]=\"currentPageNo\" showFirstLastButtons (page)=\"handlePage($event)\" aria-label=\"Select page\">\r\n            </mat-paginator> -->\r\n        </div>\r\n\r\n        <!-- Ṃultiple Unarchive -->\r\n        <div class=\"modal fade\" id=\"errorUnarchiveSelect-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 class=\"mb-1 text-center font-weight-bold\" style=\"font-weight: 800\"\r\n                                id=\"modalExampleDemoLabel\">\r\n                                <i class=\"fa fa-unlock-alt\" aria-hidden=\"true\"></i> Unarchive\r\n                                Promotions?\r\n                            </h2>\r\n                        </div>\r\n                        <h4 *ngIf=\"isChecked\" class=\"text-center\">\r\n                            Are you sure to unarchive all Promotions?\r\n                        </h4>\r\n                        <h4 *ngIf=\"!isChecked\" class=\"text-center\">\r\n                            Are you sure to unarchive all selected Promotions?\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a *ngIf=\"isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"unArchiveMultiplePromotion()\">Unarchive</a>\r\n                        <a *ngIf=\"!isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"unArchiveMultiplePromotion()\">Unarchive</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Ṃultiple Archive -->\r\n        <div class=\"modal fade\" id=\"errorArchiveSelect-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 class=\"mb-1 text-center font-weight-bold\" style=\"font-weight: 800\"\r\n                                id=\"modalExampleDemoLabel\">\r\n                                <i class=\"fa fa-lock-alt\" aria-hidden=\"true\"></i> Archive\r\n                                Promotions?\r\n                            </h2>\r\n                        </div>\r\n                        <h4 *ngIf=\"isChecked\" class=\"text-center\">\r\n                            Are you sure to archive all Promotions?\r\n                        </h4>\r\n                        <h4 *ngIf=\"!isChecked\" class=\"text-center\">\r\n                            Are you sure to archive all selected Promotions?\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a *ngIf=\"isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"archiveMultiplePromotion()\">Archive</a>\r\n                        <a *ngIf=\"!isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"archiveMultiplePromotion()\">Archive</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Signle archive  -->\r\n        <div class=\"modal fade\" id=\"errorDelete-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 *ngIf=\"!isdeletedParty\" class=\"mb-1 text-center font-weight-bold\"\r\n                                style=\"font-weight: 800\" id=\"modalExampleDemoLabel\">\r\n                                Archive Promotion?\r\n                            </h2>\r\n                            <h2 *ngIf=\"isdeletedParty\" class=\"mb-1 text-center font-weight-bold\"\r\n                                style=\"font-weight: 800\" id=\"modalExampleDemoLabel\">\r\n                                Unarchive Promotion?\r\n                            </h2>\r\n                        </div>\r\n                        <h4 class=\"text-center\" *ngIf=\"!isdeletedParty\">\r\n                            Are You Sure To Archive Promotions?\r\n                        </h4>\r\n                        <h4 class=\"text-center\" *ngIf=\"isdeletedParty\">\r\n                            Are You Sure To Unarchive Promotions?\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a class=\"btn btn-outline-danger\" *ngIf=\"!isdeletedParty\" (click)=\"archiveSignlePromotion()\"\r\n                            data-bs-dismiss=\"modal\">Archive\r\n                        </a>\r\n                        <a *ngIf=\"isdeletedParty\" class=\"btn btn-outline-warning\" (click)=\"archiveSignlePromotion()\"\r\n                            data-bs-dismiss=\"modal\">Unarchive\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Flat Discount Modal -->\r\n        <div class=\"modal fade\" id=\"flatDiscount-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 class=\"mb-1 text-center font-weight-bold\"\r\n                                style=\"font-weight: 800\" id=\"modalExampleDemoLabel\">\r\n                                Flat Discount\r\n                            </h2>\r\n                        </div>\r\n                        <h4 class=\"text-center\">\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a class=\"btn btn-outline-danger\"\r\n                            data-bs-dismiss=\"modal\">Save\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport * as moment from 'moment';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-coupon',\r\n  templateUrl: './edit-coupon.component.html',\r\n  styleUrls: ['./edit-coupon.component.scss']\r\n})\r\nexport class EditCouponComponent implements OnInit {\r\n\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  public submitted: boolean = false;\r\n  promotionForm: any;\r\n  couponData: any;\r\n  public maxDate: Date;\r\n  currentPageNo: any;\r\n  promotionList: any;\r\n  totalrow: any;\r\n  toatlPages: any;\r\n  selectedProductIds: string[] = [];\r\n  selectedFreeProductIds: string[] = [];\r\n  types: string[] = ['DISCOUNT', 'PRODUCT', 'FLAT'];   //['DISCOUNT', 'PRODUCT', 'FLAT', 'COUPONS'];\r\n  productsIdList: any[] = [];\r\n  freeProductData: any;\r\n  \r\n  constructor(public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe, private formBuilder: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<EditCouponComponent>,\r\n    private promotionService: PromotionService) { \r\n      this.couponData = this.data.couponData;\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    try {\r\n      this.promotionForm = this.formBuilder.group({\r\n        coupon_name: [null, Validators.required],\r\n        coupon_code: [null, Validators.required],\r\n        usage_limit: [null],\r\n        startDate: [null, Validators.required],\r\n        discountPercentage: [null, [Validators.min(0), Validators.max(100)]],\r\n        maxDiscountAmount: [null],\r\n        expiryDate: [null, Validators.required],\r\n        description: [null],\r\n      })\r\n      this.getCouponData()\r\n\r\n    } catch (error) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: error\r\n        })\r\n    }\r\n  }\r\n\r\n  get f() {\r\n    return this.promotionForm.controls;\r\n  }\r\n\r\n  generateCoupon() {\r\n    this.promotionService.generateCoupon({}, this.currentUser.id).then((res) => {\r\n      if (res.success) {\r\n        this.promotionForm.patchValue({\r\n          coupon_code: res.data\r\n        })\r\n      }\r\n    }, (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: this.titleCasePipe.transform(err.error.error_message),\r\n        });\r\n      }\r\n      else {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: \"Something Went Wrong.\",\r\n        });\r\n      }\r\n    })\r\n  }\r\n  \r\n  getCouponData() {\r\n    // this.promotionService.getPromotionById({}).then((res) => {\r\n    //   if(res.success) {\r\n    //     this.promotionList = res.data;\r\n        this.promotionForm.patchValue({\r\n          coupon_code: this.couponData.coupon_code,\r\n          usage_limit: this.couponData.usage_limit,\r\n          coupon_name: this.couponData.coupon_name,\r\n          discountPercentage: this.couponData?.discount_percentage,\r\n          maxDiscountAmount: this.couponData?.max_discount_amount,\r\n          description: this.couponData?.description,\r\n          expiryDate: this.couponData.end_date ? (moment(this.couponData.end_date).format(\"DD-MMM-YYYY\")) : (moment(this.maxDate).format(\"DD-MMM-YYYY\")),\r\n          startDate: this.couponData.start_date ? (moment(this.couponData.start_date).format(\"DD-MMM-YYYY\")) : (moment(this.maxDate).format(\"DD-MMM-YYYY\")),\r\n        })\r\n    //     // If you have product data, then fetching the whole product data into the array list\r\n    //     this.productsIdList = res.data.products;\r\n    //     this.freeProductData = res.data.freeProduct;\r\n\r\n    //     // Add product Id into the selectedProductIds array for each product\r\n    //     for (const product of this.productsIdList) {\r\n    //       this.selectedProductIds.push(product.id)\r\n    //     }\r\n        \r\n    //   }\r\n    //   },(err) => {\r\n    //     if (err.error.status === 404) {\r\n    //         this.toastService.toastMsg({\r\n    //           title: 'Error',\r\n    //           content: \"Data Not Found!!!\"\r\n    //         })\r\n    //     } else {\r\n    //       this.toastService.toastMsg({\r\n    //         title: 'Error',\r\n    //         content: this.titleCasePipe.transform(err.error.error_message)\r\n    //       })\r\n    //     }\r\n    //   });\r\n  }\r\n\r\n  \r\n  numberOnly(event): boolean {\r\n    const charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSave() {\r\n    this.submitted = true;\r\n    console.log(this.promotionForm)\r\n    if (this.promotionForm.invalid) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Fill All Required Fields.\",\r\n      });\r\n      return false;\r\n    } else {\r\n      const data = {\r\n        couponId: this.couponData.id,\r\n        couponData: {\r\n            coupon_code: this.promotionForm.value.coupon_code.toUpperCase(),\r\n            coupon_name: this.promotionForm.value.coupon_name,\r\n            discount_percentage: this.promotionForm.value.discountPercentage,\r\n            start_date: this.promotionForm.value.startDate,\r\n            end_date: this.promotionForm.value.expiryDate,\r\n            // \"is_valid\": true,\r\n            usage_limit: this.promotionForm.value.usage_limit,\r\n            max_discount_amount: this.promotionForm.value.maxDiscountAmount,\r\n            description: this.promotionForm.value.description\r\n        }\r\n      }\r\n      this.promotionService.updateCoupon(data, this.currentUser.id)\r\n        .then( res => {\r\n          if(res.success) {\r\n            this.dialogRef.close();\r\n            this.commonService.notifyDataAdded()\r\n            this.toastService.toastMsg({\r\n              title: \"Success\",\r\n              content: \"Coupon Updated Successfully!!!\",\r\n            });\r\n          }\r\n        },(err) => {\r\n            if (err.error.status === 404) {\r\n                this.toastService.toastMsg({\r\n                  title: 'Error',\r\n                  content: \"Data Not Found!!!\"\r\n                })\r\n            } else {\r\n              this.toastService.toastMsg({\r\n                title: 'Error',\r\n                content: this.titleCasePipe.transform(err.error.error_message)\r\n              })\r\n            }\r\n        });\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openDatepicker(dateType){\r\n    // Check if the current value of taskdate is an \"Invalid Date\"\r\n    if(dateType === 'startDate') {\r\n      const selectedDate = this.promotionForm.get('startDate').value;\r\n      if (isNaN(selectedDate.getTime())) {\r\n        // Set a default date or any valid date here\r\n        this.promotionForm.get('startDate').setValue(new Date());\r\n      }\r\n    } else if(dateType === 'expiryDate') {\r\n      const selectedDate = this.promotionForm.get('expiryDate').value;\r\n      if (isNaN(selectedDate.getTime())) {\r\n        // Set a default date or any valid date here\r\n        this.promotionForm.get('expiryDate').setValue(new Date());\r\n      }\r\n    }\r\n  }\r\n\r\n  calculateMinDate() {\r\n    const expiryDate = this.promotionForm.get('startDate').value;\r\n    // Assuming expiryDate is a valid Date object\r\n    if (expiryDate) {\r\n        const minDate = new Date(expiryDate);\r\n        minDate.setDate(minDate.getDate() + 1); // Setting the minimum date as one day after joining date\r\n        return minDate;\r\n    }\r\n    return null; // or you can set a default minDate if joiningDate is not set\r\n  }\r\n}\r\n","<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Update Coupons</h1>\r\n\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" style=\"margin-right: 10px;\" class=\"btn btn-cancel\" (click)=\"cancel()\">Cancel</button>\r\n        <button type=\"button\" class=\"btn btn-save ms-2\" (click)=\"onSave()\">Save</button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <form [formGroup]=\"promotionForm\">\r\n        <div class=\"row mb-3\">\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n              <label class=\"form-label\">Coupon Name<span class=\"error-asterisk\">*</span></label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput placeholder=\"Coupon Name\" maxlength=\"50\" formControlName=\"coupon_name\" required>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.coupon_name.touched) && f.coupon_name.errors?.required\">\r\n                Coupon name is required!\r\n              </mat-error>\r\n            </div>\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n              <label class=\"form-label\">Coupon Code<span class=\"error-asterisk\">*</span></label>\r\n              <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <input matInput style=\"text-transform :uppercase\" placeholder=\"Coupon Code\" maxlength=\"8\" minlength=\"3\" formControlName=\"coupon_code\" required>\r\n                <span matSuffix>\r\n                  <a style=\"cursor: pointer; color: 110152;\" (click)=\"generateCoupon()\" matTooltip=\"Generate Coupon\">\r\n                    <i class=\"fas fa-sync-alt\"></i>\r\n                  </a>\r\n                </span>\r\n              </mat-form-field>\r\n              <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.coupon_code.touched) && f.coupon_code.errors?.required\">\r\n                Coupon Code is required!\r\n              </mat-error>\r\n              <mat-error class=\"text-danger\" *ngIf=\"f.coupon_code.errors?.minlength\">\r\n                Coupon Code must be greater than 3 characters!\r\n              </mat-error>\r\n            </div>\r\n        </div>         \r\n\r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Percentage</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Percentage\" maxlength=\"3\" formControlName=\"discountPercentage\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>%</span>\r\n                </mat-form-field>\r\n                <mat-error *ngIf=\"f.discountPercentage.errors?.max\">\r\n                    Discount Percentage cannot exceed 100%.\r\n                </mat-error>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Upto</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Max Discount Amount\" maxlength=\"10\" formControlName=\"maxDiscountAmount\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>₹&nbsp;</span>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n        </div>\r\n        \r\n        <div class=\"row mb-3\">\r\n          <label class=\"form-label\">Description <span class=\"error-asterisk\">*</span></label>\r\n          <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n            <textarea matInput autocomplete=\"off\" formControlName=\"description\" rows=\"3\" maxlength=\"150\" placeholder=\"Description\">\r\n            </textarea>\r\n          </mat-form-field>\r\n        </div>\r\n\r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Start date<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field style=\"font-size: 12px\" class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput bsDatepicker required placeholder=\"Start Date\" class=\"text-uppercase\" formControlName=\"startDate\"\r\n                      bsDatepicker [bsConfig]=\"{\r\n                        containerClass: 'theme-dark-blue',\r\n                        dateInputFormat: 'DD MMM YYYY',\r\n                        showWeekNumbers: false\r\n                      }\" [ngClass]=\"{\r\n                        'is-invalid':\r\n                          f.startDate.invalid && f.startDate.touched && submitted\r\n                      }\" (click)=\"openDatepicker('startDate')\" />\r\n                    <span>\r\n                      <mat-icon class=\"iconcalender\">date_range</mat-icon>\r\n                    </span>\r\n                  </mat-form-field>\r\n                  <mat-error class=\"text-danger\" *ngIf=\"\r\n                      (submitted || f.startDate.touched) &&\r\n                      f.startDate.errors?.required\r\n                    \">\r\n                    Start Date is Required!\r\n                  </mat-error>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Expiry Date<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field style=\"font-size: 12px\" class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput bsDatepicker placeholder=\"Expiry Date\" [minDate]=\"calculateMinDate()\"\r\n                      class=\"text-uppercase\" formControlName=\"expiryDate\" bsDatepicker required [bsConfig]=\"{\r\n                        containerClass: 'theme-dark-blue',\r\n                        dateInputFormat: 'DD MMM YYYY',\r\n                        showWeekNumbers: false,\r\n                        showOnFocus: true\r\n                      }\" (click)=\"openDatepicker('expiryDate')\" />\r\n                    <span>\r\n                      <mat-icon class=\"iconcalender\">date_range</mat-icon>\r\n                    </span>\r\n                  </mat-form-field>\r\n                  <mat-error class=\"text-danger\" *ngIf=\"\r\n                      (submitted || f.expiryDate.touched) &&\r\n                      f.expiryDate.errors?.required\r\n                    \">\r\n                    Expiry Date is Required!\r\n                  </mat-error>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Usage Limit</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Usage Limit\" maxlength=\"8\" formControlName=\"usage_limit\" (keypress)=\"numberOnly($event)\">\r\n                </mat-form-field>\r\n                <!-- <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.usage_limit.touched) && f.usage_limit.errors?.required\">\r\n                    Usage Limit is required!\r\n                </mat-error> -->\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </form>    \r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-promotion',\r\n  templateUrl: './edit-promotion.component.html',\r\n  styleUrls: ['./edit-promotion.component.scss']\r\n})\r\nexport class EditPromotionComponent implements OnInit {\r\n\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  public submitted: boolean = false;\r\n  promotionForm: any;\r\n  promotionId: any;\r\n  currentPageNo: any;\r\n  promotionList: any;\r\n  totalrow: any;\r\n  toatlPages: any;\r\n  selectedProductIds: string[] = [];\r\n  selectedFreeProductIds: string[] = [];\r\n  types: string[] = ['DISCOUNT', 'PRODUCT', 'FLAT'];   //['DISCOUNT', 'PRODUCT', 'FLAT', 'COUPONS'];\r\n  productsIdList: any[] = [];\r\n  freeProductData: any;\r\n  \r\n  constructor(public router: Router, private commonService: CommonService,\r\n    private toastService: ToastNotificationService, public dialog: MatDialog,\r\n    private titleCasePipe: TitleCasePipe, private formBuilder: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<EditPromotionComponent>,\r\n    private promotionService: PromotionService) { \r\n      this.promotionId = this.data.promotionId;\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    try {\r\n      this.promotionForm = this.formBuilder.group({\r\n          schemaName: [null],\r\n          buyQuantity: [null, Validators.required],\r\n          getQuantity: [null, Validators.required],\r\n          discountPercentage: [null, [Validators.min(0), Validators.max(100)]],\r\n          discountAmount: [null],\r\n          minBillAmt: [null],\r\n          type: ['DISCOUNT', Validators.required], // Default value 'DISCOUNT'\r\n          products: this.formBuilder.array([]),   // Initialize \"products\" as an array here\r\n      },\r\n      {\r\n        validators: [\r\n            this.atLeastOneValidator\r\n        ], // Apply the custom validator\r\n      });\r\n      this.getPromotionById()\r\n      \r\n      const discountPercentageControl = this.promotionForm.get('discountPercentage');\r\n      const discountAmountControl = this.promotionForm.get('discountAmount');\r\n\r\n      // Subscribe to valueChanges of discountPercentage control\r\n      discountPercentageControl?.valueChanges.subscribe(value => {\r\n          try {\r\n              if (value && !discountAmountControl?.disabled) {\r\n                  discountAmountControl?.disable();\r\n              } else if (!value && discountAmountControl?.disabled) {\r\n                  discountAmountControl?.enable();\r\n              }\r\n          } catch (error) {\r\n              console.error('Error in discountPercentageControl subscription:', error);\r\n          }\r\n      });\r\n\r\n      // Subscribe to valueChanges of discountAmount control\r\n      discountAmountControl?.valueChanges.subscribe(value => {\r\n          try {\r\n              if (value && !discountPercentageControl?.disabled) {\r\n                  discountPercentageControl?.disable();\r\n              } else if (!value && discountPercentageControl?.disabled) {\r\n                  discountPercentageControl?.enable();\r\n              }\r\n          } catch (error) {\r\n              console.error('Error in discountAmountControl subscription:', error);\r\n          }\r\n      });\r\n\r\n      // If type is PRODUCT then discounted fields are get hidden... so below is code for that condition\r\n      // When the type changes, adjust validators accordingly\r\n      const typeControl = this.promotionForm.get('type');\r\n\r\n      typeControl?.valueChanges.subscribe((type: string) => {\r\n        // Dynamically adjust validators based on the selected type\r\n        if (type === 'PRODUCT') {\r\n          discountPercentageControl?.clearValidators();\r\n          discountAmountControl?.clearValidators();\r\n        } else {\r\n          discountPercentageControl?.setValidators([Validators.min(0), Validators.max(100)]);\r\n          discountAmountControl?.setValidators(null);\r\n        }\r\n\r\n        // Update and validate the controls\r\n        discountPercentageControl?.updateValueAndValidity();\r\n        discountAmountControl?.updateValueAndValidity();\r\n\r\n        // Update the form level validators as well\r\n        this.promotionForm.updateValueAndValidity();\r\n      });\r\n      \r\n      // If type is FLAT then buy and get qty are get hidden... so below is code for that condition\r\n      // When the type changes, adjust validators accordingly\r\n      const buyQtyControl = this.promotionForm.get('buyQuantity');\r\n      const getQtyControl = this.promotionForm.get('getQuantity');\r\n      typeControl?.valueChanges.subscribe((type: string) => {\r\n        // Dynamically adjust validators based on the selected type\r\n        if (type === 'FLAT') {\r\n          buyQtyControl?.clearValidators();\r\n          getQtyControl?.clearValidators();\r\n        } else {\r\n          getQtyControl?.setValidators(Validators.required);\r\n          buyQtyControl?.setValidators(Validators.required);\r\n        }\r\n\r\n        // Update and validate the controls\r\n        getQtyControl?.updateValueAndValidity();\r\n        buyQtyControl?.updateValueAndValidity();\r\n\r\n        // Update the form level validators as well\r\n        this.promotionForm.updateValueAndValidity();\r\n      });\r\n\r\n    } catch (error) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: error\r\n        })\r\n    }\r\n  }\r\n\r\n  get f() {\r\n    return this.promotionForm.controls;\r\n  }\r\n  \r\n  atLeastOneValidator: ValidatorFn = (control: AbstractControl): ValidationErrors | null => {\r\n    const discountPercentage = control.get('discountPercentage').value;\r\n    const discountAmount = control.get('discountAmount').value;\r\n  \r\n    // Check if the type is \"DISCOUNT\" and at least one of the fields is empty\r\n    if (control.get('type').value === 'DISCOUNT' && (!discountPercentage && !discountAmount)) {\r\n      return { atLeastOneError: true };\r\n    }\r\n  \r\n    return null;\r\n  };  \r\n\r\n  getPromotionById() {\r\n    this.promotionService.getPromotionById({}, this.promotionId).then((res) => {\r\n      if(res.success) {\r\n        this.promotionList = res.data;\r\n        this.promotionForm.patchValue({\r\n          schemaName: res.data.schemaName,\r\n          buyQuantity: res.data.buyQuantity,\r\n          getQuantity: res.data.getQuantity,\r\n          discountPercentage: res.data?.discountPercentage,\r\n          discountAmount: res.data?.discountAmount,\r\n          type: res.data.type,\r\n          minBillAmt: res.data.minumumBill,\r\n        })\r\n        // If you have product data, then fetching the whole product data into the array list\r\n        this.productsIdList = res.data.products;\r\n        this.freeProductData = res.data.freeProduct;\r\n\r\n        // Add product Id into the selectedProductIds array for each product\r\n        for (const product of this.productsIdList) {\r\n          this.selectedProductIds.push(product.id)\r\n        }\r\n        \r\n      }\r\n      },(err) => {\r\n        if (err.error.status === 404) {\r\n            this.toastService.toastMsg({\r\n              title: 'Error',\r\n              content: \"Data Not Found!!!\"\r\n            })\r\n        } else {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: this.titleCasePipe.transform(err.error.error_message)\r\n          })\r\n        }\r\n      });\r\n  }\r\n\r\n  numberOnly(event): boolean {\r\n    const charCode = (event.which) ? event.which : event.keyCode;\r\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSave() {\r\n    this.submitted = true; \r\n    const payload = {\r\n      promotionId: this.promotionId,\r\n      promotionData: {\r\n        type: this.promotionForm.value.type ? this.promotionForm.value.type : null,\r\n        // isActive: true,\r\n        schemaName: this.promotionForm.value.schemaName ? this.promotionForm.value.schemaName : null,\r\n        buyQuantity: this.promotionForm.value.type !== 'FLAT' ? parseInt(this.promotionForm.value.buyQuantity, 10) : null,\r\n        getQuantity: this.promotionForm.value.type !== 'FLAT' ? parseInt(this.promotionForm.value.getQuantity, 10) : null,\r\n        discountPercentage: this.promotionForm.value.discountPercentage ? this.promotionForm.value.discountPercentage : null,\r\n        discountAmount: this.promotionForm.value.discountAmount ? this.promotionForm.value.discountAmount : null,\r\n        minumumBill: this.promotionForm.value.minBillAmt ? this.promotionForm.value.minBillAmt : null,\r\n      },    \r\n      productArray: this.selectedProductIds.map(productId => ({ 'productId': productId }))\r\n    };\r\n    console.log(\"promotionData\",payload,this.promotionForm.value.type)\r\n    if (this.promotionForm.value.type === 'PRODUCT') {\r\n      // Check if the type is 'PRODUCT' and update the promotion\r\n      this.promotionService.updatePromotion({ data: payload, userId: this.currentUser.id })\r\n        .then((res) => {\r\n          if (res.success) {\r\n            this.commonService.notifyDataAdded();\r\n            this.toastService.toastMsg({\r\n              title: 'Success',\r\n              content: \"Promotion Updated Successfully!!!\"\r\n            });\r\n            this.dialogRef.close();\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: this.titleCasePipe.transform(error.error.error_message)\r\n          });\r\n        });\r\n    } else if (this.selectedProductIds.length > 0) {\r\n      // For other types, check if selected products exist, then update the promotion\r\n      this.promotionService.updatePromotion({ data: payload, userId: this.currentUser.id })\r\n        .then((res) => {\r\n          if (res.success) {\r\n            this.commonService.notifyDataAdded();\r\n            this.toastService.toastMsg({\r\n              title: 'Success',\r\n              content: \"Promotion Updated Successfully!!!\"\r\n            });\r\n            this.dialogRef.close();\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.toastService.toastMsg({\r\n            title: 'Error',\r\n            content: this.titleCasePipe.transform(error.error.error_message)\r\n          });\r\n        });\r\n    } else {\r\n      // If neither condition is met, show an error message\r\n      this.toastService.toastMsg({\r\n        title: 'Error',\r\n        content: 'Please select at least one product'\r\n      });\r\n    }\r\n   \r\n  }\r\n\r\n  cancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header pt-0\">\r\n    <h1 style=\"color: #EB8B3F; font-weight: bolder;margin-left: 5px;\" class=\"modal-title mb-0\">Edit Promotion</h1>\r\n\r\n    <div class=\"addProductButtons\">\r\n        <button type=\"button\" style=\"margin-right: 10px;\" class=\"btn-cancel\" (click)=\"cancel()\">Cancel</button>\r\n        <button type=\"button\" class=\"btn-save ms-2\" (click)=\"onSave()\">Save</button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal-body\">\r\n    <form [formGroup]=\"promotionForm\">\r\n        <div class=\"row mb-3\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Schema Name<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Schema Name\" maxlength=\"50\" formControlName=\"schemaName\" required>\r\n                </mat-form-field>\r\n                <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.schemaName.touched) && f.schemaName.errors?.required\">\r\n                    Schema Name is required!\r\n                </mat-error>\r\n            </div>\r\n\r\n            <div style=\"font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Type<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                  <mat-select formControlName=\"type\" placeholder=\"Type\" required [disabled]=\"promotionForm.get('type').value === 'PRODUCT'\">\r\n                    <mat-option *ngFor=\"let item of types\" [value]=\"item\">\r\n                      {{ item }}\r\n                    </mat-option>\r\n                  </mat-select>\r\n                </mat-form-field>\r\n                <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.type.touched) && f.type.errors?.required\">\r\n                  Schema Type is required!\r\n                </mat-error>\r\n            </div>              \r\n        </div>\r\n\r\n        <div class=\"row mb-3\" *ngIf=\"f.type.value === 'DISCOUNT' \">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Percentage</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Percentage\" maxlength=\"3\" formControlName=\"discountPercentage\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>%</span>\r\n                </mat-form-field>\r\n                <mat-error *ngIf=\"f.discountPercentage.errors?.max\">\r\n                    Discount Percentage cannot exceed 100%.\r\n                </mat-error>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Amount</label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Amount\" maxlength=\"10\" formControlName=\"discountAmount\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>₹&nbsp;</span>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n            <!-- Display error for both fields having errors and at least one being touched or submitted -->\r\n            <div *ngIf=\"promotionForm.hasError('atLeastOneError') && submitted\" class=\"text-danger\">\r\n                Please fill at least one of Discounted Amount or Discount Percentage.\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"row mb-3\" *ngIf=\"f.type.value === 'FLAT'\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Minimum Bill Amount<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <span class=\"matSuffix\" matSuffix>₹&nbsp;</span>\r\n                    <input matInput placeholder=\"Discount Percentage\" maxlength=\"10\" formControlName=\"minBillAmt\" (keypress)=\"numberOnly($event)\">\r\n                </mat-form-field>\r\n            </div>\r\n            \r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Discount Amount<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Discount Amount\" maxlength=\"10\" formControlName=\"discountAmount\" (keypress)=\"numberOnly($event)\">\r\n                    <span class=\"matSuffix\" matSuffix>₹&nbsp;</span>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n            <!-- Display error for both fields having errors and at least one being touched or submitted -->\r\n            <div *ngIf=\"promotionForm.hasError('atLeastOneError') && submitted\" class=\"text-danger\">\r\n                Please fill at least one of Discounted Amount\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row mb-3\" *ngIf=\"f.type.value !== 'FLAT'\">\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Buy Quantity<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <input matInput placeholder=\"Buy Quantity\" maxlength=\"5\" formControlName=\"buyQuantity\" (keypress)=\"numberOnly($event)\">\r\n                </mat-form-field>\r\n                <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.buyQuantity.touched) && f.buyQuantity.errors?.required\">\r\n                    Buy quantity is required!\r\n                </mat-error>\r\n            </div>\r\n\r\n            <div style=\" font-size: 12px\" class=\"col-xs-12 col-sm-12 col-md-6 col-lg-6\">\r\n                <label class=\"form-label\">Get Quantity<span class=\"error-asterisk\">*</span></label>\r\n                <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                    <div style=\"display: inline-block;\">\r\n                        <input matInput placeholder=\"Get Quantity\" maxlength=\"5\" formControlName=\"getQuantity\" (keypress)=\"numberOnly($event)\">\r\n                    </div>\r\n                </mat-form-field>\r\n                <mat-error class=\"text-danger\" *ngIf=\"(submitted || f.getQuantity.touched) && f.getQuantity.errors?.required\">\r\n                    Get quantity is required!\r\n                </mat-error>\r\n            </div>\r\n        </div>\r\n    </form>      \r\n        \r\n    <div class=\"row mt-3\">\r\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\" *ngIf=\"productsIdList.length\">\r\n            <label class=\"form-label\">Products<span class=\"error-asterisk\">*</span></label>\r\n            <mat-form-field class=\"example-full-width\" appearance=\"outline\">\r\n                <mat-select [(ngModel)]=\"selectedProductIds\" multiple>\r\n                    <mat-option *ngFor=\"let product of productsIdList\" [value]=\"product.id\">\r\n                    {{ product.itemName }}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>  \r\n        </div>\r\n\r\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-3\" *ngIf=\"freeProductData\">\r\n            <label class=\"form-label\">Free Products<span class=\"error-asterisk\">*</span></label>\r\n            <ul class=\"mt-2\">{{ freeProductData.itemName }}</ul>  \r\n        </div>\r\n    </div>\r\n</div>","import { TitleCasePipe } from '@angular/common';\r\nimport { Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\r\nimport { CommonService } from 'src/app/core/services/common.service';\r\nimport { PromotionService } from 'src/app/core/services/promotion.service';\r\nimport { ToastNotificationService } from 'src/app/core/services/toast-notification.service';\r\nimport { AddPromotionComponent } from '../add-promotion/add-promotion/add-promotion.component';\r\nimport { AssignProductToPromotionComponent } from '../assign-product-to-promotion/assign-product-to-promotion/assign-product-to-promotion.component';\r\nimport { EditPromotionComponent } from '../edit-promotion/edit-promotion/edit-promotion.component';\r\nimport { CounterDiscModalComponent } from '../counter-disc-modal/counter-disc-modal.component';\r\nimport { CouponModalComponent } from '../coupon-modal/coupon-modal.component';\r\n\r\n@Component({\r\n  selector: 'app-promotion-list',\r\n  templateUrl: './promotion-list.component.html',\r\n  styleUrls: ['./promotion-list.component.scss']\r\n})\r\nexport class PromotionListComponent implements OnInit {\r\n  \r\n  private searchSubject = new Subject<string>();\r\n  private searchSubscription: Subscription;\r\n  public currentUser = JSON.parse(localStorage.getItem(\"currentUser\"))\r\n  promotionList: any[] = [];\r\n  excelFileUpload: any;\r\n  public currentpage: any;\r\n  public totalrow: any;\r\n  public toatlPages: any;\r\n  public currentPageNo: number = 0;\r\n  public partyPageSize: number = 5;\r\n  public pagesize: number = 1;\r\n  public count: number = 0;\r\n  promotionIdList: any[] = [];\r\n  selectedIdList: any[] = [];\r\n\r\n  public archiveIconfalse: boolean = false;\r\n  public checkSingleArray: any = [];\r\n  public isChecked: boolean = false;\r\n  public upiCheckedId = [];\r\n  public upiCheckedId1 = [];\r\n  public allSelect: boolean = false;\r\n  public checkSelect: boolean = false;\r\n\r\n  public checkSelectsingle: boolean = false;\r\n\r\n  public checkSelectsinglefalse: boolean = false;\r\n  public checkSelectsingletrue: boolean = false;\r\n  promotionId: any;\r\n  pageNumberDisplay: any[];\r\n  isLoading: boolean;\r\n  archivedPartyIds: any[];\r\n  unarchivedPartyIds: any[];\r\n  showUnarchiveButton: boolean;\r\n  showDeleteButton: boolean;\r\n  isdeletedParty: boolean;\r\n  selectedTypeFilter: string | null = null;\r\n  isFilterVisible: any;\r\n  @ViewChild('dropdown') dropdown: ElementRef;\r\n\r\n  constructor(public router: Router, public dialog: MatDialog, private commonService: CommonService,\r\n    public route: ActivatedRoute, private promotionService: PromotionService,\r\n    public toastService: ToastNotificationService,\r\n    private titleCasePipe: TitleCasePipe) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAllPromotion();\r\n    this.commonService.rowAdded$.subscribe(() => {\r\n      // Fetch the updated list of users\r\n      this.getAllPromotion();\r\n    });\r\n\r\n    this.searchSubscription = this.searchSubject\r\n      .pipe(debounceTime(800),\r\n        distinctUntilChanged(),\r\n        tap(() => {\r\n          this.isLoading = true; // Show the loader when the API call is initiated\r\n        })).subscribe(searchKey => {\r\n          // Call the API with the search key\r\n          if (searchKey.length >= 3) {\r\n            this.searchPromotion(searchKey.trim());\r\n          } else if (searchKey === '') {\r\n             this.isLoading = false; // Hide the loader if the search key is less than the threshold\r\n            //this.searchConsignment(searchKey);\r\n            this.getAllPromotion()\r\n          } else {\r\n            this.isLoading = false; // Hide the loader if the search key is less than the threshold\r\n          }\r\n        });\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  onDocumentClick(event: Event): void {\r\n    // Check if the clicked element is outside the dropdown\r\n    if (!this.dropdown.nativeElement.contains(event.target as Node)) {\r\n      this.isFilterVisible = false;\r\n    }\r\n  }\r\n\r\n  getAllPromotion() {\r\n    this.promotionService.getAllPromotion({}, this.currentUser.id).then((res) => {\r\n      if(res.success) {\r\n        this.promotionList = res.data;\r\n        // this.currentPageNo = res.data.currentPage;\r\n        // this.totalrow = res.data.totalrows;\r\n        // this.toatlPages = res.data.totalPages\r\n      }\r\n    },\r\n    (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: this.titleCasePipe.transform(err.error.error_message),\r\n        });\r\n      }\r\n      else {\r\n        this.toastService.toastMsg({\r\n          title: \"Error\",\r\n          content: \"Something Went Wrong.\",\r\n        });\r\n      }\r\n\r\n    }) \r\n  }\r\n\r\n  archhivePromotion(promotionId: string, isdeleted: boolean) {\r\n    this.promotionId = promotionId;\r\n    this.isdeletedParty = isdeleted;\r\n    this.selectedIdList.push(promotionId);\r\n  }\r\n\r\n  archiveSignlePromotion() {\r\n    if (this.isdeletedParty) {\r\n      this.promotionService.unArchiveMultiplePromotions({data: { unArchivePromotions: this.selectedIdList }, userId: this.currentUser.id}).then((res: any) => {\r\n        if (res.success) {\r\n          this.toastService.toastMsg({\r\n            title: 'Success',\r\n            content: \"Promotion Unarchived Successfully!!!\"\r\n          });\r\n\r\n          this.getAllPromotion();\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      this.promotionService.deleteMultiplePromotions({data: { archivePromotions: this.selectedIdList }, userId: this.currentUser.id}).then((res: any) => {\r\n        if (res.success) {\r\n          this.toastService.toastMsg({\r\n            title: 'Success',\r\n            content: \"Promotion Archived Successfully!!!\"\r\n          });\r\n          this.getAllPromotion();\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  onChekedsingleCheck(e, partyId) {\r\n    if (e.target.checked) {\r\n      this.promotionIdList.push(partyId);\r\n      this.checkSingleArray.push(e.target.value);\r\n    } else {\r\n      const index = this.promotionIdList.indexOf(partyId);\r\n      if (index !== -1) {\r\n        this.promotionIdList.splice(index, 1);\r\n        this.checkSingleArray.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    // Clear the archived and unarchived party IDs\r\n    this.archivedPartyIds = [];\r\n    this.unarchivedPartyIds = [];\r\n\r\n    // Update the archived and unarchived party IDs based on the selected parties\r\n    this.promotionIdList.forEach(partyId => {\r\n      const party = this.promotionList.find(item => item.id === partyId);\r\n      if (party) {\r\n        if (party.isDeleted) {\r\n          this.archivedPartyIds.push(partyId);\r\n        } else {\r\n          this.unarchivedPartyIds.push(partyId);\r\n        }\r\n      }\r\n    })\r\n\r\n    // Check if all the selected parties are archived\r\n    const allArchived = this.promotionIdList.every(partyId => {\r\n      const party = this.promotionList.find(item => item.id === partyId);\r\n      return party && party.isDeleted;\r\n    });\r\n\r\n    // Check if all the selected parties are unarchived\r\n    const allUnarchived = this.promotionIdList.every(partyId => {\r\n      const party = this.promotionList.find(item => item.id === partyId);\r\n      return party && !party.isDeleted;\r\n    });\r\n\r\n    // if (allArchived && allUnarchived) {\r\n    if (this.archivedPartyIds.length > 0 && this.unarchivedPartyIds.length > 0) {\r\n      // Show an alert error message to the user\r\n      alert(\"Please select either archived or unarchived Promotions.\");\r\n      // Uncheck all the selected parties and header checkbox\r\n      this.promotionIdList = [];\r\n      this.checkSingleArray = [];\r\n      this.checkSelectsingle = false;\r\n      this.upiCheckedId = [];\r\n      this.isChecked = false;\r\n      this.allSelect = false;\r\n      this.checkSelect = false;\r\n      this.checkSelectsingle = false;\r\n\r\n      // Uncheck all the checkboxes in the template\r\n      const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\r\n      checkboxes.forEach((checkbox) => {\r\n        const inputElement = checkbox as HTMLInputElement;\r\n        inputElement.checked = false;\r\n      });\r\n\r\n    } else if (allArchived) {\r\n      console.log('Archived');\r\n      // Show unarchive button\r\n      this.showUnarchiveButton = true;\r\n      this.showDeleteButton = false;\r\n    } else if (allUnarchived) {\r\n      console.log('Unarchived');\r\n      // Show archive button\r\n      this.showDeleteButton = true;\r\n      this.showUnarchiveButton = false;\r\n    } else {\r\n      // Show error message or handle the case when there are both archived and unarchived parties selected\r\n      alert(\"Please select either archived or unarchived Promotions.\");\r\n      // Uncheck all the selected parties and header checkbox\r\n      this.promotionIdList = [];\r\n      this.checkSingleArray = [];\r\n      this.checkSelectsingle = false;\r\n      this.upiCheckedId = [];\r\n      this.isChecked = false;\r\n      this.allSelect = false;\r\n      this.checkSelect = false;\r\n      this.checkSelectsingle = false;\r\n      this.showDeleteButton = false;\r\n      this.showUnarchiveButton = false;\r\n\r\n      // Uncheck all the checkboxes in the template\r\n      const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\r\n      checkboxes.forEach((checkbox) => {\r\n        const inputElement = checkbox as HTMLInputElement;\r\n        inputElement.checked = false;\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  getSingleCheckedId(promotionId) {\r\n    this.promotionId = promotionId;\r\n  }\r\n\r\n  onChekMultiple($event) {\r\n    const isChecked = $event.target.checked;\r\n    if (isChecked) {\r\n      this.promotionIdList = this.promotionList.map(item => item.id);\r\n    } else {\r\n      this.promotionIdList = [];\r\n      this.showDeleteButton = false;\r\n      this.showUnarchiveButton = false\r\n    }\r\n    this.checkSelect = isChecked; // Update the checkbox state in the header\r\n\r\n    let id = $event.target.value;\r\n    this.isChecked = $event.target.checked;\r\n    this.upiCheckedId = this.promotionList.map((item) => {\r\n      if (id === -1) {\r\n        if (this.isChecked == true) {\r\n          this.checkSelectsingle = true;\r\n          return item.id;\r\n        }\r\n        else {\r\n          this.checkSelectsingle = false;\r\n          this.upiCheckedId = [];\r\n        }\r\n      }\r\n    })\r\n    // Clear the archived and unarchived party IDs\r\n    this.archivedPartyIds = [];\r\n    this.unarchivedPartyIds = [];\r\n\r\n    // Update the archived and unarchived party IDs based on the selected parties\r\n    this.promotionIdList.forEach(partyId => {\r\n      const party = this.promotionList.find(item => item.id === partyId);\r\n      if (party) {\r\n        if (party.isDeleted) {\r\n          this.archivedPartyIds.push(partyId);\r\n        } else {\r\n          this.unarchivedPartyIds.push(partyId);\r\n        }\r\n      }\r\n\r\n      // Check if all the selected parties are archived\r\n      const allArchived = this.promotionIdList.every(partyId => {\r\n        const party = this.promotionList.find(item => item.id === partyId);\r\n        return party && party.isDeleted;\r\n      });\r\n      // Check if all the selected parties are unarchived\r\n      const allUnarchived = this.promotionIdList.every(partyId => {\r\n        const party = this.promotionList.find(item => item.id === partyId);\r\n        return party && !party.isDeleted;\r\n      });\r\n\r\n      if (allArchived) {\r\n        // Show unarchive button\r\n        this.showUnarchiveButton = true\r\n        this.showDeleteButton = false;\r\n      } else if (allUnarchived) {\r\n        // Show archive button\r\n        this.showDeleteButton = true;\r\n        this.showUnarchiveButton = false\r\n      } else {\r\n        // Show error message or handle the case when there are both archived and unarchived parties selected\r\n      }\r\n    });\r\n\r\n    if (this.archivedPartyIds.length > 0 && this.unarchivedPartyIds.length > 0) {\r\n      alert(\"Please select either archived or unarchived Promotions\");\r\n      // Uncheck all the selected parties and header checkbox\r\n      this.promotionIdList = [];\r\n      this.checkSingleArray = [];\r\n      this.checkSelectsingle = false;\r\n      this.upiCheckedId = [];\r\n      this.isChecked = false;\r\n      this.allSelect = false;\r\n      this.checkSelect = false;\r\n      this.checkSelectsingle = false;\r\n\r\n      // Uncheck all the checkboxes in the template\r\n      const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\r\n      checkboxes.forEach((checkbox) => {\r\n        const inputElement = checkbox as HTMLInputElement;\r\n        inputElement.checked = false;\r\n      });\r\n\r\n      // Throw an error to prevent further processing\r\n      this.toastService.toastMsg({\r\n        title: 'Warning',\r\n        content: 'Please select either archived or unarchived Promotions'\r\n      })\r\n      throw new Error(\"Please select either archived or unarchived Promotions\");\r\n    }\r\n  }\r\n\r\n  getUPIcheckId(promotionId) {\r\n    this.promotionId = promotionId;\r\n  }\r\n\r\n  archiveMultiplePromotion() {\r\n    if (this.currentPageNo === 1) {\r\n      this.currentPageNo = this.currentPageNo;\r\n    }\r\n    else {\r\n      if (this.toatlPages > this.currentPageNo) {\r\n        this.currentPageNo = this.currentPageNo - 1;\r\n      }\r\n    }\r\n    const requestBody = {\r\n      archivePromotions: this.promotionIdList\r\n    };\r\n\r\n    this.promotionService.deleteMultiplePromotions({ data: requestBody, userId: this.currentUser.id }).then((result: any) => {\r\n      if (result.success) {\r\n        this.getAllPromotion();\r\n        this.toastService.toastMsg({\r\n          title: 'Success',\r\n          content: \"Promotion Archived Successfully!!!\"\r\n        });\r\n\r\n        this.showDeleteButton = false;\r\n        this.showUnarchiveButton = false\r\n        this.promotionIdList = []; // Clear the selected party IDs after deletion\r\n        this.checkSelect = false // Reset the checkbox state in the header\r\n      }\r\n    }, (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: this.titleCasePipe.transform(err.error.error_message)\r\n        });\r\n      } else {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: \"Something Went Wrong.\"\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  showDeleteButtonFunc(): boolean {\r\n    return this.unarchivedPartyIds.length > 0;\r\n  }\r\n\r\n  unArchiveMultiplePromotion() {\r\n    const requestBody = {\r\n      unArchivePromotions: this.promotionIdList\r\n    };\r\n    this.promotionService.unArchiveMultiplePromotions({data: requestBody, userId: this.currentUser.id}).then((result: any) => {\r\n      if (result.success) {\r\n        this.getAllPromotion();\r\n        this.toastService.toastMsg({\r\n          title: 'Success',\r\n          content: \"Promotion Unarchived Successfully!!!\"\r\n        });\r\n        this.showDeleteButton = false;\r\n        this.showUnarchiveButton = false\r\n        this.promotionIdList = []; // Clear the selected party IDs after unarchiving\r\n        this.checkSelect = false; // Reset the checkbox state in the header\r\n      }\r\n    }, (err) => {\r\n      if (err.error.expose) {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: this.titleCasePipe.transform(err.error.error_message)\r\n        });\r\n      } else {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: \"Something Went Wrong.\"\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  searchPromotion(searchKey: string) {\r\n    setTimeout(() => {\r\n      if (searchKey.trim() === '') {\r\n        this.getAllPromotion();\r\n        this.isLoading = false; \r\n      } else {\r\n        this.isLoading = false; \r\n        this.promotionList = this.promotionList.filter(item => {\r\n          return (\r\n            (item.schemaName && item.schemaName.toLowerCase().includes(searchKey.toLowerCase())) \r\n          );\r\n        });\r\n        if(this.promotionList.length === 0){\r\n          this.isLoading = false; \r\n          this.toastService.toastMsg({\r\n            title: \"Error\",\r\n            content: searchKey + \" Is Not Found\",\r\n          });\r\n        }\r\n      }\r\n    this.isLoading = false; // Hide the loader after the API call is completed\r\n    }, 500);\r\n  }\r\n\r\n\r\n  onSearchInputChange(searchKey: string) {\r\n    console.log(searchKey);\r\n    // Emit the search key to the searchSubject\r\n    this.searchSubject.next(searchKey.trim());\r\n  }\r\n\r\n  handleInputChange(e) {\r\n    this.excelFileUpload = e.target.files[0];\r\n    const pattern = /\\.(xlsx|xls)$/i; // Pattern to match \".xlsx\" or \".xls\" extension\r\n    if (!pattern.test(this.excelFileUpload.name)) {\r\n      this.toastService.toastMsg({\r\n        title: \"Error\",\r\n        content: \"Invalid Format. Please Select An Excel File.\",\r\n      });\r\n      return;\r\n    }\r\n    if (this.excelFileUpload) {\r\n      let formdata = new FormData();\r\n      formdata.set(\"file\", this.excelFileUpload)\r\n      // this.truckOwnerService.postBulkowner(formdata, this.currentUser.id).then((res) => {\r\n      //   this.toastService.toastMsg({\r\n      //     title: \"Success\",\r\n      //     content: \"Excel Uploaded Successfully\",\r\n      //   });\r\n      //   this.getAllPromotion();\r\n      // }, (err) => {\r\n      //   if (err.error.expose) {\r\n      //     this.toastService.toastMsg({\r\n      //       title: \"Error\",\r\n      //       content: this.titleCasePipe.transform(err.error.error_message),\r\n      //     });\r\n      //   }\r\n      //   else if (err.error.status == \"409\" && err.error.expose == false) {\r\n      //     this.toastService.toastMsg({\r\n      //       title: \"Error\",\r\n      //       content: \"List Of Consignments Already Exists\",\r\n      //     });\r\n      //   }\r\n      //   else {\r\n      //     this.toastService.toastMsg({\r\n      //       title: \"Error\",\r\n      //       content: \"Something Went Wrong.\",\r\n      //     });\r\n      //   }\r\n      // });\r\n    }\r\n  }\r\n\r\n  startUpload() {\r\n    var uploadInput = document.getElementById('uploadFile');\r\n    if (uploadInput) {\r\n      var event = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: false,\r\n        cancelable: true\r\n      });\r\n      uploadInput.dispatchEvent(event);\r\n    } else {\r\n      this.toastService.toastMsg({\r\n        title: 'Error',\r\n        content: \"Upload element not found\"\r\n      });\r\n    }\r\n  }\r\n\r\n  public handlePage(e: any) {\r\n    this.currentPageNo = e.pageIndex;\r\n    this.pagesize = e.pageSize;\r\n\r\n    if (this.promotionList.length > 0) {\r\n      // if (this.searchKey !== '') {\r\n      //   this.partyPageSize = e.pageSize;\r\n      //   this.searchConsignment(this.searchKey);\r\n      // } else {\r\n        this.partyPageSize = e.pageSize;\r\n        this.getAllPromotion();\r\n      // }\r\n    }\r\n  }\r\n\r\n  addPromotionModal(): void {\r\n    const dialogRef: MatDialogRef<AddPromotionComponent> = this.dialog.open(AddPromotionComponent, {\r\n      width: '700px',\r\n      height: \"100vh\",\r\n      data: {},\r\n      disableClose: true,\r\n      position: {\r\n        right: '0',\r\n      },\r\n    });\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      console.log(`Dialog result: ${result}`);\r\n    });\r\n  }\r\n  \r\n  counterDiscountModal(): void {\r\n    const dialogRef: MatDialogRef<CounterDiscModalComponent> = this.dialog.open(CounterDiscModalComponent, {\r\n      width: '730px',\r\n      height: \"100vh\",\r\n      data: {},\r\n      disableClose: true,\r\n      position: {\r\n        right: '0',\r\n      },\r\n    });\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      console.log(`Dialog result: ${result}`);\r\n    });\r\n  }\r\n  \r\n  // couponsModal(): void {\r\n  //   const dialogRef: MatDialogRef<CouponModalComponent> = this.dialog.open(CouponModalComponent, {\r\n  //     width: 'auto',\r\n  //     height: \"auto\",\r\n  //     data: {},\r\n  //     disableClose: true,\r\n  //     // position: {\r\n  //     //   right: '0',\r\n  //     // },\r\n  //   });\r\n  //   dialogRef.afterClosed().subscribe((result) => {\r\n  //     console.log(`Dialog result: ${result}`);\r\n  //   });\r\n  // }\r\n\r\n  assignProduct(promotionId): void {\r\n    const dialogRef: MatDialogRef<AssignProductToPromotionComponent> = this.dialog.open(AssignProductToPromotionComponent, {\r\n      width: 'auto',\r\n      height: \"auto\",\r\n      data: { promotionId: promotionId},\r\n      disableClose: true,\r\n    });\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      console.log(`Dialog result: ${result}`);\r\n    });\r\n  }\r\n\r\n  editPromotionModal(promotionId) {\r\n    const dialogRef: MatDialogRef<EditPromotionComponent> = this.dialog.open(EditPromotionComponent, {\r\n      width: '700px',\r\n      height: '100vh',\r\n      data: { promotionId: promotionId },\r\n      disableClose: true,\r\n      position: {\r\n        right: '0',\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      console.log(`Dialog result: ${result}`);\r\n    });\r\n  }\r\n\r\n  isActive(promotionId, isActive) {\r\n    const newStatus = !isActive; // Toggle between '1' and '0'\r\n    const payload = {\r\n      promotionId: promotionId,        \r\n    };\r\n    this.promotionService.promotionToggle({ data: payload, userId: this.currentUser.id })\r\n      .then((res) => {\r\n        if (res.success) {\r\n              if (newStatus) {\r\n                this.toastService.toastMsg({\r\n                  title: \"Success\",\r\n                  content: \"Status Has Changed To Active\",\r\n                });\r\n                this.getAllPromotion()\r\n              } else {\r\n                this.toastService.toastMsg({\r\n                  title: \"Success\",\r\n                  content: \"Status Has Changed To Inactive\",\r\n                });\r\n                this.getAllPromotion()\r\n              }\r\n            }\r\n      })\r\n      .catch((error) => {\r\n        this.toastService.toastMsg({\r\n          title: 'Error',\r\n          content: this.titleCasePipe.transform(error.error.error_message)\r\n        })\r\n      });\r\n  }\r\n\r\n  // Add a method to update the filter value\r\n  updateTypeFilter(filterValue: string | null) {\r\n    if(filterValue === 'ALL') {\r\n      this.selectedTypeFilter = null;\r\n    } else {\r\n      this.selectedTypeFilter = filterValue;\r\n    }\r\n  }\r\n\r\n  toggleFilter() {\r\n    this.isFilterVisible = !this.isFilterVisible;\r\n  }\r\n\r\n  closeDropdown() {\r\n    this.isFilterVisible = false;\r\n  }\r\n}\r\n","<div *ngIf=\"isLoading\" class=\"loader-container\">\r\n    <div class=\"loader\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"container-fluid bg-white p-0\">\r\n    <div class=\"row headerButtons mb-3\" id=\"showoptionHide\">\r\n        <div class=\"flex-item searchBar\">\r\n            <input type=\"search\" id=\"searchInput\" class=\"search-form-control pe-5 my-2\" placeholder=\"Search...\"\r\n                (input)=\"onSearchInputChange($event.target.value)\" />\r\n        </div>\r\n        <div class=\"navOption-btns flex-item formButtons mx-0\">\r\n            <button id=\"saleButtonPrint1\" class=\"btn text-nowrap my-2\" type=\"button\" (click)=\"addPromotionModal()\">\r\n                <i class=\"fas fa-plus me-2\"> </i>Add Promotion&nbsp;&nbsp;&nbsp;\r\n            </button>\r\n            <button id=\"saleButtonPrint1\" class=\"btn text-nowrap my-2\" type=\"button\" (click)=\"counterDiscountModal()\">\r\n                <i class=\"fas fa-plus me-2\"> </i>Counter Discount&nbsp;&nbsp;&nbsp;\r\n            </button>\r\n\r\n            <!-- <button id=\"saleButtonPrint1\" class=\"btn text-nowrap my-2\" type=\"button\"\r\n                onclick=\"location.href = '';\">\r\n                <i class=\"fas fa-download\"></i>\r\n            </button> -->\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"table-container overflow-visible\">\r\n        <div class=\"table-div\" style=\"overflow-x: scroll\">\r\n            <table class=\"table table-responsive\">\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-nowrap\" style=\"\r\n                display: flex;\r\n                justify-content: flex-start;\r\n                align-items: center;\r\n              \">\r\n                            <input type=\"checkbox\" class=\"form-check-input\" (change)=\"onChekMultiple($event)\"\r\n                                [value]=\"-1\" [checked]=\"\r\n                  promotionIdList.length === promotionList.length\r\n                \" [(ngModel)]=\"allSelect\" />\r\n                            <div class=\"d-flex align-items-center\">\r\n                                <span *ngIf=\"showDeleteButton\">\r\n                                    <button *ngIf=\"checkSingleArray.length > 0 || isChecked\" class=\"btn\"\r\n                                        data-bs-toggle=\"modal\" data-bs-target=\"#errorArchiveSelect-modal\"\r\n                                        style=\"padding-top: 15px\">\r\n                                        <span *ngIf=\"checkSingleArray.length > 0 || isChecked\"\r\n                                            class=\"material-icons icon-color iconFontSize\" data-bs-toggle=\"tooltip\"\r\n                                            style=\"color: #fc7643\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\"\r\n                                            title=\"Archive\" (click)=\"\r\n                        upiCheckedId.length > 0\r\n                          ? getUPIcheckId(upiCheckedId)\r\n                          : getSingleCheckedId(checkSingleArray)\r\n                      \">archive\r\n                                        </span>\r\n                                    </button>\r\n                                </span>\r\n                                <span *ngIf=\"showUnarchiveButton\">\r\n                                    <button *ngIf=\"checkSingleArray.length > 0 || isChecked\" class=\"btn\"\r\n                                        data-bs-toggle=\"modal\" data-bs-target=\"#errorUnarchiveSelect-modal\"\r\n                                        style=\"padding-top: 15px\">\r\n                                        <span *ngIf=\"checkSingleArray.length > 0 || isChecked\"\r\n                                            class=\"material-icons icon-color iconFontSize\" data-bs-toggle=\"tooltip\"\r\n                                            style=\"color: #fc7643\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\"\r\n                                            title=\"Unrchive\" (click)=\"\r\n                        upiCheckedId.length > 0\r\n                          ? getUPIcheckId(upiCheckedId)\r\n                          : getSingleCheckedId(checkSingleArray)\r\n                      \">unarchive\r\n                                        </span>\r\n                                    </button>\r\n                                </span>\r\n                            </div>\r\n                        </th>\r\n                        <th class=\"text-nowrap\">Schema Name</th>\r\n                        <th class=\"text-nowrap\">Schema Type\r\n                            <div class=\"dropdown\" #dropdown>\r\n                            <img src=\"../../../../assets/icons/filter-filled-tool-symbol.png\" width=\"17\"\r\n                                height=\"17\" alt=\"filter\" class=\"filterIcon\" (click)=\"toggleFilter()\">\r\n                            <div class=\"filterBox\" [ngClass]=\"{'show': isFilterVisible}\">\r\n                                <div class=\"filterOptions\">\r\n                                <label>\r\n                                    <input type=\"radio\" name=\"filter\" (change)=\"updateTypeFilter('ALL')\" checked> All\r\n                                </label>\r\n                                <label>\r\n                                    <input type=\"radio\" name=\"filter\" (change)=\"updateTypeFilter('DISCOUNT')\"> DISCOUNT\r\n                                </label>\r\n                                <label>\r\n                                    <input type=\"radio\" name=\"filter\" (change)=\"updateTypeFilter('PRODUCT')\"> PRODUCT\r\n                                </label>\r\n                                <label>\r\n                                    <input type=\"radio\" name=\"filter\" (change)=\"updateTypeFilter('FLAT')\"> FLAT\r\n                                </label>\r\n                                </div>\r\n                            </div>\r\n                            </div>\r\n                        </th>\r\n                        <th class=\"text-nowrap\">Get Qyt</th>\r\n                        <th class=\"text-nowrap\">Buy Qyt</th>\r\n                        <th class=\"text-nowrap\">Discount</th>\r\n                        <th class=\"text-nowrap\">Minimun Amt</th>\r\n                        <th class=\"text-nowrap\"></th>\r\n                        <th class=\"text-nowrap\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <ng-container *ngFor=\"let item of promotionList; let i = index\">\r\n                        <tr style=\"color: #676398 !important\"\r\n                            [ngStyle]=\"{ 'background-color': item.isDeleted ? '#c7c2de' : i % 2 === 0 ? '#ffffff' : '#f2f2f2' }\"\r\n                            *ngIf=\"selectedTypeFilter === null || item.type === selectedTypeFilter\">\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                <input class=\"form-check-input\" type=\"checkbox\" [ngClass]=\"{\r\n                    'custom-checkbox': !item.isDeleted,\r\n                    'custom-checkbox deleted': item.isDeleted\r\n                    }\" [checked]=\"promotionIdList.includes(item.id)\" (change)=\"onChekedsingleCheck($event, item.id)\"\r\n                                    [value]=\"item.id\" />\r\n                            </td>\r\n                            <td class=\"long-name\" style=\"vertical-align: middle\">\r\n                                {{ item?.schemaName }}\r\n                            </td><td class=\"long-name\" style=\"vertical-align: middle\">\r\n                                {{ item?.type }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.buyQuantity }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.getQuantity }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.discountPercentage ? item?.discountPercentage + ' %' : ('₹&nbsp;' + (item?.discountAmount != null ? (item?.discountAmount | number:'1.2-2') : '0.00')) }}\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"vertical-align: middle\">\r\n                                {{ item?.minumumBill }}\r\n                            </td>\r\n                            <td class=\"text-nowrap varticalAlign\">\r\n                                <div class=\"\">\r\n                                    <button class=\"toggle-button\" (click)=\"isActive(item.id, item.isActive)\"\r\n                                        [ngClass]=\"{'active': item.isActive, 'inactive': !item.isActive}\" [disabled]=\"item.isDefault\">\r\n                                        <div class=\"toggle-slider\"></div>\r\n                                    </button>\r\n                                </div>\r\n                            </td>\r\n                            <td class=\"text-nowrap\" style=\"text-align: center; vertical-align: middle\">\r\n                                <div>\r\n                                    <!-- <button class=\"btn\">\r\n                                        <span class=\"bi bi-eye icon-color iconFontSize ps-2\" (click)=\"viewConsignmentModal(item.id)\" data-bs-toggle=\"tooltip\"\r\n                                        data-bs-placement=\"top\" title=\"View\"></span>\r\n                                    </button> -->\r\n\r\n                                    <button class=\"btn\">\r\n                                        <div class=\"\" (click)=\"assignProduct(item.id)\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Assign Product\">\r\n                                            <img src=\"/assets/icons/dashboard-icons/assign_products.png\" class=\"bi-pie-chart\" width=\"20\" height=\"20\">\r\n                                        </div>\r\n                                    </button>\r\n\r\n                                    <button class=\"btn\">\r\n                                        <span class=\"bi-pencil-square icon-color iconFontSize ps-2\"\r\n                                            (click)=\"editPromotionModal(item.id)\" data-bs-toggle=\"tooltip\"\r\n                                            data-bs-placement=\"top\" title=\"Edit\"></span>\r\n                                    </button>\r\n\r\n                                    <button class=\"btn mt-2\" data-bs-toggle=\"modal\" data-bs-target=\"#errorDelete-modal\">\r\n                                        <span class=\"material-icons icon-color iconFontSize\" data-bs-toggle=\"tooltip\"\r\n                                            style=\"color: #fc7643\" (click)=\"archhivePromotion(item.id, item.isDeleted)\"\r\n                                            data-bs-placement=\"top\" [title]=\"item.isDeleted ? 'Unarchive' : 'Archive'\">{{\r\n                                            item.isDeleted ? \"unarchive\" : \"archive\" }}</span>\r\n                                    </button>\r\n                                </div>\r\n                            </td>\r\n                            <!-- <td class=\"text-nowrap\" style=\"text-align: center; vertical-align: middle\"></td> -->\r\n\r\n                        </tr>\r\n                    </ng-container>\r\n                </tbody>\r\n                <tbody *ngIf=\"promotionList.length === 0\">\r\n                    <tr class=\"text-center\">\r\n                        <td colspan=\"10\">\r\n                            <img class=\"image-responsive\"\r\n                                src=\"../../../assets/img/icons/spot-illustrations/notfound1.png\" alt=\"notfound1\"\r\n                                width=\"200\" height=\"150\" />\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- <mat-paginator sticky class=\"float-right mt-2\" *ngIf=\"promotionList.length > 0\"\r\n                [pageSize]=\"partyPageSize\" [pageSizeOptions]=\"[5, 10, 20, 30]\" [length]=\"totalrow\"\r\n                [pageIndex]=\"currentPageNo\" showFirstLastButtons (page)=\"handlePage($event)\" aria-label=\"Select page\">\r\n            </mat-paginator> -->\r\n        </div>\r\n\r\n        <!-- Ṃultiple Unarchive -->\r\n        <div class=\"modal fade\" id=\"errorUnarchiveSelect-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 class=\"mb-1 text-center font-weight-bold\" style=\"font-weight: 800\"\r\n                                id=\"modalExampleDemoLabel\">\r\n                                <i class=\"fa fa-unlock-alt\" aria-hidden=\"true\"></i> Unarchive\r\n                                Promotions?\r\n                            </h2>\r\n                        </div>\r\n                        <h4 *ngIf=\"isChecked\" class=\"text-center\">\r\n                            Are you sure to unarchive all Promotions?\r\n                        </h4>\r\n                        <h4 *ngIf=\"!isChecked\" class=\"text-center\">\r\n                            Are you sure to unarchive all selected Promotions?\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a *ngIf=\"isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"unArchiveMultiplePromotion()\">Unarchive</a>\r\n                        <a *ngIf=\"!isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"unArchiveMultiplePromotion()\">Unarchive</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Ṃultiple Archive -->\r\n        <div class=\"modal fade\" id=\"errorArchiveSelect-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 class=\"mb-1 text-center font-weight-bold\" style=\"font-weight: 800\"\r\n                                id=\"modalExampleDemoLabel\">\r\n                                <i class=\"fa fa-lock-alt\" aria-hidden=\"true\"></i> Archive\r\n                                Promotions?\r\n                            </h2>\r\n                        </div>\r\n                        <h4 *ngIf=\"isChecked\" class=\"text-center\">\r\n                            Are you sure to archive all Promotions?\r\n                        </h4>\r\n                        <h4 *ngIf=\"!isChecked\" class=\"text-center\">\r\n                            Are you sure to archive all selected Promotions?\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a *ngIf=\"isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"archiveMultiplePromotion()\">Archive</a>\r\n                        <a *ngIf=\"!isChecked\" class=\"btn btn-outline-danger\" data-bs-dismiss=\"modal\"\r\n                            (click)=\"archiveMultiplePromotion()\">Archive</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Signle archive  -->\r\n        <div class=\"modal fade\" id=\"errorDelete-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 *ngIf=\"!isdeletedParty\" class=\"mb-1 text-center font-weight-bold\"\r\n                                style=\"font-weight: 800\" id=\"modalExampleDemoLabel\">\r\n                                Archive Promotion?\r\n                            </h2>\r\n                            <h2 *ngIf=\"isdeletedParty\" class=\"mb-1 text-center font-weight-bold\"\r\n                                style=\"font-weight: 800\" id=\"modalExampleDemoLabel\">\r\n                                Unarchive Promotion?\r\n                            </h2>\r\n                        </div>\r\n                        <h4 class=\"text-center\" *ngIf=\"!isdeletedParty\">\r\n                            Are You Sure To Archive Promotions?\r\n                        </h4>\r\n                        <h4 class=\"text-center\" *ngIf=\"isdeletedParty\">\r\n                            Are You Sure To Unarchive Promotions?\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a class=\"btn btn-outline-danger\" *ngIf=\"!isdeletedParty\" (click)=\"archiveSignlePromotion()\"\r\n                            data-bs-dismiss=\"modal\">Archive\r\n                        </a>\r\n                        <a *ngIf=\"isdeletedParty\" class=\"btn btn-outline-warning\" (click)=\"archiveSignlePromotion()\"\r\n                            data-bs-dismiss=\"modal\">Unarchive\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Flat Discount Modal -->\r\n        <div class=\"modal fade\" id=\"flatDiscount-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"max-width: 350px\">\r\n                <div class=\"modal-content position-relative\">\r\n                    <div class=\"position-absolute top-0 end-0 mt-2 me-2 z-index-1\">\r\n                        <a class=\"btn-close btn btn-sm btn-circle d-flex flex-center transition-base\"\r\n                            data-bs-dismiss=\"modal\" aria-label=\"Close\"></a>\r\n                    </div>\r\n                    <div class=\"modal-body p-0\">\r\n                        <div class=\"rounded-top-lg py-3 ps-4 pe-6 bg-light\">\r\n                            <h2 class=\"mb-1 text-center font-weight-bold\"\r\n                                style=\"font-weight: 800\" id=\"modalExampleDemoLabel\">\r\n                                Flat Discount\r\n                            </h2>\r\n                        </div>\r\n                        <h4 class=\"text-center\">\r\n                        </h4>\r\n                    </div>\r\n                    <div class=\"modal-footer justify-content-center\">\r\n                        <a class=\"btn btn-outline-success\" data-bs-dismiss=\"modal\">Close</a>\r\n                        <a class=\"btn btn-outline-danger\"\r\n                            data-bs-dismiss=\"modal\">Save\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { PromotionsComponent } from './promotions.component';\r\nimport { PromotionListComponent } from './components/promotion-list/promotion-list.component';\r\nimport { CouponModalComponent } from './components/coupon-modal/coupon-modal.component';\r\nimport { CouponComponent } from './components/coupon/coupon.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path:'',\r\n    component: PromotionsComponent,\r\n    children: [\r\n      {\r\n        path:'',\r\n        redirectTo: 'prmotion-list',\r\n        pathMatch: 'full'\r\n      },\r\n      {\r\n        path:'prmotion-list',\r\n        component: PromotionListComponent,\r\n      },\r\n      {\r\n        path:'Coupon-list',\r\n        component: CouponComponent,\r\n      },  \r\n    ],\r\n    pathMatch: 'prefix',\r\n    data: {\r\n      routerLinkActiveOptions: { exact: true, pathMatch: 'full' }\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PromotionsRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-promotions',\r\n  templateUrl: './promotions.component.html',\r\n  styleUrls: ['./promotions.component.scss']\r\n})\r\nexport class PromotionsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"component-container container-fluid bg-white p-4\">\r\n    <div id=\"navPanel\" class=\"row\">\r\n      <div class=\"navOptions col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12\">\r\n        <div class=\"row page-nav-link mt-3\">\r\n          <div class=\"col-xxl-1 col-xl-1 col-lg-2 col-md-3 col-sm-6 links\">\r\n            <a class=\"mt-3 pb-1 ps-1 text-nowrap\" routerLink=\"./prmotion-list\" routerLinkActive=\"active\">Promotions</a>\r\n          </div><div class=\"col-xxl-1 col-xl-1 col-lg-2 col-md-3 col-sm-6 links\">\r\n            <a class=\"mt-3 pb-1 ps-1 text-nowrap\" routerLink=\"./Coupon-list\" routerLinkActive=\"active\">Coupons</a>\r\n          </div>\r\n          <div class=\"col-lg-6 \"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <hr class=\"mt-1\">\r\n    <div>\r\n      <router-outlet></router-outlet>\r\n    </div>\r\n  </div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PromotionsRoutingModule } from './promotions-routing.module';\r\nimport { RouterModule } from '@angular/router';\r\nimport { MaterialExampleModule } from 'src/app/material.module';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatNativeDateModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatMomentDateModule } from '@angular/material-moment-adapter';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\r\nimport { PromotionsComponent } from './promotions.component';\r\nimport { PromotionListComponent } from './components/promotion-list/promotion-list.component';\r\nimport { AddPromotionComponent } from './components/add-promotion/add-promotion/add-promotion.component';\r\nimport { EditPromotionComponent } from './components/edit-promotion/edit-promotion/edit-promotion.component';\r\nimport { AssignProductToPromotionComponent } from './components/assign-product-to-promotion/assign-product-to-promotion/assign-product-to-promotion.component';\r\nimport { CounterDiscModalComponent } from './components/counter-disc-modal/counter-disc-modal.component';\r\nimport { CouponModalComponent } from './components/coupon-modal/coupon-modal.component';\r\nimport { CouponComponent } from './components/coupon/coupon.component';\r\nimport { EditCouponComponent } from './components/edit-coupon/edit-coupon.component';\r\n@NgModule({\r\n  declarations: [\r\n    PromotionsComponent,\r\n    PromotionListComponent,\r\n    AddPromotionComponent,\r\n    EditPromotionComponent,\r\n    AssignProductToPromotionComponent,\r\n    CounterDiscModalComponent,\r\n    CouponModalComponent,\r\n    CouponComponent,\r\n    EditCouponComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    PromotionsRoutingModule,\r\n    RouterModule,\r\n    MaterialExampleModule,\r\n    MatInputModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatNativeDateModule,\r\n    MatFormFieldModule,\r\n    MatDatepickerModule,\r\n    MatMomentDateModule,    \r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    BsDatepickerModule.forRoot(),\r\n  ]\r\n})\r\nexport class PromotionsModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}