(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{3139:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return X},default:function(){return M}});var o=n(8003),r=n(1984),i=n(8703),s=n(8690),a=n(8583),c=n(9564),l=n(3025),d=n(9590),u=n(4743),m=n(5250),p=n(7045);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class f extends Error{constructor(e,t,n){super(e),(0,o.Z)(this,"status",void 0),(0,o.Z)(this,"data",void 0),this.status=t,this.data=n}}async function y(e,t){const n=await fetch(e,t),o=await n.json();if(!n.ok)throw new f((null===o||void 0===o?void 0:o.error)||n.statusText,n.status,o);return o}function h(e){return Object.entries(e).reduce(((e,[t,n])=>(0,p.xb)(n)?e:b(b({},e),{},{[t]:n})),{})}var g=n(6934);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n={}){const{0:o,1:r}=(0,s.useState)(0),i=new URLSearchParams(h(C(C({},e),n))),a=(0,s.useMemo)((()=>({headers:t?{Authorization:"Bearer ".concat(t)}:{}})),[t]),c=e=>![403,404,429].includes(e),{data:l,size:d,setSize:p,error:v,mutate:b,isValidating:f}=(0,m.ZP)(((t,o)=>{if(0===n.first||0===n.last)return null;if(0===t)return["/api/discussions?".concat(i),a];if(!o.discussion.pageInfo.hasNextPage)return null;const r=new URLSearchParams(h(C(C({},e),{},{after:o.discussion.pageInfo.endCursor,before:n.before})));return["/api/discussions?".concat(r),a]}),y,{onErrorRetry:(e,t,n,o,r)=>{c(null===e||void 0===e?void 0:e.status)&&u.J$.default.onErrorRetry(e,t,n,o,r)},revalidateOnMount:c(o),revalidateOnFocus:c(o),revalidateOnReconnect:c(o)});null!==v&&void 0!==v&&v.status&&v.status!==o?r(v.status):null!==v&&void 0!==v&&v.status||!o||r(0);const g=(0,s.useCallback)((e=>{var t;if(!l)return b();const n=l.slice(0,l.length-1),[o]=l.slice(-1);return b([...n,C(C({},o),{},{discussion:C(C({},o.discussion),{},{comments:[...(null===(t=o.discussion)||void 0===t?void 0:t.comments)||[],e]})})],!1),b()}),[l,b]),w=(0,s.useCallback)((e=>{const t=l.map((t=>C(C({},t),{},{discussion:C(C({},t.discussion),{},{comments:t.discussion.comments.map((t=>t.id===e.replyToId?C(C({},t),{},{replies:[...t.replies,e]}):t))})})));return b(t,!1),b()}),[l,b]),O=(0,s.useCallback)(((e,t)=>b(e,!t)&&(null===t||void 0===t?void 0:t.then((()=>b())))),[b]),N=(0,s.useCallback)(((e,t)=>b(l.map((t=>C(C({},t),{},{discussion:C(C({},t.discussion),{},{comments:t.discussion.comments.map((t=>t.id===e.id?e:t))})}))),!t)&&(null===t||void 0===t?void 0:t.then((()=>b())))),[l,b]),x=(0,s.useCallback)(((e,t)=>b(l.map((t=>C(C({},t),{},{discussion:C(C({},t.discussion),{},{comments:t.discussion.comments.map((t=>t.id===e.replyToId?C(C({},t),{},{replies:t.replies.map((t=>t.id===e.id?e:t))}):t))})}))),!t)&&(null===t||void 0===t?void 0:t.then((()=>b())))),[l,b]);return{data:l,error:v,size:d,setSize:p,isValidating:f,isLoading:!v&&!l,isError:!!v,mutators:{addNewComment:g,addNewReply:w,updateDiscussion:O,updateComment:N,updateReply:x,mutate:b}}}var N=n(8832),x=n(2036),k=n(5641),j=n(841);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=n(3434);function I({viewer:e,discussionId:t,context:n,replyToId:o,onSubmit:r,onDiscussionCreateRequest:i}){const{t:a}=(0,l.$I)(),{0:d,1:u}=(0,s.useState)(!1),{0:m,1:v}=(0,s.useState)(""),{0:b,1:f}=(0,s.useState)(""),{0:y,1:h}=(0,s.useState)(""),{0:g,1:w}=(0,s.useState)(!1),{0:C,1:O}=(0,s.useState)(!1),{0:N,1:Z}=(0,s.useState)(!1),{0:I,1:R}=(0,s.useState)(!1),{0:E,1:D}=(0,s.useState)(""),{token:B,origin:L,getLoginUrl:T}=(0,s.useContext)(c.Vo),_=(0,s.useRef)(null),X=T(L),M=!!o;(0,s.useEffect)((()=>{d&&m!==b&&(m&&(w(!0),async function(e,t,n){return fetch(j.Db,{method:"POST",headers:t?{Authorization:"token ".concat(t)}:{},body:JSON.stringify(P({mode:"gfm",text:e},n?{context:n}:{}))}).then((e=>e.text()))}(m,B,n).then((e=>{const t=(0,k.jd)(e);h(t),w(!1)}))),f(m))}),[d,m,b,B,n]);const A=(0,s.useCallback)((()=>{v(""),h(""),u(!1),O(!1),Z(!1)}),[]),z=(0,s.useCallback)((async()=>{if(C||!t&&!i)return;O(!0);const e=t||await i(),n={body:m,discussionId:e,replyToId:o};o?async function(e,t){return fetch(j.Lp,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({query:"\n  mutation($body: String!, $discussionId: ID!, $replyToId: ID!) {\n    addDiscussionReply: addDiscussionComment(input: {body: $body, discussionId: $discussionId, replyToId: $replyToId}) {\n      reply: comment {\n        id\n        author {\n          avatarUrl\n          login\n          url\n        }\n        viewerDidAuthor\n        createdAt\n        url\n        authorAssociation\n        lastEditedAt\n        deletedAt\n        isMinimized\n        bodyHTML\n        reactionGroups {\n          content\n          users {\n            totalCount\n          }\n          viewerHasReacted\n        }\n        replyTo {\n          id\n        }\n      }\n    }\n  }",variables:e})}).then((e=>e.json()))}(n,B).then((({data:{addDiscussionReply:e}})=>{const{reply:t}=e,n=(0,k.KF)(t);r(n),A()})):async function(e,t){return fetch(j.Lp,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({query:"\n  mutation($body: String!, $discussionId: ID!) {\n    addDiscussionComment(input: {body: $body, discussionId: $discussionId}) {\n      comment {\n        id\n        upvoteCount\n        viewerHasUpvoted\n        viewerCanUpvote\n        author {\n          avatarUrl\n          login\n          url\n        }\n        viewerDidAuthor\n        createdAt\n        url\n        authorAssociation\n        lastEditedAt\n        deletedAt\n        isMinimized\n        bodyHTML\n        reactionGroups {\n          content\n          users {\n            totalCount\n          }\n          viewerHasReacted\n        }\n        replies(first: 100) {\n          totalCount\n          nodes {\n            id\n            author {\n              avatarUrl\n              login\n              url\n            }\n            createdAt\n            url\n            authorAssociation\n            lastEditedAt\n            deletedAt\n            isMinimized\n            bodyHTML\n            reactionGroups {\n              content\n              users {\n                totalCount\n              }\n              viewerHasReacted\n            }\n          }\n        }\n      }\n    }\n  }",variables:e})}).then((e=>e.json()))}(n,B).then((({data:{addDiscussionComment:e}})=>{const{comment:t}=e,n=(0,k.qw)(t);r(n),A()}))}),[C,t,m,o,i,B,r,A]),H=(0,s.useCallback)((e=>{v(e.target.value),E&&E!==_.current.style.height||((0,p.p1)(_.current),D(_.current.style.height))}),[E]);return(0,s.useEffect)((()=>{_.current&&N&&_.current.focus()}),[N]),!M||N?(0,S.BX)("form",{className:"color-bg-primary color-border-primary gsc-comment-box".concat(M?" gsc-comment-box-is-reply":""),onSubmit:e=>{e.preventDefault(),z()},children:[(0,S.BX)("div",{className:"color-bg-tertiary color-border-primary gsc-comment-box-tabs",children:[(0,S.BX)("div",{className:"mx-2 mb-[-1px] mt-2",children:[(0,S.tZ)("button",{className:"px-4 py-2 border border-b-0 focus:outline-none ".concat(d?"color-text-secondary border-transparent":"color-text-primary color-bg-canvas rounded-t color-border-primary"),onClick:()=>u(!1),type:"button",children:a("write")}),(0,S.tZ)("button",{className:"px-4 py-2 border border-b-0 focus:outline-none ml-1 ".concat(d?"color-text-primary color-bg-canvas rounded-t color-border-primary":"color-text-secondary border-transparent"),onClick:()=>u(!0),type:"button",tabIndex:-1,children:a("preview")})]}),d?null:(0,S.tZ)("div",{className:"gsc-comment-box-md-toolbar",children:(0,S.tZ)("button",{className:"gsc-toolbar-item",type:"button",title:a(I?"disableFixedWidth":"enableFixedWidth"),onClick:()=>{R(!I),_.current.focus()},tabIndex:-1,children:(0,S.tZ)(x.R1h,{})})})]}),(0,S.tZ)("div",{className:"gsc-comment-box-main",children:d?(0,S.tZ)("div",{className:"markdown color-border-primary gsc-comment-box-preview",dangerouslySetInnerHTML:g?void 0:{__html:y||a("nothingToPreview")},onClick:k.Cn,children:g?a("loadingPreview"):void 0}):(0,S.tZ)("textarea",{className:"form-control input-contrast gsc-comment-box-textarea ".concat(I?"gsc-is-fixed-width":""),placeholder:a(B?"writeAComment":"signInToComment"),onChange:H,value:m,disabled:!B||C,ref:_,onKeyDown:e=>(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&z()})}),(0,S.BX)("div",{className:"gsc-comment-box-bottom",children:[(0,S.BX)("a",{className:"link-secondary gsc-comment-box-markdown-hint",rel:"nofollow noopener noreferrer",target:"_blank",href:"https://guides.github.com/features/mastering-markdown/",children:[(0,S.tZ)(x.BuP,{className:"mr-1"}),a("stylingWithMarkdownIsSupported")]}),(0,S.BX)("div",{className:"gsc-comment-box-buttons",children:[M?(0,S.tZ)("button",{className:"ml-1 border rounded-md btn",onClick:()=>Z(!1),type:"button",children:a("cancel")}):null,B?(0,S.tZ)("button",{className:"ml-1 border rounded-md items-center btn btn-primary",type:"submit",disabled:B&&!m.trim()||C,children:a(M?"reply":"comment")}):(0,S.BX)("a",{className:"ml-1 border hover:no-underline rounded-md inline-flex items-center btn btn-primary",target:"_top",href:X,children:[(0,S.tZ)(x.g_Y,{className:"mr-2",fill:"currentColor"})," ",a("signInWithGitHub")]})]})]})]}):(0,S.BX)("div",{className:"color-bg-tertiary gsc-reply-box",children:[e?(0,S.tZ)("a",{rel:"nofollow noopener noreferrer",target:"_blank",href:e.url,className:"flex items-center flex-shrink-0",children:(0,S.tZ)("img",{className:"inline-block rounded-full",src:e.avatarUrl,width:"30",height:"30",alt:"@".concat(e.login)})}):null,(0,S.tZ)("button",{className:"w-full px-2 py-1 ml-2 text-left border rounded cursor-text form-control color-text-secondary color-border-primary",onClick:()=>{Z(!0)},type:"button",children:a("writeAReply")})]})}var R=n(1879);const E=["addNewComment","updateReactions","increaseSize","backMutators","frontMutators"];function D({onDiscussionCreateRequest:e,onError:t}){var n;const{token:o,origin:r}=(0,s.useContext)(c.Vo),{t:i}=(0,l.$I)(),{repo:u,term:m,number:p,category:v,reactionsEnabled:b,emitMetadata:f,inputPosition:y,defaultCommentOrder:h}=(0,s.useContext)(c.E_),{0:w,1:x}=(0,s.useState)(h),k=function(e,t,n="oldest"){var o,r,i,a,c,l,d,u,m,p,v,b,f,y,h,w,N,x;const k=O(e,t,{last:15}),{data:j,isLoading:Z,mutators:P,error:S}=k,I=j&&j[j.length-1],R=null===I||void 0===I||null===(o=I.discussion)||void 0===o||null===(r=o.comments)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.id,E=O(e,t,{first:15}),{data:D,isLoading:B,size:L,setSize:T,error:_}=E,X=null===D||void 0===D?void 0:D.map((e=>{var t,n,o;let r=!1;const i=C(C({},e),{},{discussion:C(C({},null===e||void 0===e?void 0:e.discussion),{},{comments:null===e||void 0===e||null===(t=e.discussion)||void 0===t||null===(n=t.comments)||void 0===n?void 0:n.filter((e=>(e.id===R&&(r=!0),!r)))})});return i.discussion.totalReplyCount=null===(o=i.discussion.comments)||void 0===o?void 0:o.reduce(((e,t)=>e+t.replyCount),0),i}));let M=(null===I||void 0===I||null===(a=I.discussion)||void 0===a?void 0:a.comments)||[],A=(null===X||void 0===X?void 0:X.flatMap((e=>{var t;return(null===e||void 0===e||null===(t=e.discussion)||void 0===t?void 0:t.comments)||[]})))||[],z=k.mutators,H=E.mutators;if("newest"===n){const e=A;A=M.slice().reverse(),M=e.slice().reverse(),H=k.mutators,z=E.mutators}const U=P.addNewComment,$=(0,s.useCallback)(((e,t)=>I?P.updateDiscussion([(0,g.aT)(I,e)],t):t.then((()=>P.mutate()))),[I,P]),q=(0,s.useCallback)((()=>T(L+1)),[T,L]),F=(null===I||void 0===I||null===(c=I.discussion)||void 0===c?void 0:c.totalCommentCount)-(null===I||void 0===I||null===(l=I.discussion)||void 0===l||null===(d=l.comments)||void 0===d?void 0:d.length)-(null===X||void 0===X?void 0:X.reduce(((e,t)=>{var n;return e+(null===(n=t.discussion.comments)||void 0===n?void 0:n.length)}),0)),G=null===I||void 0===I||null===(u=I.discussion)||void 0===u?void 0:u.reactionCount,J=null===I||void 0===I||null===(m=I.discussion)||void 0===m?void 0:m.totalCommentCount,Y=((null===I||void 0===I||null===(p=I.discussion)||void 0===p?void 0:p.totalReplyCount)||0)+((null===X||void 0===X?void 0:X.reduce(((e,t)=>e+t.discussion.totalReplyCount),0))||0),K=_||S,V=(null===I||void 0===I||null===(v=I.discussion)||void 0===v||null===(b=v.pageInfo)||void 0===b?void 0:b.hasPreviousPage)&&B||Z,W=B||L>0&&!(null!==X&&void 0!==X&&X[L-1]),Q=404===(null===K||void 0===K?void 0:K.status),ee=429===(null===K||void 0===K?void 0:K.status),te=null===I||void 0===I||null===(f=I.discussion)||void 0===f?void 0:f.locked,ne={id:null===I||void 0===I||null===(y=I.discussion)||void 0===y?void 0:y.id,url:null===I||void 0===I||null===(h=I.discussion)||void 0===h?void 0:h.url,locked:null===I||void 0===I||null===(w=I.discussion)||void 0===w?void 0:w.locked,reactions:null===I||void 0===I||null===(N=I.discussion)||void 0===N?void 0:N.reactions,repository:null===I||void 0===I||null===(x=I.discussion)||void 0===x?void 0:x.repository,reactionCount:G,totalCommentCount:J,totalReplyCount:Y},oe=null===I||void 0===I?void 0:I.viewer;return{addNewComment:U,updateReactions:$,increaseSize:q,frontData:X,frontComments:A,frontMutators:H,backData:I,backComments:M,backMutators:z,numHidden:F,reactionCount:G,totalCommentCount:J,totalReplyCount:Y,error:K,isLoading:V,isLoadingMore:W,isNotFound:Q,isRateLimited:ee,isLocked:te,discussion:ne,viewer:oe}}({repo:u,term:m,category:v,number:p},o,w),{addNewComment:j,updateReactions:Z,increaseSize:P,backMutators:D,frontMutators:B}=k,L=(0,a.Z)(k,E);(0,s.useEffect)((()=>{var e;L.error&&t&&t(null===(e=L.error)||void 0===e?void 0:e.message)}),[L.error,t]),(0,s.useEffect)((()=>{if(!f||!L.discussion.id)return;const e={discussion:L.discussion,viewer:L.viewer};(0,d.A)(e,r)}),[L.discussion,L.viewer,f,r]);const T=async()=>{const t=await e();return B.mutate(),D.mutate(),t},_=(0,S.tZ)(I,{viewer:L.viewer,discussionId:L.discussion.id,context:u,onSubmit:j,onDiscussionCreateRequest:T}),X=L.isNotFound&&!p,M=!!L.discussion.url,A=!L.error&&!L.isNotFound&&!L.isLoading&&L.totalReplyCount>0,z=L.isRateLimited&&!o||!L.isLoading&&!L.isLocked&&(!L.error||L.isNotFound&&!p);return L.isLoading?(0,S.BX)("div",{className:"gsc-loading",children:[(0,S.tZ)("div",{className:"gsc-loading-image"}),(0,S.tZ)("span",{className:"gsc-loading-text color-fg-muted",children:i("loadingComments")})]}):(0,S.BX)("div",{className:"color-text-primary gsc-main",children:[!b||L.isLoading||!X&&L.error?null:(0,S.BX)("div",{className:"gsc-reactions",children:[(0,S.tZ)("h4",{className:"gsc-reactions-count",children:X&&!L.reactionCount?i("reactions",{count:0}):(0,S.tZ)("a",{href:L.discussion.url,target:"_blank",rel:"noreferrer noopener nofollow",className:"color-text-primary",children:i("reactions",{count:L.reactionCount||0})})}),(0,S.tZ)("div",{className:"flex justify-center items-center gap-2 flex-auto mt-2 text-sm",children:(0,S.tZ)(R.Z,{subjectId:L.discussion.id,reactionGroups:L.discussion.reactions,onReact:Z,onDiscussionCreateRequest:T})})]}),(0,S.BX)("div",{className:"gsc-comments",children:[(0,S.BX)("div",{className:"gsc-header",children:[(0,S.BX)("div",{className:"gsc-left-header",children:[(0,S.tZ)("h4",{className:"gsc-comments-count",children:X&&!L.totalCommentCount?i("comments",{count:0}):L.error&&!L.backData?i("genericError",{message:(null===(n=L.error)||void 0===n?void 0:n.message)||""}):(0,S.tZ)("a",{href:L.discussion.url,target:"_blank",rel:"noreferrer noopener nofollow",className:"color-text-primary",children:i("comments",{count:L.totalCommentCount})})}),A?(0,S.BX)(S.HY,{children:[(0,S.tZ)("h4",{className:"gsc-comments-count-separator",children:"\xb7"}),(0,S.tZ)("h4",{className:"gsc-replies-count",children:i("replies",{count:L.totalReplyCount,plus:L.numHidden>0?"+":""})})]}):null,M?(0,S.tZ)("em",{className:"text-sm color-text-secondary",children:(0,S.tZ)(l.cC,{i18nKey:"common:poweredBy",components:{a:(0,S.tZ)("a",{href:"https://giscus.app",target:"_blank",rel:"noreferrer noopener nofollow",className:"link-secondary"})}})}):null]}),L.totalCommentCount>0?(0,S.BX)("div",{className:"gsc-right-header BtnGroup",role:"listbox",children:[(0,S.tZ)("button",{className:"btn BtnGroup-item","aria-selected":"oldest"===w,role:"option",onClick:()=>x("oldest"),children:i("oldest")}),(0,S.tZ)("button",{className:"btn BtnGroup-item","aria-selected":"newest"===w,role:"option",onClick:()=>x("newest"),children:i("newest")})]}):null]}),z&&"top"===y?_:null,(0,S.BX)("div",{className:"gsc-timeline",children:[L.isLoading?null:L.frontComments.map((e=>(0,S.tZ)(N.Z,{comment:e,replyBox:o&&!L.isLocked?(0,S.tZ)(I,{discussionId:L.discussion.id,context:u,onSubmit:B.addNewReply,replyToId:e.id,viewer:L.viewer}):void 0,onCommentUpdate:B.updateComment,onReplyUpdate:B.updateReply},e.id))),L.numHidden>0?(0,S.tZ)("div",{className:"pagination-loader-container gsc-pagination",children:(0,S.BX)("button",{className:"flex flex-col items-center px-6 py-2 text-sm border rounded color-bg-primary color-border-primary",onClick:P,disabled:L.isLoadingMore,children:[(0,S.tZ)("span",{className:"color-text-secondary",children:i("hiddenItems",{count:L.numHidden})}),(0,S.BX)("span",{className:"font-semibold color-text-link",children:[L.isLoadingMore?i("loading"):i("loadMore"),"\u2026"]})]})}):null,L.isLoading?null:L.backComments.map((e=>(0,S.tZ)(N.Z,{comment:e,replyBox:o&&!L.isLocked?(0,S.tZ)(I,{discussionId:L.discussion.id,context:u,onSubmit:D.addNewReply,replyToId:e.id,viewer:L.viewer}):void 0,onCommentUpdate:D.updateComment,onReplyUpdate:D.updateReply},e.id)))]}),z&&"top"!==y?_:null]})]})}function B({origin:e,session:t}){const{0:n,1:o}=(0,s.useState)(""),{repo:r,repoId:i,categoryId:a,description:l,term:u,number:m}=(0,s.useContext)(c.E_),v=(0,s.useCallback)((t=>{(0,d.A)({error:t},e)}),[e]);(0,s.useEffect)((()=>{t&&!n&&async function(e){const t=await fetch("/api/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session:e})}).then((e=>e.json()));if("error"in t)throw new Error(t.error);const{token:n}=t;if(!n)throw new Error("Unable to retrieve token.");return n}(t).then(o).catch((e=>v(null===e||void 0===e?void 0:e.message)))}),[v,t,n]),(0,s.useEffect)((()=>{const t=new ResizeObserver((t=>{const n=t[0];n&&(0,d.A)({resizeHeight:n.contentRect.height},e)}));return t.observe(document.querySelector("body")),()=>t.disconnect()}),[e]);return(!t||n)&&r&&(u||m)?(0,S.tZ)(c.Vo.Provider,{value:{token:n,origin:e,getLoginUrl:c.Zd},children:(0,S.tZ)(D,{onDiscussionCreateRequest:async()=>async function(e,t){const{id:n}=await fetch("/api/discussions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repo:e,input:t})}).then((e=>e.json()));return n}(r,{repositoryId:i,categoryId:a,title:u,body:"# ".concat(u,"\n\n").concat(l||"","\n\n").concat((0,p.dd)(e))}),onError:v})}):null}var L=n(5332);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=!0;function M({origin:e,session:t,repo:n,term:o,number:a,category:d,repoId:u,categoryId:m,description:p,reactionsEnabled:v,emitMetadata:b,inputPosition:f,defaultCommentOrder:y,theme:h,originHost:g}){const w=e||("undefined"===typeof location?"":location.href),{theme:C,setTheme:O}=(0,s.useContext)(c.Ni),{0:N,1:x}=(0,s.useState)({repo:n,repoId:u,category:d,categoryId:m,description:p,term:o,number:a,reactionsEnabled:v,emitMetadata:b,inputPosition:f,defaultCommentOrder:y});return(0,s.useEffect)((()=>{const e=e=>{if(e.origin!==g)return;if("object"!==typeof e.data||!e.data.giscus)return;const t=e.data.giscus;if(!("setConfig"in t))return;const{setConfig:n}=t;"theme"in n&&(O(n.theme),delete n.theme),L.default.isReady&&n.lang in l.mT&&(L.default.replace(L.default.asPath,L.default.asPath,{locale:n.lang,scroll:!1}),delete n.lang),x((e=>_(_({},e),n)))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[g,O]),(0,s.useEffect)((()=>O(h)),[O,h]),(0,S.BX)(S.HY,{children:[(0,S.tZ)(r.default,{children:(0,S.tZ)("base",{target:"_top"})}),(0,S.tZ)("main",{className:"w-full mx-auto","data-theme":C,children:(0,S.tZ)(c.E_.Provider,{value:N,children:(0,S.tZ)(B,{origin:w,session:t})})}),(0,S.tZ)(i.default,{src:"/js/iframeResizer.contentWindow.min.js",integrity:"sha256-rbC2imHDJIBYUIXvf+XiYY+2cXmiSlctlHgI+rrezQo=",crossOrigin:"anonymous",strategy:"lazyOnload"})]})}},962:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/widget",function(){return n(3139)}])}},function(e){e.O(0,[547,503,937,888,179],(function(){return t=962,e(e.s=t);var t}));var t=e.O();_N_E=t}]);